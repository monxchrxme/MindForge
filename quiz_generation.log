2025-10-28 20:56:06,601 - __main__ - INFO - ======================================================================
2025-10-28 20:56:06,601 - __main__ - INFO - OBSIDIAN QUIZ PLUGIN - LANGGRAPH WORKFLOW
2025-10-28 20:56:06,601 - __main__ - INFO - ======================================================================
2025-10-28 20:56:06,602 - __main__ - INFO - 
1️⃣  Загрузка конфигурации: config/config.yaml
2025-10-28 20:56:06,604 - __main__ - INFO - 
2️⃣  Загрузка лекции: .\sample_lecture.txt\
2025-10-28 20:56:06,605 - src.utils.helpers - INFO - ✓ Загружена лекция: .\sample_lecture.txt\ (4400 символов)
2025-10-28 20:56:06,605 - __main__ - INFO -    Длина текста: 4400 символов
2025-10-28 20:56:06,605 - __main__ - INFO -    Слов: ~559
2025-10-28 20:56:06,605 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-28 20:56:06,605 - src.langgraph.workflow - INFO - Инициализация LangGraph Workflow...
2025-10-28 20:56:06,605 - src.agents.enhanced_parser_agent - INFO - Инициализация Enhanced Parser Agent...
2025-10-28 20:56:06,667 - src.agents.enhanced_parser_agent - INFO - Enhanced Parser Agent инициализирован
2025-10-28 20:56:06,667 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-28 20:56:06,667 - __main__ - ERROR - 
✗ Критическая ошибка: BaseAgent.__init__() takes 2 positional arguments but 3 were given
2025-10-28 20:59:00,612 - __main__ - INFO - ======================================================================
2025-10-28 20:59:00,612 - __main__ - INFO - OBSIDIAN QUIZ PLUGIN - LANGGRAPH WORKFLOW
2025-10-28 20:59:00,612 - __main__ - INFO - ======================================================================
2025-10-28 20:59:00,612 - __main__ - INFO - 
1️⃣  Загрузка конфигурации: config/config.yaml
2025-10-28 20:59:00,612 - __main__ - INFO - 
2️⃣  Загрузка лекции: .\sample_lecture.txt\
2025-10-28 20:59:00,612 - src.utils.helpers - INFO - ✓ Загружена лекция: .\sample_lecture.txt\ (4400 символов)
2025-10-28 20:59:00,612 - __main__ - INFO -    Длина текста: 4400 символов
2025-10-28 20:59:00,619 - __main__ - INFO -    Слов: ~559
2025-10-28 20:59:00,619 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-28 20:59:00,619 - src.langgraph.workflow - INFO - Инициализация LangGraph Workflow...
2025-10-28 20:59:00,619 - src.agents.enhanced_parser_agent - INFO - Инициализация Enhanced Parser Agent...
2025-10-28 20:59:00,682 - src.agents.enhanced_parser_agent - INFO - Enhanced Parser Agent инициализирован
2025-10-28 20:59:00,682 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-28 20:59:00,682 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-28 20:59:00,682 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов, типы: ['multiple_choice', 'true_false', 'short_answer']
2025-10-28 20:59:00,682 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-28 20:59:00,682 - src.langgraph.workflow - INFO - Построение LangGraph графа...
2025-10-28 20:59:00,682 - src.langgraph.workflow - INFO - Граф успешно построен: parser -> quiz_generator -> END
2025-10-28 20:59:00,682 - src.langgraph.workflow - INFO - LangGraph Workflow готов к работе
2025-10-28 20:59:00,682 - __main__ - INFO -    RAG: ✓ Включен
2025-10-28 20:59:00,682 - __main__ - INFO -    Веб-поиск: ✗ Отключен
2025-10-28 20:59:00,682 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-28 20:59:00,682 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-28 20:59:00,682 - src.langgraph.workflow - INFO - 
======================================================================
2025-10-28 20:59:00,682 - src.langgraph.workflow - INFO - ЗАПУСК WORKFLOW
2025-10-28 20:59:00,682 - src.langgraph.workflow - INFO - ======================================================================
2025-10-28 20:59:00,682 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-28 20:59:00,682 - src.agents.enhanced_parser_agent - INFO - Parser Agent: начало обработки
2025-10-28 20:59:00,682 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-28 20:59:00,682 - src.agents.enhanced_parser_agent - INFO - Текст длинный - активация RAG
2025-10-28 20:59:00,682 - src.agents.enhanced_parser_agent - INFO - Создание векторного хранилища...
2025-10-28 20:59:00,682 - src.agents.enhanced_parser_agent - INFO - Создано 6 чанков
2025-10-28 20:59:00,931 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-28 20:59:01,174 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-28 20:59:01,220 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-10-28 20:59:01,236 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-10-28 20:59:01,252 - src.agents.enhanced_parser_agent - INFO - Векторное хранилище создано успешно
2025-10-28 20:59:01,252 - src.agents.enhanced_parser_agent - INFO - Поиск релевантного контекста (k=3)...
2025-10-28 20:59:01,345 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-28 20:59:01,361 - src.agents.enhanced_parser_agent - INFO - Найдено 3 релевантных чанков
2025-10-28 20:59:01,536 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-28 20:59:06,637 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 20:59:06,638 - src.agents.enhanced_parser_agent - INFO - ✓ Извлечено 7 ключевых фактов
2025-10-28 20:59:06,638 - src.agents.enhanced_parser_agent - INFO - ✓ Создано 7 концепций для Quiz Agent
2025-10-28 20:59:06,639 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-28 20:59:06,640 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-28 20:59:06,640 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-28 20:59:06,640 - src.agents.adapted_quiz_agent - INFO - Получено 7 концепций от Parser Agent
2025-10-28 20:59:06,640 - src.agents.quiz_agent - INFO - Начало генерации квиза
2025-10-28 20:59:06,640 - src.agents.quiz_agent - INFO - Обнаружено 7 концепций
2025-10-28 20:59:06,641 - src.agents.adapted_quiz_agent - ERROR - ✗ Ошибка в Quiz Agent: unhashable type: 'ConceptSchema'
2025-10-28 20:59:06,641 - src.langgraph.workflow - INFO - 
======================================================================
2025-10-28 20:59:06,641 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-28 20:59:06,641 - src.langgraph.workflow - INFO - ======================================================================
2025-10-28 20:59:06,642 - src.langgraph.workflow - INFO - Извлечено фактов: 7
2025-10-28 20:59:06,642 - src.langgraph.workflow - INFO - Создано концепций: 7
2025-10-28 20:59:06,642 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-28 20:59:06,642 - src.langgraph.workflow - INFO -   - Parser: извлечено 7 фактов
2025-10-28 20:59:06,642 - src.langgraph.workflow - INFO -   - Quiz: ОШИБКА - unhashable type: 'ConceptSchema'
2025-10-28 20:59:06,642 - __main__ - ERROR - 
✗ Workflow завершился с ошибкой: unhashable type: 'ConceptSchema'
2025-10-28 21:00:23,542 - __main__ - INFO - ======================================================================
2025-10-28 21:00:23,542 - __main__ - INFO - OBSIDIAN QUIZ PLUGIN - LANGGRAPH WORKFLOW
2025-10-28 21:00:23,542 - __main__ - INFO - ======================================================================
2025-10-28 21:00:23,542 - __main__ - INFO - 
1️⃣  Загрузка конфигурации: config/config.yaml
2025-10-28 21:00:23,542 - __main__ - INFO - 
2️⃣  Загрузка лекции: .\sample_lecture.txt\
2025-10-28 21:00:23,542 - src.utils.helpers - INFO - ✓ Загружена лекция: .\sample_lecture.txt\ (4400 символов)
2025-10-28 21:00:23,542 - __main__ - INFO -    Длина текста: 4400 символов
2025-10-28 21:00:23,542 - __main__ - INFO -    Слов: ~559
2025-10-28 21:00:23,542 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-28 21:00:23,542 - src.langgraph.workflow - INFO - Инициализация LangGraph Workflow...
2025-10-28 21:00:23,542 - src.agents.enhanced_parser_agent - INFO - Инициализация Enhanced Parser Agent...
2025-10-28 21:00:23,620 - src.agents.enhanced_parser_agent - INFO - Enhanced Parser Agent инициализирован
2025-10-28 21:00:23,620 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-28 21:00:23,622 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-28 21:00:23,622 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов, типы: ['multiple_choice', 'true_false', 'short_answer']
2025-10-28 21:00:23,622 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-28 21:00:23,622 - src.langgraph.workflow - INFO - Построение LangGraph графа...
2025-10-28 21:00:23,622 - src.langgraph.workflow - INFO - Граф успешно построен: parser -> quiz_generator -> END
2025-10-28 21:00:23,622 - src.langgraph.workflow - INFO - LangGraph Workflow готов к работе
2025-10-28 21:00:23,622 - __main__ - INFO -    RAG: ✓ Включен
2025-10-28 21:00:23,622 - __main__ - INFO -    Веб-поиск: ✗ Отключен
2025-10-28 21:00:23,622 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-28 21:00:23,622 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-28 21:00:23,622 - src.langgraph.workflow - INFO - 
======================================================================
2025-10-28 21:00:23,622 - src.langgraph.workflow - INFO - ЗАПУСК WORKFLOW
2025-10-28 21:00:23,622 - src.langgraph.workflow - INFO - ======================================================================
2025-10-28 21:00:23,622 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-28 21:00:23,622 - src.agents.enhanced_parser_agent - INFO - Parser Agent: начало обработки
2025-10-28 21:00:23,622 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-28 21:00:23,622 - src.agents.enhanced_parser_agent - INFO - Текст длинный - активация RAG
2025-10-28 21:00:23,622 - src.agents.enhanced_parser_agent - INFO - Создание векторного хранилища...
2025-10-28 21:00:23,622 - src.agents.enhanced_parser_agent - INFO - Создано 6 чанков
2025-10-28 21:00:23,825 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-28 21:00:24,027 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-28 21:00:24,073 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-10-28 21:00:24,089 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-10-28 21:00:24,089 - src.agents.enhanced_parser_agent - INFO - Векторное хранилище создано успешно
2025-10-28 21:00:24,089 - src.agents.enhanced_parser_agent - INFO - Поиск релевантного контекста (k=3)...
2025-10-28 21:00:24,214 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-28 21:00:24,214 - src.agents.enhanced_parser_agent - INFO - Найдено 3 релевантных чанков
2025-10-28 21:00:24,370 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-28 21:00:27,875 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 21:00:27,875 - src.agents.enhanced_parser_agent - INFO - ✓ Извлечено 8 ключевых фактов
2025-10-28 21:00:27,875 - src.agents.enhanced_parser_agent - INFO - ✓ Создано 8 концепций для Quiz Agent
2025-10-28 21:00:27,875 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-28 21:00:27,875 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-28 21:00:27,875 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-28 21:00:27,875 - src.agents.adapted_quiz_agent - INFO - Получено 8 концепций от Parser Agent
2025-10-28 21:00:27,875 - src.agents.quiz_agent - INFO - Начало генерации квиза
2025-10-28 21:00:27,875 - src.agents.quiz_agent - INFO - Обнаружено 8 концепций
2025-10-28 21:00:27,875 - src.agents.adapted_quiz_agent - ERROR - ✗ Ошибка в Quiz Agent: unhashable type: 'ConceptSchema'
2025-10-28 21:00:27,875 - src.langgraph.workflow - INFO - 
======================================================================
2025-10-28 21:00:27,875 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-28 21:00:27,875 - src.langgraph.workflow - INFO - ======================================================================
2025-10-28 21:00:27,875 - src.langgraph.workflow - INFO - Извлечено фактов: 8
2025-10-28 21:00:27,882 - src.langgraph.workflow - INFO - Создано концепций: 8
2025-10-28 21:00:27,883 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-28 21:00:27,883 - src.langgraph.workflow - INFO -   - Parser: извлечено 8 фактов
2025-10-28 21:00:27,883 - src.langgraph.workflow - INFO -   - Quiz: ОШИБКА - unhashable type: 'ConceptSchema'
2025-10-28 21:00:27,883 - __main__ - ERROR - 
✗ Workflow завершился с ошибкой: unhashable type: 'ConceptSchema'
2025-10-28 21:04:24,333 - __main__ - INFO - ======================================================================
2025-10-28 21:04:24,333 - __main__ - INFO - OBSIDIAN QUIZ PLUGIN - LANGGRAPH WORKFLOW
2025-10-28 21:04:24,333 - __main__ - INFO - ======================================================================
2025-10-28 21:04:24,333 - __main__ - INFO - 
1️⃣  Загрузка конфигурации: config/config.yaml
2025-10-28 21:04:24,349 - __main__ - INFO - 
2️⃣  Загрузка лекции: .\sample_lecture.txt\
2025-10-28 21:04:24,349 - src.utils.helpers - INFO - ✓ Загружена лекция: .\sample_lecture.txt\ (4400 символов)
2025-10-28 21:04:24,349 - __main__ - INFO -    Длина текста: 4400 символов
2025-10-28 21:04:24,349 - __main__ - INFO -    Слов: ~559
2025-10-28 21:04:24,349 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-28 21:04:24,349 - src.langgraph.workflow - INFO - Инициализация LangGraph Workflow...
2025-10-28 21:04:24,349 - src.agents.enhanced_parser_agent - INFO - Инициализация Enhanced Parser Agent...
2025-10-28 21:04:24,411 - src.agents.enhanced_parser_agent - INFO - Enhanced Parser Agent инициализирован
2025-10-28 21:04:24,411 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-28 21:04:24,411 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-28 21:04:24,411 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов, типы: ['multiple_choice', 'true_false', 'short_answer']
2025-10-28 21:04:24,411 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-28 21:04:24,411 - src.langgraph.workflow - INFO - Построение LangGraph графа...
2025-10-28 21:04:24,411 - src.langgraph.workflow - INFO - Граф успешно построен: parser -> quiz_generator -> END
2025-10-28 21:04:24,411 - src.langgraph.workflow - INFO - LangGraph Workflow готов к работе
2025-10-28 21:04:24,411 - __main__ - INFO -    RAG: ✓ Включен
2025-10-28 21:04:24,411 - __main__ - INFO -    Веб-поиск: ✗ Отключен
2025-10-28 21:04:24,411 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-28 21:04:24,411 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-28 21:04:24,411 - src.langgraph.workflow - INFO - 
======================================================================
2025-10-28 21:04:24,411 - src.langgraph.workflow - INFO - ЗАПУСК WORKFLOW
2025-10-28 21:04:24,411 - src.langgraph.workflow - INFO - ======================================================================
2025-10-28 21:04:24,411 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-28 21:04:24,411 - src.agents.enhanced_parser_agent - INFO - Parser Agent: начало обработки
2025-10-28 21:04:24,411 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-28 21:04:24,419 - src.agents.enhanced_parser_agent - INFO - Текст длинный - активация RAG
2025-10-28 21:04:24,419 - src.agents.enhanced_parser_agent - INFO - Создание векторного хранилища...
2025-10-28 21:04:24,419 - src.agents.enhanced_parser_agent - INFO - Создано 6 чанков
2025-10-28 21:04:24,591 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-28 21:04:24,818 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-28 21:04:24,864 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-10-28 21:04:24,882 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-10-28 21:04:24,882 - src.agents.enhanced_parser_agent - INFO - Векторное хранилище создано успешно
2025-10-28 21:04:24,898 - src.agents.enhanced_parser_agent - INFO - Поиск релевантного контекста (k=3)...
2025-10-28 21:04:25,007 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-28 21:04:25,023 - src.agents.enhanced_parser_agent - INFO - Найдено 3 релевантных чанков
2025-10-28 21:04:25,116 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-28 21:04:28,620 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 21:04:28,620 - src.agents.enhanced_parser_agent - INFO - ✓ Извлечено 7 ключевых фактов
2025-10-28 21:04:28,620 - src.agents.enhanced_parser_agent - INFO - ✓ Создано 7 концепций для Quiz Agent
2025-10-28 21:04:28,620 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-28 21:04:28,620 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-28 21:04:28,620 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-28 21:04:28,620 - src.agents.adapted_quiz_agent - INFO - Получено 7 концепций от Parser Agent
2025-10-28 21:04:28,620 - src.agents.quiz_agent - INFO - Начало генерации квиза
2025-10-28 21:04:28,620 - src.agents.quiz_agent - INFO - Обнаружено 7 концепций
2025-10-28 21:04:28,620 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Предел функции формально определяется так: число $
2025-10-28 21:04:28,620 - src.agents.quiz_agent - ERROR - Ошибка вызова GigaChat API: 'GigaChat' object has no attribute 'generate_structured'
2025-10-28 21:04:28,620 - src.agents.quiz_agent - WARNING - Использование fallback генерации
2025-10-28 21:04:28,620 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Предел функции формально определяется так: число $': BaseChatModel.generate() missing 1 required positional argument: 'messages'
2025-10-28 21:04:28,620 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:04:28,620 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Левосторонний предел $\lim_{x \to a^{-}} f(x)$ рас
2025-10-28 21:04:28,620 - src.agents.quiz_agent - ERROR - Ошибка вызова GigaChat API: 'GigaChat' object has no attribute 'generate_structured'
2025-10-28 21:04:28,620 - src.agents.quiz_agent - WARNING - Использование fallback генерации
2025-10-28 21:04:28,620 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Левосторонний предел $\lim_{x \to a^{-}} f(x)$ рас': BaseChatModel.generate() missing 1 required positional argument: 'messages'
2025-10-28 21:04:28,620 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:04:28,620 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Бесконечный предел $\lim_{x \to a} f(x) = \infty$ 
2025-10-28 21:04:28,620 - src.agents.quiz_agent - ERROR - Ошибка вызова GigaChat API: 'GigaChat' object has no attribute 'generate_structured'
2025-10-28 21:04:28,620 - src.agents.quiz_agent - WARNING - Использование fallback генерации
2025-10-28 21:04:28,620 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Бесконечный предел $\lim_{x \to a} f(x) = \infty$ ': BaseChatModel.generate() missing 1 required positional argument: 'messages'
2025-10-28 21:04:28,620 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:04:28,620 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Законы пределов гласят: сумма и разность пределов 
2025-10-28 21:04:28,620 - src.agents.quiz_agent - ERROR - Ошибка вызова GigaChat API: 'GigaChat' object has no attribute 'generate_structured'
2025-10-28 21:04:28,620 - src.agents.quiz_agent - WARNING - Использование fallback генерации
2025-10-28 21:04:28,620 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Законы пределов гласят: сумма и разность пределов ': BaseChatModel.generate() missing 1 required positional argument: 'messages'
2025-10-28 21:04:28,620 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:04:28,620 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Теорема о сжатии утверждает, что если $g(x) \leq f
2025-10-28 21:04:28,620 - src.agents.quiz_agent - ERROR - Ошибка вызова GigaChat API: 'GigaChat' object has no attribute 'generate_structured'
2025-10-28 21:04:28,620 - src.agents.quiz_agent - WARNING - Использование fallback генерации
2025-10-28 21:04:28,620 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Теорема о сжатии утверждает, что если $g(x) \leq f': BaseChatModel.generate() missing 1 required positional argument: 'messages'
2025-10-28 21:04:28,620 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:04:28,620 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Непрерывная функция в точке $a$ имеет предел, совп
2025-10-28 21:04:28,620 - src.agents.quiz_agent - ERROR - Ошибка вызова GigaChat API: 'GigaChat' object has no attribute 'generate_structured'
2025-10-28 21:04:28,620 - src.agents.quiz_agent - WARNING - Использование fallback генерации
2025-10-28 21:04:28,620 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Непрерывная функция в точке $a$ имеет предел, совп': BaseChatModel.generate() missing 1 required positional argument: 'messages'
2025-10-28 21:04:28,633 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:04:28,633 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Типичными приемами вычисления пределов являются ал
2025-10-28 21:04:28,633 - src.agents.quiz_agent - ERROR - Ошибка вызова GigaChat API: 'GigaChat' object has no attribute 'generate_structured'
2025-10-28 21:04:28,633 - src.agents.quiz_agent - WARNING - Использование fallback генерации
2025-10-28 21:04:28,633 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Типичными приемами вычисления пределов являются ал': BaseChatModel.generate() missing 1 required positional argument: 'messages'
2025-10-28 21:04:28,633 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:04:28,633 - src.agents.quiz_agent - WARNING - Сгенерировано мало вопросов: 0 из 7
2025-10-28 21:04:28,633 - src.agents.quiz_agent - INFO - Квиз сгенерирован: 0 вопросов, сложность: {'easy': 0, 'medium': 0, 'hard': 0}, типы: {'multiple_choice': 0, 'true_false': 0, 'short_answer': 0}
2025-10-28 21:04:28,633 - src.agents.adapted_quiz_agent - INFO - ✓ Сгенерировано 0 вопросов
2025-10-28 21:04:28,633 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по сложности: {'easy': 0, 'medium': 0, 'hard': 0}
2025-10-28 21:04:28,633 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по типам: {'multiple_choice': 0, 'true_false': 0, 'short_answer': 0}
2025-10-28 21:04:28,633 - src.langgraph.workflow - INFO - 
======================================================================
2025-10-28 21:04:28,633 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-28 21:04:28,633 - src.langgraph.workflow - INFO - ======================================================================
2025-10-28 21:04:28,633 - src.langgraph.workflow - INFO - Извлечено фактов: 7
2025-10-28 21:04:28,633 - src.langgraph.workflow - INFO - Создано концепций: 7
2025-10-28 21:04:28,633 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-28 21:04:28,633 - src.langgraph.workflow - INFO -   - Parser: извлечено 7 фактов
2025-10-28 21:04:28,633 - src.langgraph.workflow - INFO -   - Quiz: сгенерировано 0 вопросов
2025-10-28 21:04:28,633 - __main__ - INFO - 
5️⃣  Форматирование и сохранение результатов
2025-10-28 21:04:28,633 - src.utils.helpers - INFO - ✓ Результаты сохранены: quiz_result.json
2025-10-28 21:04:28,633 - __main__ - INFO - 
======================================================================
2025-10-28 21:04:28,633 - __main__ - INFO - ✓ ГЕНЕРАЦИЯ ЗАВЕРШЕНА УСПЕШНО
2025-10-28 21:04:28,633 - __main__ - INFO - ======================================================================
2025-10-28 21:04:28,633 - __main__ - INFO - Результаты сохранены в: quiz_result.json
2025-10-28 21:04:28,633 - __main__ - INFO - Логи записаны в: quiz_generation.log
2025-10-28 21:10:22,830 - __main__ - INFO - ======================================================================
2025-10-28 21:10:22,830 - __main__ - INFO - OBSIDIAN QUIZ PLUGIN - LANGGRAPH WORKFLOW
2025-10-28 21:10:22,830 - __main__ - INFO - ======================================================================
2025-10-28 21:10:22,830 - __main__ - INFO - 
1️⃣  Загрузка конфигурации: config/config.yaml
2025-10-28 21:10:22,845 - __main__ - INFO - 
2️⃣  Загрузка лекции: .\sample_lecture.txt\
2025-10-28 21:10:22,845 - src.utils.helpers - INFO - ✓ Загружена лекция: .\sample_lecture.txt\ (4400 символов)
2025-10-28 21:10:22,845 - __main__ - INFO -    Длина текста: 4400 символов
2025-10-28 21:10:22,845 - __main__ - INFO -    Слов: ~559
2025-10-28 21:10:22,845 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-28 21:10:22,845 - src.langgraph.workflow - INFO - Инициализация LangGraph Workflow...
2025-10-28 21:10:22,845 - src.agents.enhanced_parser_agent - INFO - Инициализация Enhanced Parser Agent...
2025-10-28 21:10:22,908 - src.agents.enhanced_parser_agent - INFO - Enhanced Parser Agent инициализирован
2025-10-28 21:10:22,908 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-28 21:10:22,908 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-28 21:10:22,908 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов, типы: ['multiple_choice', 'true_false', 'short_answer']
2025-10-28 21:10:22,908 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-28 21:10:22,908 - src.langgraph.workflow - INFO - Построение LangGraph графа...
2025-10-28 21:10:22,908 - src.langgraph.workflow - INFO - Граф успешно построен: parser -> quiz_generator -> END
2025-10-28 21:10:22,908 - src.langgraph.workflow - INFO - LangGraph Workflow готов к работе
2025-10-28 21:10:22,908 - __main__ - INFO -    RAG: ✓ Включен
2025-10-28 21:10:22,908 - __main__ - INFO -    Веб-поиск: ✗ Отключен
2025-10-28 21:10:22,908 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-28 21:10:22,908 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-28 21:10:22,908 - src.langgraph.workflow - INFO - 
======================================================================
2025-10-28 21:10:22,908 - src.langgraph.workflow - INFO - ЗАПУСК WORKFLOW
2025-10-28 21:10:22,908 - src.langgraph.workflow - INFO - ======================================================================
2025-10-28 21:10:22,908 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-28 21:10:22,908 - src.agents.enhanced_parser_agent - INFO - Parser Agent: начало обработки
2025-10-28 21:10:22,908 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-28 21:10:22,908 - src.agents.enhanced_parser_agent - INFO - Текст длинный - активация RAG
2025-10-28 21:10:22,908 - src.agents.enhanced_parser_agent - INFO - Создание векторного хранилища...
2025-10-28 21:10:22,916 - src.agents.enhanced_parser_agent - INFO - Создано 6 чанков
2025-10-28 21:10:23,128 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-28 21:10:23,331 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-28 21:10:23,393 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-10-28 21:10:23,409 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-10-28 21:10:23,409 - src.agents.enhanced_parser_agent - INFO - Векторное хранилище создано успешно
2025-10-28 21:10:23,409 - src.agents.enhanced_parser_agent - INFO - Поиск релевантного контекста (k=3)...
2025-10-28 21:10:23,535 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-28 21:10:23,550 - src.agents.enhanced_parser_agent - INFO - Найдено 3 релевантных чанков
2025-10-28 21:10:23,800 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-28 21:10:27,663 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 21:10:27,663 - src.agents.enhanced_parser_agent - INFO - ✓ Извлечено 8 ключевых фактов
2025-10-28 21:10:27,663 - src.agents.enhanced_parser_agent - INFO - ✓ Создано 8 концепций для Quiz Agent
2025-10-28 21:10:27,663 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-28 21:10:27,663 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-28 21:10:27,663 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-28 21:10:27,663 - src.agents.adapted_quiz_agent - INFO - Получено 8 концепций от Parser Agent
2025-10-28 21:10:27,663 - src.agents.quiz_agent - INFO - Начало генерации квиза
2025-10-28 21:10:27,663 - src.agents.quiz_agent - INFO - Обнаружено 8 концепций
2025-10-28 21:10:27,663 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Предел функции формально определяется так: число $
2025-10-28 21:10:27,663 - src.agents.quiz_agent - INFO - Отправка запроса в GigaChat для концепции: Предел функции формально определяется так: число $
2025-10-28 21:10:27,663 - src.agents.quiz_agent - ERROR - ✗ Ошибка вызова GigaChat API для 'Предел функции формально определяется так: число $': 'GigaChat' object has no attribute 'generate_structured'
2025-10-28 21:10:27,678 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Предел функции формально определяется так: число $': 'QuizAgent' object has no attribute '_fallback_question_parsing'
2025-10-28 21:10:27,678 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:10:27,678 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Левосторонний предел $\lim_{x \to a^{-}} f(x)$ рас
2025-10-28 21:10:27,678 - src.agents.quiz_agent - INFO - Отправка запроса в GigaChat для концепции: Левосторонний предел $\lim_{x \to a^{-}} f(x)$ рас
2025-10-28 21:10:27,678 - src.agents.quiz_agent - ERROR - ✗ Ошибка вызова GigaChat API для 'Левосторонний предел $\lim_{x \to a^{-}} f(x)$ рас': 'GigaChat' object has no attribute 'generate_structured'
2025-10-28 21:10:27,678 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Левосторонний предел $\lim_{x \to a^{-}} f(x)$ рас': 'QuizAgent' object has no attribute '_fallback_question_parsing'
2025-10-28 21:10:27,678 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:10:27,678 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Бесконечный предел $\lim_{x \to a} f(x) = \infty$ 
2025-10-28 21:10:27,678 - src.agents.quiz_agent - INFO - Отправка запроса в GigaChat для концепции: Бесконечный предел $\lim_{x \to a} f(x) = \infty$ 
2025-10-28 21:10:27,678 - src.agents.quiz_agent - ERROR - ✗ Ошибка вызова GigaChat API для 'Бесконечный предел $\lim_{x \to a} f(x) = \infty$ ': 'GigaChat' object has no attribute 'generate_structured'
2025-10-28 21:10:27,692 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Бесконечный предел $\lim_{x \to a} f(x) = \infty$ ': 'QuizAgent' object has no attribute '_fallback_question_parsing'
2025-10-28 21:10:27,692 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:10:27,692 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Закон пределов утверждает, что сумма, разность, пр
2025-10-28 21:10:27,692 - src.agents.quiz_agent - INFO - Отправка запроса в GigaChat для концепции: Закон пределов утверждает, что сумма, разность, пр
2025-10-28 21:10:27,692 - src.agents.quiz_agent - ERROR - ✗ Ошибка вызова GigaChat API для 'Закон пределов утверждает, что сумма, разность, пр': 'GigaChat' object has no attribute 'generate_structured'
2025-10-28 21:10:27,692 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Закон пределов утверждает, что сумма, разность, пр': 'QuizAgent' object has no attribute '_fallback_question_parsing'
2025-10-28 21:10:27,692 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:10:27,692 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Теорема о сжатии (о двух милиционерах) гласит: есл
2025-10-28 21:10:27,692 - src.agents.quiz_agent - INFO - Отправка запроса в GigaChat для концепции: Теорема о сжатии (о двух милиционерах) гласит: есл
2025-10-28 21:10:27,692 - src.agents.quiz_agent - ERROR - ✗ Ошибка вызова GigaChat API для 'Теорема о сжатии (о двух милиционерах) гласит: есл': 'GigaChat' object has no attribute 'generate_structured'
2025-10-28 21:10:27,692 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Теорема о сжатии (о двух милиционерах) гласит: есл': 'QuizAgent' object has no attribute '_fallback_question_parsing'
2025-10-28 21:10:27,692 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:10:27,692 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Непрерывная функция в точке $a$ характеризуется те
2025-10-28 21:10:27,692 - src.agents.quiz_agent - INFO - Отправка запроса в GigaChat для концепции: Непрерывная функция в точке $a$ характеризуется те
2025-10-28 21:10:27,692 - src.agents.quiz_agent - ERROR - ✗ Ошибка вызова GigaChat API для 'Непрерывная функция в точке $a$ характеризуется те': 'GigaChat' object has no attribute 'generate_structured'
2025-10-28 21:10:27,692 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Непрерывная функция в точке $a$ характеризуется те': 'QuizAgent' object has no attribute '_fallback_question_parsing'
2025-10-28 21:10:27,692 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:10:27,692 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Типы разрывов функции включают устранимые, разрыва
2025-10-28 21:10:27,692 - src.agents.quiz_agent - INFO - Отправка запроса в GigaChat для концепции: Типы разрывов функции включают устранимые, разрыва
2025-10-28 21:10:27,692 - src.agents.quiz_agent - ERROR - ✗ Ошибка вызова GigaChat API для 'Типы разрывов функции включают устранимые, разрыва': 'GigaChat' object has no attribute 'generate_structured'
2025-10-28 21:10:27,692 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Типы разрывов функции включают устранимые, разрыва': 'QuizAgent' object has no attribute '_fallback_question_parsing'
2025-10-28 21:10:27,692 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:10:27,692 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Для вычисления пределов используются алгебраически
2025-10-28 21:10:27,692 - src.agents.quiz_agent - INFO - Отправка запроса в GigaChat для концепции: Для вычисления пределов используются алгебраически
2025-10-28 21:10:27,692 - src.agents.quiz_agent - ERROR - ✗ Ошибка вызова GigaChat API для 'Для вычисления пределов используются алгебраически': 'GigaChat' object has no attribute 'generate_structured'
2025-10-28 21:10:27,698 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Для вычисления пределов используются алгебраически': 'QuizAgent' object has no attribute '_fallback_question_parsing'
2025-10-28 21:10:27,698 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:10:27,698 - src.agents.quiz_agent - ERROR - Не удалось сгенерировать ни одного вопроса!
2025-10-28 21:10:27,698 - src.agents.adapted_quiz_agent - INFO - ✓ Сгенерировано 0 вопросов
2025-10-28 21:10:27,698 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по сложности: {}
2025-10-28 21:10:27,698 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по типам: {}
2025-10-28 21:10:27,698 - src.langgraph.workflow - INFO - 
======================================================================
2025-10-28 21:10:27,698 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-28 21:10:27,698 - src.langgraph.workflow - INFO - ======================================================================
2025-10-28 21:10:27,698 - src.langgraph.workflow - INFO - Извлечено фактов: 8
2025-10-28 21:10:27,698 - src.langgraph.workflow - INFO - Создано концепций: 8
2025-10-28 21:10:27,698 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-28 21:10:27,698 - src.langgraph.workflow - INFO -   - Parser: извлечено 8 фактов
2025-10-28 21:10:27,698 - src.langgraph.workflow - INFO -   - Quiz: сгенерировано 0 вопросов
2025-10-28 21:10:27,698 - __main__ - INFO - 
5️⃣  Форматирование и сохранение результатов
2025-10-28 21:10:27,698 - src.utils.helpers - INFO - ✓ Результаты сохранены: quiz_result.json
2025-10-28 21:10:27,698 - __main__ - INFO - 
======================================================================
2025-10-28 21:10:27,698 - __main__ - INFO - ✓ ГЕНЕРАЦИЯ ЗАВЕРШЕНА УСПЕШНО
2025-10-28 21:10:27,698 - __main__ - INFO - ======================================================================
2025-10-28 21:10:27,698 - __main__ - INFO - Результаты сохранены в: quiz_result.json
2025-10-28 21:10:27,701 - __main__ - INFO - Логи записаны в: quiz_generation.log
2025-10-28 21:10:56,721 - __main__ - INFO - ======================================================================
2025-10-28 21:10:56,721 - __main__ - INFO - OBSIDIAN QUIZ PLUGIN - LANGGRAPH WORKFLOW
2025-10-28 21:10:56,721 - __main__ - INFO - ======================================================================
2025-10-28 21:10:56,721 - __main__ - INFO - 
1️⃣  Загрузка конфигурации: config/config.yaml
2025-10-28 21:10:56,721 - __main__ - INFO - 
2️⃣  Загрузка лекции: .\sample_lecture.txt\
2025-10-28 21:10:56,721 - src.utils.helpers - INFO - ✓ Загружена лекция: .\sample_lecture.txt\ (4400 символов)
2025-10-28 21:10:56,721 - __main__ - INFO -    Длина текста: 4400 символов
2025-10-28 21:10:56,721 - __main__ - INFO -    Слов: ~559
2025-10-28 21:10:56,721 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-28 21:10:56,721 - src.langgraph.workflow - INFO - Инициализация LangGraph Workflow...
2025-10-28 21:10:56,721 - src.agents.enhanced_parser_agent - INFO - Инициализация Enhanced Parser Agent...
2025-10-28 21:10:56,784 - src.agents.enhanced_parser_agent - INFO - Enhanced Parser Agent инициализирован
2025-10-28 21:10:56,784 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-28 21:10:56,784 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-28 21:10:56,784 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов, типы: ['multiple_choice', 'true_false', 'short_answer']
2025-10-28 21:10:56,784 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-28 21:10:56,784 - src.langgraph.workflow - INFO - Построение LangGraph графа...
2025-10-28 21:10:56,784 - src.langgraph.workflow - INFO - Граф успешно построен: parser -> quiz_generator -> END
2025-10-28 21:10:56,784 - src.langgraph.workflow - INFO - LangGraph Workflow готов к работе
2025-10-28 21:10:56,784 - __main__ - INFO -    RAG: ✓ Включен
2025-10-28 21:10:56,784 - __main__ - INFO -    Веб-поиск: ✗ Отключен
2025-10-28 21:10:56,784 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-28 21:10:56,784 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-28 21:10:56,784 - src.langgraph.workflow - INFO - 
======================================================================
2025-10-28 21:10:56,784 - src.langgraph.workflow - INFO - ЗАПУСК WORKFLOW
2025-10-28 21:10:56,784 - src.langgraph.workflow - INFO - ======================================================================
2025-10-28 21:10:56,784 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-28 21:10:56,784 - src.agents.enhanced_parser_agent - INFO - Parser Agent: начало обработки
2025-10-28 21:10:56,784 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-28 21:10:56,795 - src.agents.enhanced_parser_agent - INFO - Текст длинный - активация RAG
2025-10-28 21:10:56,795 - src.agents.enhanced_parser_agent - INFO - Создание векторного хранилища...
2025-10-28 21:10:56,795 - src.agents.enhanced_parser_agent - INFO - Создано 6 чанков
2025-10-28 21:10:56,997 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-28 21:10:57,347 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-28 21:10:57,441 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-10-28 21:10:57,456 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-10-28 21:10:57,456 - src.agents.enhanced_parser_agent - INFO - Векторное хранилище создано успешно
2025-10-28 21:10:57,456 - src.agents.enhanced_parser_agent - INFO - Поиск релевантного контекста (k=3)...
2025-10-28 21:10:57,598 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-28 21:10:57,598 - src.agents.enhanced_parser_agent - INFO - Найдено 3 релевантных чанков
2025-10-28 21:10:57,817 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-28 21:11:02,523 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 21:11:02,523 - src.agents.enhanced_parser_agent - INFO - ✓ Извлечено 6 ключевых фактов
2025-10-28 21:11:02,539 - src.agents.enhanced_parser_agent - INFO - ✓ Создано 6 концепций для Quiz Agent
2025-10-28 21:11:02,539 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-28 21:11:02,539 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-28 21:11:02,539 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-28 21:11:02,540 - src.agents.adapted_quiz_agent - INFO - Получено 6 концепций от Parser Agent
2025-10-28 21:11:02,540 - src.agents.quiz_agent - INFO - Начало генерации квиза
2025-10-28 21:11:02,540 - src.agents.quiz_agent - INFO - Обнаружено 6 концепций
2025-10-28 21:11:02,540 - src.agents.quiz_agent - INFO - Генерация 2 вопросов для концепции: Предел функции формально определяется так: число $
2025-10-28 21:11:02,541 - src.agents.quiz_agent - ERROR - Ошибка вызова GigaChat API: 'GigaChat' object has no attribute 'generate_structured'
2025-10-28 21:11:02,541 - src.agents.quiz_agent - WARNING - Использование fallback генерации
2025-10-28 21:11:02,541 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Предел функции формально определяется так: число $': BaseChatModel.generate() missing 1 required positional argument: 'messages'
2025-10-28 21:11:02,541 - src.agents.quiz_agent - ERROR - Ошибка вызова GigaChat API: 'GigaChat' object has no attribute 'generate_structured'
2025-10-28 21:11:02,541 - src.agents.quiz_agent - WARNING - Использование fallback генерации
2025-10-28 21:11:02,541 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 2 для 'Предел функции формально определяется так: число $': BaseChatModel.generate() missing 1 required positional argument: 'messages'
2025-10-28 21:11:02,541 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:11:02,541 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Левосторонний предел $\lim_{x \to a^{-}} f(x)$ рас
2025-10-28 21:11:02,542 - src.agents.quiz_agent - ERROR - Ошибка вызова GigaChat API: 'GigaChat' object has no attribute 'generate_structured'
2025-10-28 21:11:02,542 - src.agents.quiz_agent - WARNING - Использование fallback генерации
2025-10-28 21:11:02,542 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Левосторонний предел $\lim_{x \to a^{-}} f(x)$ рас': BaseChatModel.generate() missing 1 required positional argument: 'messages'
2025-10-28 21:11:02,542 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:11:02,542 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Бесконечный предел $\lim_{x \to a} f(x) = \infty$ 
2025-10-28 21:11:02,542 - src.agents.quiz_agent - ERROR - Ошибка вызова GigaChat API: 'GigaChat' object has no attribute 'generate_structured'
2025-10-28 21:11:02,542 - src.agents.quiz_agent - WARNING - Использование fallback генерации
2025-10-28 21:11:02,542 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Бесконечный предел $\lim_{x \to a} f(x) = \infty$ ': BaseChatModel.generate() missing 1 required positional argument: 'messages'
2025-10-28 21:11:02,542 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:11:02,543 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Законы пределов гласят: если $\lim_{x \to a} f(x) 
2025-10-28 21:11:02,543 - src.agents.quiz_agent - ERROR - Ошибка вызова GigaChat API: 'GigaChat' object has no attribute 'generate_structured'
2025-10-28 21:11:02,543 - src.agents.quiz_agent - WARNING - Использование fallback генерации
2025-10-28 21:11:02,543 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Законы пределов гласят: если $\lim_{x \to a} f(x) ': BaseChatModel.generate() missing 1 required positional argument: 'messages'
2025-10-28 21:11:02,543 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:11:02,543 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Теорема о сжатии утверждает, что если $g(x) \leq f
2025-10-28 21:11:02,543 - src.agents.quiz_agent - ERROR - Ошибка вызова GigaChat API: 'GigaChat' object has no attribute 'generate_structured'
2025-10-28 21:11:02,543 - src.agents.quiz_agent - WARNING - Использование fallback генерации
2025-10-28 21:11:02,543 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Теорема о сжатии утверждает, что если $g(x) \leq f': BaseChatModel.generate() missing 1 required positional argument: 'messages'
2025-10-28 21:11:02,543 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:11:02,543 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Непрерывная функция в точке $a$ характеризуется те
2025-10-28 21:11:02,543 - src.agents.quiz_agent - ERROR - Ошибка вызова GigaChat API: 'GigaChat' object has no attribute 'generate_structured'
2025-10-28 21:11:02,544 - src.agents.quiz_agent - WARNING - Использование fallback генерации
2025-10-28 21:11:02,544 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Непрерывная функция в точке $a$ характеризуется те': BaseChatModel.generate() missing 1 required positional argument: 'messages'
2025-10-28 21:11:02,544 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:11:02,544 - src.agents.quiz_agent - ERROR - Не удалось сгенерировать ни одного вопроса!
2025-10-28 21:11:02,544 - src.agents.adapted_quiz_agent - INFO - ✓ Сгенерировано 0 вопросов
2025-10-28 21:11:02,544 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по сложности: {}
2025-10-28 21:11:02,544 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по типам: {}
2025-10-28 21:11:02,544 - src.langgraph.workflow - INFO - 
======================================================================
2025-10-28 21:11:02,545 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-28 21:11:02,545 - src.langgraph.workflow - INFO - ======================================================================
2025-10-28 21:11:02,545 - src.langgraph.workflow - INFO - Извлечено фактов: 6
2025-10-28 21:11:02,545 - src.langgraph.workflow - INFO - Создано концепций: 6
2025-10-28 21:11:02,545 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-28 21:11:02,545 - src.langgraph.workflow - INFO -   - Parser: извлечено 6 фактов
2025-10-28 21:11:02,545 - src.langgraph.workflow - INFO -   - Quiz: сгенерировано 0 вопросов
2025-10-28 21:11:02,545 - __main__ - INFO - 
5️⃣  Форматирование и сохранение результатов
2025-10-28 21:11:02,546 - src.utils.helpers - INFO - ✓ Результаты сохранены: quiz_result.json
2025-10-28 21:11:02,546 - __main__ - INFO - 
======================================================================
2025-10-28 21:11:02,546 - __main__ - INFO - ✓ ГЕНЕРАЦИЯ ЗАВЕРШЕНА УСПЕШНО
2025-10-28 21:11:02,546 - __main__ - INFO - ======================================================================
2025-10-28 21:11:02,546 - __main__ - INFO - Результаты сохранены в: quiz_result.json
2025-10-28 21:11:02,547 - __main__ - INFO - Логи записаны в: quiz_generation.log
2025-10-28 21:15:17,999 - __main__ - INFO - ======================================================================
2025-10-28 21:15:17,999 - __main__ - INFO - OBSIDIAN QUIZ PLUGIN - LANGGRAPH WORKFLOW
2025-10-28 21:15:17,999 - __main__ - INFO - ======================================================================
2025-10-28 21:15:17,999 - __main__ - INFO - 
1️⃣  Загрузка конфигурации: config/config.yaml
2025-10-28 21:15:17,999 - __main__ - INFO - 
2️⃣  Загрузка лекции: .\sample_lecture.txt\
2025-10-28 21:15:18,003 - src.utils.helpers - INFO - ✓ Загружена лекция: .\sample_lecture.txt\ (4400 символов)
2025-10-28 21:15:18,003 - __main__ - INFO -    Длина текста: 4400 символов
2025-10-28 21:15:18,003 - __main__ - INFO -    Слов: ~559
2025-10-28 21:15:18,003 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-28 21:15:18,003 - src.langgraph.workflow - INFO - Инициализация LangGraph Workflow...
2025-10-28 21:15:18,003 - src.agents.enhanced_parser_agent - INFO - Инициализация Enhanced Parser Agent...
2025-10-28 21:15:18,059 - src.agents.enhanced_parser_agent - INFO - Enhanced Parser Agent инициализирован
2025-10-28 21:15:18,059 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-28 21:15:18,059 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-28 21:15:18,059 - src.utils.gigachat_client - INFO - GigaChatClient инициализирован (model=GigaChat)
2025-10-28 21:15:18,059 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов, типы: ['multiple_choice', 'true_false', 'short_answer']
2025-10-28 21:15:18,059 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-28 21:15:18,059 - src.langgraph.workflow - INFO - Построение LangGraph графа...
2025-10-28 21:15:18,059 - src.langgraph.workflow - INFO - Граф успешно построен: parser -> quiz_generator -> END
2025-10-28 21:15:18,059 - src.langgraph.workflow - INFO - LangGraph Workflow готов к работе
2025-10-28 21:15:18,059 - __main__ - INFO -    RAG: ✓ Включен
2025-10-28 21:15:18,059 - __main__ - INFO -    Веб-поиск: ✗ Отключен
2025-10-28 21:15:18,059 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-28 21:15:18,059 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-28 21:15:18,059 - src.langgraph.workflow - INFO - 
======================================================================
2025-10-28 21:15:18,075 - src.langgraph.workflow - INFO - ЗАПУСК WORKFLOW
2025-10-28 21:15:18,075 - src.langgraph.workflow - INFO - ======================================================================
2025-10-28 21:15:18,075 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-28 21:15:18,075 - src.agents.enhanced_parser_agent - INFO - Parser Agent: начало обработки
2025-10-28 21:15:18,075 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-28 21:15:18,075 - src.agents.enhanced_parser_agent - INFO - Текст длинный - активация RAG
2025-10-28 21:15:18,075 - src.agents.enhanced_parser_agent - INFO - Создание векторного хранилища...
2025-10-28 21:15:18,075 - src.agents.enhanced_parser_agent - INFO - Создано 6 чанков
2025-10-28 21:15:18,278 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-28 21:15:18,512 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-28 21:15:18,565 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-10-28 21:15:18,576 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-10-28 21:15:18,576 - src.agents.enhanced_parser_agent - INFO - Векторное хранилище создано успешно
2025-10-28 21:15:18,576 - src.agents.enhanced_parser_agent - INFO - Поиск релевантного контекста (k=3)...
2025-10-28 21:15:18,701 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-28 21:15:18,701 - src.agents.enhanced_parser_agent - INFO - Найдено 3 релевантных чанков
2025-10-28 21:15:18,826 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-28 21:15:23,173 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 21:15:23,173 - src.agents.enhanced_parser_agent - INFO - ✓ Извлечено 7 ключевых фактов
2025-10-28 21:15:23,173 - src.agents.enhanced_parser_agent - INFO - ✓ Создано 7 концепций для Quiz Agent
2025-10-28 21:15:23,173 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-28 21:15:23,173 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-28 21:15:23,173 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-28 21:15:23,173 - src.agents.adapted_quiz_agent - INFO - Получено 7 концепций от Parser Agent
2025-10-28 21:15:23,173 - src.agents.quiz_agent - INFO - Начало генерации квиза
2025-10-28 21:15:23,173 - src.agents.quiz_agent - INFO - Обнаружено 7 концепций
2025-10-28 21:15:23,173 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Предел функции $\lim_{x \to a} f(x)$ формально опр
2025-10-28 21:15:23,329 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-28 21:15:25,502 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 21:15:25,502 - src.utils.gigachat_client - ERROR - Ошибка structured generation: 1 validation error for Question
__root__
  Invalid \escape: line 6 column 46 (char 304) [type=value_error.jsondecode, input_value='{\n    "question_text": ...ifficulty": "medium"\n}', input_type=str]
2025-10-28 21:15:25,502 - src.utils.gigachat_client - ERROR - Ответ LLM: {
    "question_text": "Какой формальный критерий используется для определения предела функции $f(x)$ в точке $a$?",
    "question_type": "multiple_choice",
    "options": [
        "A) Существует конечный предел функции при $x$ стремящемся к бесконечности",
        "B) Для любого положительного числа $\varepsilon$ существует $\delta > 0$, такое что $|f(x)-L|<\varepsilon$ при $0<|x-a|<\delta$",
        "C) Функция $f(x)$ непрерывна в точке $a$",
        "D) Функция $f(x)$ имеет производную в точ
2025-10-28 21:15:25,502 - src.agents.quiz_agent - ERROR - ✗ Ошибка вызова GigaChat API для 'Предел функции $\lim_{x \to a} f(x)$ формально опр': 1 validation error for Question
__root__
  Invalid \escape: line 6 column 46 (char 304) [type=value_error.jsondecode, input_value='{\n    "question_text": ...ifficulty": "medium"\n}', input_type=str]
2025-10-28 21:15:25,533 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Предел функции $\lim_{x \to a} f(x)$ формально опр': 1 validation error for Question
__root__
  Invalid \escape: line 6 column 46 (char 304) [type=value_error.jsondecode, input_value='{\n    "question_text": ...ifficulty": "medium"\n}', input_type=str]
2025-10-28 21:15:25,533 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:15:25,533 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Левосторонний предел $\lim_{x \to a^{-}} f(x)$ рас
2025-10-28 21:15:26,675 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 21:15:26,675 - src.utils.gigachat_client - ERROR - Ошибка structured generation: 1 validation error for Question
__root__
  Invalid \escape: line 11 column 44 (char 408) [type=value_error.jsondecode, input_value='{\n    "question_text": ..."difficulty": "easy"\n}', input_type=str]
2025-10-28 21:15:26,676 - src.utils.gigachat_client - ERROR - Ответ LLM: {
    "question_text": "Какой предел рассматривается при приближении аргумента функции слева к заданной точке?",
    "question_type": "multiple_choice",
    "options": [
        "A) Правосторонний предел",
        "B) Левосторонний предел",
        "C) Односторонний предел",
        "D) Двусторонний предел"
    ],
    "correct_answer": "B) Левосторонний предел",
    "explanation": "Левосторонний предел ($\lim_{x\to a^{-}}$) означает приближение аргумента функции к точке $a$ слева, то есть через 
2025-10-28 21:15:26,676 - src.agents.quiz_agent - ERROR - ✗ Ошибка вызова GigaChat API для 'Левосторонний предел $\lim_{x \to a^{-}} f(x)$ рас': 1 validation error for Question
__root__
  Invalid \escape: line 11 column 44 (char 408) [type=value_error.jsondecode, input_value='{\n    "question_text": ..."difficulty": "easy"\n}', input_type=str]
2025-10-28 21:15:26,678 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Левосторонний предел $\lim_{x \to a^{-}} f(x)$ рас': 1 validation error for Question
__root__
  Invalid \escape: line 11 column 44 (char 408) [type=value_error.jsondecode, input_value='{\n    "question_text": ..."difficulty": "easy"\n}', input_type=str]
2025-10-28 21:15:26,678 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:15:26,678 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Бесконечный предел $\lim_{x \to a} f(x) = \infty$ 
2025-10-28 21:15:28,616 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 21:15:28,616 - src.utils.gigachat_client - ERROR - Ошибка structured generation: 1 validation error for Question
__root__
  Invalid \escape: line 2 column 57 (char 58) [type=value_error.jsondecode, input_value='{\n    "question_text": ...ifficulty": "medium"\n}', input_type=str]
2025-10-28 21:15:28,616 - src.utils.gigachat_client - ERROR - Ответ LLM: {
    "question_text": "Что означает бесконечный предел $ \lim_{x \to a} f(x) = \infty $?",
    "question_type": "multiple_choice",
    "options": [
        "A) Значения функции $ f(x) $ стремятся к нулю при приближении $ x $ к $ a $",
        "B) Значения функции $ f(x) $ становятся произвольно большими по абсолютному значению при приближении $ x $ к $ a $",
        "C) Функция $ f(x) $ имеет разрыв первого рода в точке $ a $",
        "D) Функция $ f(x) $ определена во всех точках вблизи точки
2025-10-28 21:15:28,616 - src.agents.quiz_agent - ERROR - ✗ Ошибка вызова GigaChat API для 'Бесконечный предел $\lim_{x \to a} f(x) = \infty$ ': 1 validation error for Question
__root__
  Invalid \escape: line 2 column 57 (char 58) [type=value_error.jsondecode, input_value='{\n    "question_text": ...ifficulty": "medium"\n}', input_type=str]
2025-10-28 21:15:28,632 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Бесконечный предел $\lim_{x \to a} f(x) = \infty$ ': 1 validation error for Question
__root__
  Invalid \escape: line 2 column 57 (char 58) [type=value_error.jsondecode, input_value='{\n    "question_text": ...ifficulty": "medium"\n}', input_type=str]
2025-10-28 21:15:28,632 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:15:28,632 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Законы пределов гласят: сумма $\lim_{x \to a} (f +
2025-10-28 21:15:29,727 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 21:15:29,728 - src.agents.quiz_agent - INFO - ✓ Вопрос успешно сгенерирован для 'Законы пределов гласят: сумма $\lim_{x \to a} (f +'
2025-10-28 21:15:29,728 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-28 21:15:29,729 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Теорема о сжатии утверждает, что если $g(x) \leq f
2025-10-28 21:15:31,634 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 21:15:31,634 - src.utils.gigachat_client - ERROR - Ошибка structured generation: 1 validation error for Question
__root__
  Invalid \escape: line 2 column 61 (char 62) [type=value_error.jsondecode, input_value='{\n    "question_text": ...ifficulty": "medium"\n}', input_type=str]
2025-10-28 21:15:31,634 - src.utils.gigachat_client - ERROR - Ответ LLM: {
    "question_text": "Согласно теореме о сжатии, если $g(x) \leq f(x) \leq h(x)$ в окрестности точки $a$ (кроме самой точки), и $\lim_{x\to a}g(x)=\lim_{x\to a}h(x)=L$, тогда какой предел существует?"
    ,
    "question_type": "multiple_choice",
    "options": [
        "A) $\lim_{x\to a}f(x)=L$",
        "B) $\lim_{x\to a}f(x)=0$",
        "C) $\lim_{x\to a}f(x)=1$",
        "D) $\lim_{x\to a}f(x)=L+1$"
    ]
    ,
    "correct_answer": "A) $\lim_{x\to a}f(x)=L$",
    "explanation": "По теор
2025-10-28 21:15:31,634 - src.agents.quiz_agent - ERROR - ✗ Ошибка вызова GigaChat API для 'Теорема о сжатии утверждает, что если $g(x) \leq f': 1 validation error for Question
__root__
  Invalid \escape: line 2 column 61 (char 62) [type=value_error.jsondecode, input_value='{\n    "question_text": ...ifficulty": "medium"\n}', input_type=str]
2025-10-28 21:15:31,634 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Теорема о сжатии утверждает, что если $g(x) \leq f': 1 validation error for Question
__root__
  Invalid \escape: line 2 column 61 (char 62) [type=value_error.jsondecode, input_value='{\n    "question_text": ...ifficulty": "medium"\n}', input_type=str]
2025-10-28 21:15:31,641 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:15:31,641 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Функция называется непрерывной в точке $a$, если $
2025-10-28 21:15:33,558 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 21:15:33,558 - src.utils.gigachat_client - ERROR - Ошибка structured generation: 1 validation error for Question
__root__
  Invalid \escape: line 2 column 117 (char 118) [type=value_error.jsondecode, input_value='{\n    "question_text": ...ifficulty": "medium"\n}', input_type=str]
2025-10-28 21:15:33,558 - src.utils.gigachat_client - ERROR - Ответ LLM: {
    "question_text": "Функция $f(x)$ называется непрерывной в точке $a$, если верно следующее утверждение: <br> A) $\lim_{x\to a}f(x)=f(a+1)$ <br> B) $\lim_{x\to a}f(x)\neq f(a)$ <br> C) $\lim_{x\to a}f(x)=f(a)$ <br> D) $\lim_{x\to a+1}f(x)=f(a)$",
    "question_type": "multiple_choice",
    "options": [
        "C) $\lim_{x\to a}f(x)=f(a)$",
        "A) $\lim_{x\to a}f(x)=f(a+1)$",
        "B) $\lim_{x\to a}f(x)\neq f(a)$",
        "D) $\lim_{x\to a+1}f(x)=f(a)$"
    ],
    "correct_answer": 
2025-10-28 21:15:33,558 - src.agents.quiz_agent - ERROR - ✗ Ошибка вызова GigaChat API для 'Функция называется непрерывной в точке $a$, если $': 1 validation error for Question
__root__
  Invalid \escape: line 2 column 117 (char 118) [type=value_error.jsondecode, input_value='{\n    "question_text": ...ifficulty": "medium"\n}', input_type=str]
2025-10-28 21:15:33,574 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Функция называется непрерывной в точке $a$, если $': 1 validation error for Question
__root__
  Invalid \escape: line 2 column 117 (char 118) [type=value_error.jsondecode, input_value='{\n    "question_text": ...ifficulty": "medium"\n}', input_type=str]
2025-10-28 21:15:33,574 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:15:33,574 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Типы разрывов функции включают устранимые разрывы,
2025-10-28 21:15:35,308 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 21:15:35,309 - src.agents.quiz_agent - INFO - ✓ Вопрос успешно сгенерирован для 'Типы разрывов функции включают устранимые разрывы,'
2025-10-28 21:15:35,309 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-28 21:15:35,309 - src.agents.quiz_agent - WARNING - Сгенерировано мало вопросов: 2 из 7
2025-10-28 21:15:35,310 - src.agents.quiz_agent - INFO - Квиз сгенерирован: 2 вопросов, сложность: {'easy': 1, 'medium': 1, 'hard': 0}, типы: {'multiple_choice': 2, 'true_false': 0, 'short_answer': 0}
2025-10-28 21:15:35,310 - src.agents.adapted_quiz_agent - INFO - ✓ Сгенерировано 2 вопросов
2025-10-28 21:15:35,310 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по сложности: {'easy': 1, 'medium': 1, 'hard': 0}
2025-10-28 21:15:35,310 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по типам: {'multiple_choice': 2, 'true_false': 0, 'short_answer': 0}
2025-10-28 21:15:35,311 - src.langgraph.workflow - INFO - 
======================================================================
2025-10-28 21:15:35,311 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-28 21:15:35,311 - src.langgraph.workflow - INFO - ======================================================================
2025-10-28 21:15:35,311 - src.langgraph.workflow - INFO - Извлечено фактов: 7
2025-10-28 21:15:35,311 - src.langgraph.workflow - INFO - Создано концепций: 7
2025-10-28 21:15:35,311 - src.langgraph.workflow - INFO - Сгенерировано вопросов: 2
2025-10-28 21:15:35,311 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-28 21:15:35,311 - src.langgraph.workflow - INFO -   - Parser: извлечено 7 фактов
2025-10-28 21:15:35,311 - src.langgraph.workflow - INFO -   - Quiz: сгенерировано 2 вопросов
2025-10-28 21:15:35,312 - __main__ - INFO - 
5️⃣  Форматирование и сохранение результатов
2025-10-28 21:15:35,312 - src.utils.helpers - INFO - ✓ Результаты сохранены: quiz_result.json
2025-10-28 21:15:35,313 - __main__ - INFO - 
======================================================================
2025-10-28 21:15:35,314 - __main__ - INFO - ✓ ГЕНЕРАЦИЯ ЗАВЕРШЕНА УСПЕШНО
2025-10-28 21:15:35,314 - __main__ - INFO - ======================================================================
2025-10-28 21:15:35,314 - __main__ - INFO - Результаты сохранены в: quiz_result.json
2025-10-28 21:15:35,314 - __main__ - INFO - Логи записаны в: quiz_generation.log
2025-10-28 21:16:38,959 - __main__ - INFO - ======================================================================
2025-10-28 21:16:38,959 - __main__ - INFO - OBSIDIAN QUIZ PLUGIN - LANGGRAPH WORKFLOW
2025-10-28 21:16:38,959 - __main__ - INFO - ======================================================================
2025-10-28 21:16:38,959 - __main__ - INFO - 
1️⃣  Загрузка конфигурации: config/config.yaml
2025-10-28 21:16:38,959 - __main__ - INFO - 
2️⃣  Загрузка лекции: .\sample_lecture.txt\
2025-10-28 21:16:38,959 - src.utils.helpers - INFO - ✓ Загружена лекция: .\sample_lecture.txt\ (4400 символов)
2025-10-28 21:16:38,959 - __main__ - INFO -    Длина текста: 4400 символов
2025-10-28 21:16:38,959 - __main__ - INFO -    Слов: ~559
2025-10-28 21:16:38,959 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-28 21:16:38,959 - src.langgraph.workflow - INFO - Инициализация LangGraph Workflow...
2025-10-28 21:16:38,959 - src.agents.enhanced_parser_agent - INFO - Инициализация Enhanced Parser Agent...
2025-10-28 21:16:39,023 - src.agents.enhanced_parser_agent - INFO - Enhanced Parser Agent инициализирован
2025-10-28 21:16:39,023 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-28 21:16:39,023 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-28 21:16:39,023 - src.utils.gigachat_client - INFO - GigaChatClient инициализирован (model=GigaChat)
2025-10-28 21:16:39,023 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов, типы: ['multiple_choice', 'true_false', 'short_answer']
2025-10-28 21:16:39,034 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-28 21:16:39,034 - src.langgraph.workflow - INFO - Построение LangGraph графа...
2025-10-28 21:16:39,034 - src.langgraph.workflow - INFO - Граф успешно построен: parser -> quiz_generator -> END
2025-10-28 21:16:39,034 - src.langgraph.workflow - INFO - LangGraph Workflow готов к работе
2025-10-28 21:16:39,034 - __main__ - INFO -    RAG: ✓ Включен
2025-10-28 21:16:39,034 - __main__ - INFO -    Веб-поиск: ✗ Отключен
2025-10-28 21:16:39,034 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-28 21:16:39,034 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-28 21:16:39,034 - src.langgraph.workflow - INFO - 
======================================================================
2025-10-28 21:16:39,034 - src.langgraph.workflow - INFO - ЗАПУСК WORKFLOW
2025-10-28 21:16:39,034 - src.langgraph.workflow - INFO - ======================================================================
2025-10-28 21:16:39,034 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-28 21:16:39,034 - src.agents.enhanced_parser_agent - INFO - Parser Agent: начало обработки
2025-10-28 21:16:39,034 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-28 21:16:39,034 - src.agents.enhanced_parser_agent - INFO - Текст длинный - активация RAG
2025-10-28 21:16:39,034 - src.agents.enhanced_parser_agent - INFO - Создание векторного хранилища...
2025-10-28 21:16:39,034 - src.agents.enhanced_parser_agent - INFO - Создано 6 чанков
2025-10-28 21:16:39,237 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-28 21:16:39,536 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-28 21:16:39,585 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-10-28 21:16:39,601 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-10-28 21:16:39,601 - src.agents.enhanced_parser_agent - INFO - Векторное хранилище создано успешно
2025-10-28 21:16:39,601 - src.agents.enhanced_parser_agent - INFO - Поиск релевантного контекста (k=3)...
2025-10-28 21:16:39,742 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-28 21:16:39,742 - src.agents.enhanced_parser_agent - INFO - Найдено 3 релевантных чанков
2025-10-28 21:16:39,851 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-28 21:16:43,290 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 21:16:43,290 - src.agents.enhanced_parser_agent - INFO - ✓ Извлечено 7 ключевых фактов
2025-10-28 21:16:43,290 - src.agents.enhanced_parser_agent - INFO - ✓ Создано 7 концепций для Quiz Agent
2025-10-28 21:16:43,290 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-28 21:16:43,290 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-28 21:16:43,290 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-28 21:16:43,290 - src.agents.adapted_quiz_agent - INFO - Получено 7 концепций от Parser Agent
2025-10-28 21:16:43,290 - src.agents.quiz_agent - INFO - Начало генерации квиза
2025-10-28 21:16:43,290 - src.agents.quiz_agent - INFO - Обнаружено 7 концепций
2025-10-28 21:16:43,290 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Предел функции формально определяется так: число $
2025-10-28 21:16:43,426 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-28 21:16:45,713 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 21:16:45,713 - src.utils.gigachat_client - ERROR - Ошибка structured generation: 1 validation error for Question
__root__
  Invalid \escape: line 6 column 46 (char 297) [type=value_error.jsondecode, input_value='{\n    "question_text": ...ifficulty": "medium"\n}', input_type=str]
2025-10-28 21:16:45,713 - src.utils.gigachat_client - ERROR - Ответ LLM: {
    "question_text": "Какой формальной характеристикой обладает число $L$, являющееся пределом функции $f(x)$ при $x$ стремящемся к $a$?",
    "question_type": "multiple_choice",
    "options": [
        "A) Существует единственное значение $f(a)$",
        "B) Для любого положительного числа $\varepsilon$ существует положительное число $\delta$ такое, что $|f(x)-L|<\varepsilon$ при $0<|x-a|<\delta$",
        "C) Функция $f(x)$ непрерывна в точке $a$",
        "D) Функция $f(x)$ дифференцируем
2025-10-28 21:16:45,713 - src.agents.quiz_agent - ERROR - ✗ Ошибка вызова GigaChat API для 'Предел функции формально определяется так: число $': 1 validation error for Question
__root__
  Invalid \escape: line 6 column 46 (char 297) [type=value_error.jsondecode, input_value='{\n    "question_text": ...ifficulty": "medium"\n}', input_type=str]
2025-10-28 21:16:45,719 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Предел функции формально определяется так: число $': 1 validation error for Question
__root__
  Invalid \escape: line 6 column 46 (char 297) [type=value_error.jsondecode, input_value='{\n    "question_text": ...ifficulty": "medium"\n}', input_type=str]
2025-10-28 21:16:45,719 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:16:45,719 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Левосторонний предел $\lim_{x \to a^{-}} f(x)$ рас
2025-10-28 21:16:47,261 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 21:16:47,261 - src.utils.gigachat_client - ERROR - Ошибка structured generation: 1 validation error for Question
__root__
  Invalid \escape: line 5 column 11 (char 176) [type=value_error.jsondecode, input_value='{\n    "question_text": ..."difficulty": "easy"\n}', input_type=str]
2025-10-28 21:16:47,261 - src.utils.gigachat_client - ERROR - Ответ LLM: {
    "question_text": "Какой предел рассматривается, когда переменная $x$ стремится к значению $a$ слева?",
    "question_type": "multiple_choice",
    "options": [
        "$\lim_{x\to a^+}f(x)$",
        "$\lim_{x\to a^-}f(x)$",
        "$\lim_{x\to\infty}f(x)$",
        "Предел функции не зависит от направления приближения"
    ],
    "correct_answer": "$\lim_{x\to a^-}f(x)$",
    "explanation": "Левосторонний предел $\lim_{x\to a^-}f(x)$ означает, что значение функции $f(x)$ рассматривается
2025-10-28 21:16:47,261 - src.agents.quiz_agent - ERROR - ✗ Ошибка вызова GigaChat API для 'Левосторонний предел $\lim_{x \to a^{-}} f(x)$ рас': 1 validation error for Question
__root__
  Invalid \escape: line 5 column 11 (char 176) [type=value_error.jsondecode, input_value='{\n    "question_text": ..."difficulty": "easy"\n}', input_type=str]
2025-10-28 21:16:47,261 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Левосторонний предел $\lim_{x \to a^{-}} f(x)$ рас': 1 validation error for Question
__root__
  Invalid \escape: line 5 column 11 (char 176) [type=value_error.jsondecode, input_value='{\n    "question_text": ..."difficulty": "easy"\n}', input_type=str]
2025-10-28 21:16:47,261 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:16:47,261 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Бесконечный предел $\lim_{x \to a} f(x) = \infty$ 
2025-10-28 21:16:48,762 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 21:16:48,762 - src.utils.gigachat_client - ERROR - Ошибка structured generation: 1 validation error for Question
__root__
  Invalid \escape: line 2 column 56 (char 57) [type=value_error.jsondecode, input_value='{\n    "question_text": ..."difficulty": "easy"\n}', input_type=str]
2025-10-28 21:16:48,763 - src.utils.gigachat_client - ERROR - Ответ LLM: {
    "question_text": "Что означает бесконечный предел $\lim_{x \to a} f(x) = \infty$?",
    "question_type": "multiple_choice",
    "options": [
        "A) Функция стремится к конечному числу при приближении x к a",
        "B) Значения функции становятся сколь угодно большими по абсолютному значению при приближении x к a",
        "C) Функция периодически колеблется вблизи числа a",
        "D) Функция имеет разрыв в точке a"
    ],
    "correct_answer": "B) Значения функции становятся сколь
2025-10-28 21:16:48,763 - src.agents.quiz_agent - ERROR - ✗ Ошибка вызова GigaChat API для 'Бесконечный предел $\lim_{x \to a} f(x) = \infty$ ': 1 validation error for Question
__root__
  Invalid \escape: line 2 column 56 (char 57) [type=value_error.jsondecode, input_value='{\n    "question_text": ..."difficulty": "easy"\n}', input_type=str]
2025-10-28 21:16:48,765 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Бесконечный предел $\lim_{x \to a} f(x) = \infty$ ': 1 validation error for Question
__root__
  Invalid \escape: line 2 column 56 (char 57) [type=value_error.jsondecode, input_value='{\n    "question_text": ..."difficulty": "easy"\n}', input_type=str]
2025-10-28 21:16:48,765 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:16:48,765 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Закон пределов утверждает, что сумма, разность, пр
2025-10-28 21:16:50,173 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 21:16:50,174 - src.agents.quiz_agent - INFO - ✓ Вопрос успешно сгенерирован для 'Закон пределов утверждает, что сумма, разность, пр'
2025-10-28 21:16:50,174 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-28 21:16:50,174 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Теорема о сжатии (о двух милиционерах) гласит: есл
2025-10-28 21:16:52,273 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 21:16:52,273 - src.utils.gigachat_client - ERROR - Ошибка structured generation: 1 validation error for Question
__root__
  Invalid \escape: line 2 column 83 (char 84) [type=value_error.jsondecode, input_value='{\n    "question_text": ...ifficulty": "medium"\n}', input_type=str]
2025-10-28 21:16:52,273 - src.utils.gigachat_client - ERROR - Ответ LLM: {
    "question_text": "Согласно теореме о сжатии (о двух милиционерах), если $g(x) \leq f(x) \leq h(x)$ в окрестности точки $a$ (кроме самой точки), и $\lim_{x\to a}g(x)=\lim_{x\to a}h(x)=L$, какое утверждение верно относительно $\lim_{x\to a}f(x)$?",
    "question_type": "multiple_choice",
    "options": [
        "A) $\lim_{x\to a}f(x) = L$",
        "B) $\lim_{x\to a}f(x) < L$",
        "C) $\lim_{x\to a}f(x) > L$",
        "D) $\lim_{x\to a}f(x) = 0$"
    ],
    "correct_answer": "A) $\lim_
2025-10-28 21:16:52,273 - src.agents.quiz_agent - ERROR - ✗ Ошибка вызова GigaChat API для 'Теорема о сжатии (о двух милиционерах) гласит: есл': 1 validation error for Question
__root__
  Invalid \escape: line 2 column 83 (char 84) [type=value_error.jsondecode, input_value='{\n    "question_text": ...ifficulty": "medium"\n}', input_type=str]
2025-10-28 21:16:52,279 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Теорема о сжатии (о двух милиционерах) гласит: есл': 1 validation error for Question
__root__
  Invalid \escape: line 2 column 83 (char 84) [type=value_error.jsondecode, input_value='{\n    "question_text": ...ifficulty": "medium"\n}', input_type=str]
2025-10-28 21:16:52,280 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:16:52,280 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Непрерывная функция в точке $a$ имеет предел, равн
2025-10-28 21:16:53,492 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 21:16:53,492 - src.utils.gigachat_client - ERROR - Ошибка structured generation: 1 validation error for Question
__root__
  Invalid \escape: line 5 column 11 (char 141) [type=value_error.jsondecode, input_value='{\n    "question_text": ...ifficulty": "medium"\n}', input_type=str]
2025-10-28 21:16:53,492 - src.utils.gigachat_client - ERROR - Ответ LLM: {
    "question_text": "Что означает непрерывность функции в точке $a$?",
    "question_type": "multiple_choice",
    "options": [
        "$\lim_{x\to a}f(x)$ не существует",
        "$\lim_{x\to a}f(x)\neq f(a)$",
        "$\lim_{x\to a}f(x)=f(a)$",
        "Функция определена только в одной точке $a$"
    ],
    "correct_answer": "$\lim_{x\to a}f(x)=f(a)$",
    "explanation": "Непрерывность функции в точке $a$ определяется равенством предела функции в этой точке и значения самой функции в дан
2025-10-28 21:16:53,492 - src.agents.quiz_agent - ERROR - ✗ Ошибка вызова GigaChat API для 'Непрерывная функция в точке $a$ имеет предел, равн': 1 validation error for Question
__root__
  Invalid \escape: line 5 column 11 (char 141) [type=value_error.jsondecode, input_value='{\n    "question_text": ...ifficulty": "medium"\n}', input_type=str]
2025-10-28 21:16:53,499 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Непрерывная функция в точке $a$ имеет предел, равн': 1 validation error for Question
__root__
  Invalid \escape: line 5 column 11 (char 141) [type=value_error.jsondecode, input_value='{\n    "question_text": ...ifficulty": "medium"\n}', input_type=str]
2025-10-28 21:16:53,499 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-28 21:16:53,499 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Типичными приемами вычисления пределов являются ал
2025-10-28 21:16:54,482 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 21:16:54,482 - src.agents.quiz_agent - INFO - ✓ Вопрос успешно сгенерирован для 'Типичными приемами вычисления пределов являются ал'
2025-10-28 21:16:54,482 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-28 21:16:54,482 - src.agents.quiz_agent - WARNING - Сгенерировано мало вопросов: 2 из 7
2025-10-28 21:16:54,482 - src.agents.quiz_agent - INFO - Квиз сгенерирован: 2 вопросов, сложность: {'easy': 1, 'medium': 1, 'hard': 0}, типы: {'multiple_choice': 2, 'true_false': 0, 'short_answer': 0}
2025-10-28 21:16:54,482 - src.agents.adapted_quiz_agent - INFO - ✓ Сгенерировано 2 вопросов
2025-10-28 21:16:54,482 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по сложности: {'easy': 1, 'medium': 1, 'hard': 0}
2025-10-28 21:16:54,482 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по типам: {'multiple_choice': 2, 'true_false': 0, 'short_answer': 0}
2025-10-28 21:16:54,482 - src.langgraph.workflow - INFO - 
======================================================================
2025-10-28 21:16:54,482 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-28 21:16:54,482 - src.langgraph.workflow - INFO - ======================================================================
2025-10-28 21:16:54,482 - src.langgraph.workflow - INFO - Извлечено фактов: 7
2025-10-28 21:16:54,482 - src.langgraph.workflow - INFO - Создано концепций: 7
2025-10-28 21:16:54,482 - src.langgraph.workflow - INFO - Сгенерировано вопросов: 2
2025-10-28 21:16:54,482 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-28 21:16:54,482 - src.langgraph.workflow - INFO -   - Parser: извлечено 7 фактов
2025-10-28 21:16:54,482 - src.langgraph.workflow - INFO -   - Quiz: сгенерировано 2 вопросов
2025-10-28 21:16:54,482 - __main__ - INFO - 
5️⃣  Форматирование и сохранение результатов
2025-10-28 21:16:54,482 - src.utils.helpers - INFO - ✓ Результаты сохранены: quiz_result.json
2025-10-28 21:16:54,493 - __main__ - INFO - 
======================================================================
2025-10-28 21:16:54,493 - __main__ - INFO - ✓ ГЕНЕРАЦИЯ ЗАВЕРШЕНА УСПЕШНО
2025-10-28 21:16:54,493 - __main__ - INFO - ======================================================================
2025-10-28 21:16:54,493 - __main__ - INFO - Результаты сохранены в: quiz_result.json
2025-10-28 21:16:54,493 - __main__ - INFO - Логи записаны в: quiz_generation.log
2025-10-28 21:22:24,481 - __main__ - INFO - ======================================================================
2025-10-28 21:22:24,481 - __main__ - INFO - OBSIDIAN QUIZ PLUGIN - LANGGRAPH WORKFLOW
2025-10-28 21:22:24,481 - __main__ - INFO - ======================================================================
2025-10-28 21:22:24,481 - __main__ - INFO - 
1️⃣  Загрузка конфигурации: config/config.yaml
2025-10-28 21:22:24,481 - __main__ - INFO - 
2️⃣  Загрузка лекции: .\sample_lecture.txt\
2025-10-28 21:22:24,481 - src.utils.helpers - INFO - ✓ Загружена лекция: .\sample_lecture.txt\ (4400 символов)
2025-10-28 21:22:24,481 - __main__ - INFO -    Длина текста: 4400 символов
2025-10-28 21:22:24,481 - __main__ - INFO -    Слов: ~559
2025-10-28 21:22:24,481 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-28 21:22:24,481 - src.langgraph.workflow - INFO - Инициализация LangGraph Workflow...
2025-10-28 21:22:24,481 - src.agents.enhanced_parser_agent - INFO - Инициализация Enhanced Parser Agent...
2025-10-28 21:22:24,559 - src.agents.enhanced_parser_agent - INFO - Enhanced Parser Agent инициализирован
2025-10-28 21:22:24,559 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-28 21:22:24,559 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-28 21:22:24,559 - src.utils.gigachat_client - INFO - GigaChatClient инициализирован (model=GigaChat)
2025-10-28 21:22:24,559 - __main__ - ERROR - 
✗ Критическая ошибка: 'QuizAgent' object has no attribute '_load_few_shot_examples'
2025-10-28 21:24:03,750 - __main__ - INFO - ======================================================================
2025-10-28 21:24:03,750 - __main__ - INFO - OBSIDIAN QUIZ PLUGIN - LANGGRAPH WORKFLOW
2025-10-28 21:24:03,750 - __main__ - INFO - ======================================================================
2025-10-28 21:24:03,750 - __main__ - INFO - 
1️⃣  Загрузка конфигурации: config/config.yaml
2025-10-28 21:24:03,750 - __main__ - INFO - 
2️⃣  Загрузка лекции: .\sample_lecture.txt\
2025-10-28 21:24:03,750 - src.utils.helpers - INFO - ✓ Загружена лекция: .\sample_lecture.txt\ (1096 символов)
2025-10-28 21:24:03,759 - __main__ - INFO -    Длина текста: 1096 символов
2025-10-28 21:24:03,759 - __main__ - INFO -    Слов: ~131
2025-10-28 21:24:03,759 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-28 21:24:03,759 - src.langgraph.workflow - INFO - Инициализация LangGraph Workflow...
2025-10-28 21:24:03,759 - src.agents.enhanced_parser_agent - INFO - Инициализация Enhanced Parser Agent...
2025-10-28 21:24:03,821 - src.agents.enhanced_parser_agent - INFO - Enhanced Parser Agent инициализирован
2025-10-28 21:24:03,821 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-28 21:24:03,821 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-28 21:24:03,821 - src.utils.gigachat_client - INFO - GigaChatClient инициализирован (model=GigaChat)
2025-10-28 21:24:03,821 - __main__ - ERROR - 
✗ Критическая ошибка: 'QuizAgent' object has no attribute '_load_few_shot_examples'
2025-10-28 21:24:32,789 - __main__ - INFO - ======================================================================
2025-10-28 21:24:32,789 - __main__ - INFO - OBSIDIAN QUIZ PLUGIN - LANGGRAPH WORKFLOW
2025-10-28 21:24:32,789 - __main__ - INFO - ======================================================================
2025-10-28 21:24:32,789 - __main__ - INFO - 
1️⃣  Загрузка конфигурации: config/config.yaml
2025-10-28 21:24:32,789 - __main__ - INFO - 
2️⃣  Загрузка лекции: .\sample_lecture.txt\
2025-10-28 21:24:32,789 - src.utils.helpers - INFO - ✓ Загружена лекция: .\sample_lecture.txt\ (1096 символов)
2025-10-28 21:24:32,789 - __main__ - INFO -    Длина текста: 1096 символов
2025-10-28 21:24:32,789 - __main__ - INFO -    Слов: ~131
2025-10-28 21:24:32,789 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-28 21:24:32,789 - src.langgraph.workflow - INFO - Инициализация LangGraph Workflow...
2025-10-28 21:24:32,789 - src.agents.enhanced_parser_agent - INFO - Инициализация Enhanced Parser Agent...
2025-10-28 21:24:32,852 - src.agents.enhanced_parser_agent - INFO - Enhanced Parser Agent инициализирован
2025-10-28 21:24:32,852 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-28 21:24:32,852 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-28 21:24:32,852 - src.utils.gigachat_client - INFO - GigaChatClient инициализирован (model=GigaChat)
2025-10-28 21:24:32,852 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов, типы: ['multiple_choice', 'true_false', 'short_answer']
2025-10-28 21:24:32,852 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-28 21:24:32,852 - src.langgraph.workflow - INFO - Построение LangGraph графа...
2025-10-28 21:24:32,852 - src.langgraph.workflow - INFO - Граф успешно построен: parser -> quiz_generator -> END
2025-10-28 21:24:32,852 - src.langgraph.workflow - INFO - LangGraph Workflow готов к работе
2025-10-28 21:24:32,852 - __main__ - INFO -    RAG: ✓ Включен
2025-10-28 21:24:32,852 - __main__ - INFO -    Веб-поиск: ✗ Отключен
2025-10-28 21:24:32,852 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-28 21:24:32,852 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-28 21:24:32,852 - src.langgraph.workflow - INFO - 
======================================================================
2025-10-28 21:24:32,852 - src.langgraph.workflow - INFO - ЗАПУСК WORKFLOW
2025-10-28 21:24:32,852 - src.langgraph.workflow - INFO - ======================================================================
2025-10-28 21:24:32,852 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-28 21:24:32,852 - src.agents.enhanced_parser_agent - INFO - Parser Agent: начало обработки
2025-10-28 21:24:32,852 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-28 21:24:33,196 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-28 21:24:34,291 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 21:24:34,291 - src.agents.enhanced_parser_agent - INFO - ✓ Извлечено 7 ключевых фактов
2025-10-28 21:24:34,291 - src.agents.enhanced_parser_agent - INFO - ✓ Создано 7 концепций для Quiz Agent
2025-10-28 21:24:34,291 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-28 21:24:34,291 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-28 21:24:34,291 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-28 21:24:34,291 - src.agents.adapted_quiz_agent - INFO - Получено 7 концепций от Parser Agent
2025-10-28 21:24:34,291 - src.agents.quiz_agent - INFO - Начало генерации квиза
2025-10-28 21:24:34,291 - src.agents.quiz_agent - INFO - Обнаружено 7 концепций
2025-10-28 21:24:34,291 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Квантовая механика изучает поведение материи и эне
2025-10-28 21:24:34,430 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-28 21:24:35,730 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 21:24:35,730 - src.agents.quiz_agent - INFO - ✓ Вопрос успешно сгенерирован для 'Квантовая механика изучает поведение материи и эне'
2025-10-28 21:24:35,730 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-28 21:24:35,730 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Основные концепции квантовой механики включают ква
2025-10-28 21:24:37,028 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 21:24:37,028 - src.agents.quiz_agent - INFO - ✓ Вопрос успешно сгенерирован для 'Основные концепции квантовой механики включают ква'
2025-10-28 21:24:37,028 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-28 21:24:37,044 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Волновая функция ψ(x,t) полностью характеризует со
2025-10-28 21:24:38,406 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 21:24:38,406 - src.agents.quiz_agent - INFO - ✓ Вопрос успешно сгенерирован для 'Волновая функция ψ(x,t) полностью характеризует со'
2025-10-28 21:24:38,406 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-28 21:24:38,406 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Принцип неопределённости Гейзенберга утверждает не
2025-10-28 21:24:39,907 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 21:24:39,907 - src.agents.quiz_agent - INFO - ✓ Вопрос успешно сгенерирован для 'Принцип неопределённости Гейзенберга утверждает не'
2025-10-28 21:24:39,907 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-28 21:24:39,907 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Квантовая система способна пребывать в суперпозици
2025-10-28 21:24:41,252 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 21:24:41,252 - src.agents.quiz_agent - INFO - ✓ Вопрос успешно сгенерирован для 'Квантовая система способна пребывать в суперпозици'
2025-10-28 21:24:41,252 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-28 21:24:41,252 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Энергетическое состояние микрообъектов ограничено 
2025-10-28 21:24:42,441 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 21:24:42,441 - src.agents.quiz_agent - INFO - ✓ Вопрос успешно сгенерирован для 'Энергетическое состояние микрообъектов ограничено '
2025-10-28 21:24:42,441 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-28 21:24:42,441 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Уравнение Шрёдингера определяет временную эволюцию
2025-10-28 21:24:43,552 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 21:24:43,552 - src.agents.quiz_agent - INFO - ✓ Вопрос успешно сгенерирован для 'Уравнение Шрёдингера определяет временную эволюцию'
2025-10-28 21:24:43,552 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-28 21:24:43,552 - src.agents.quiz_agent - INFO - Квиз сгенерирован: 7 вопросов, сложность: {'easy': 2, 'medium': 5, 'hard': 0}, типы: {'multiple_choice': 7, 'true_false': 0, 'short_answer': 0}
2025-10-28 21:24:43,552 - src.agents.adapted_quiz_agent - INFO - ✓ Сгенерировано 7 вопросов
2025-10-28 21:24:43,552 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по сложности: {'easy': 2, 'medium': 5, 'hard': 0}
2025-10-28 21:24:43,552 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по типам: {'multiple_choice': 7, 'true_false': 0, 'short_answer': 0}
2025-10-28 21:24:43,552 - src.langgraph.workflow - INFO - 
======================================================================
2025-10-28 21:24:43,552 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-28 21:24:43,552 - src.langgraph.workflow - INFO - ======================================================================
2025-10-28 21:24:43,552 - src.langgraph.workflow - INFO - Извлечено фактов: 7
2025-10-28 21:24:43,552 - src.langgraph.workflow - INFO - Создано концепций: 7
2025-10-28 21:24:43,552 - src.langgraph.workflow - INFO - Сгенерировано вопросов: 7
2025-10-28 21:24:43,552 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-28 21:24:43,552 - src.langgraph.workflow - INFO -   - Parser: извлечено 7 фактов
2025-10-28 21:24:43,552 - src.langgraph.workflow - INFO -   - Quiz: сгенерировано 7 вопросов
2025-10-28 21:24:43,552 - __main__ - INFO - 
5️⃣  Форматирование и сохранение результатов
2025-10-28 21:24:43,552 - src.utils.helpers - INFO - ✓ Результаты сохранены: quiz_result.json
2025-10-28 21:24:43,565 - __main__ - INFO - 
======================================================================
2025-10-28 21:24:43,565 - __main__ - INFO - ✓ ГЕНЕРАЦИЯ ЗАВЕРШЕНА УСПЕШНО
2025-10-28 21:24:43,565 - __main__ - INFO - ======================================================================
2025-10-28 21:24:43,565 - __main__ - INFO - Результаты сохранены в: quiz_result.json
2025-10-28 21:24:43,565 - __main__ - INFO - Логи записаны в: quiz_generation.log
2025-10-29 12:09:38,067 - __main__ - INFO - ======================================================================
2025-10-29 12:09:38,067 - __main__ - INFO - OBSIDIAN QUIZ PLUGIN - LANGGRAPH WORKFLOW
2025-10-29 12:09:38,067 - __main__ - INFO - ======================================================================
2025-10-29 12:09:38,067 - __main__ - INFO - 
1️⃣  Загрузка конфигурации: config/config.yaml
2025-10-29 12:09:38,067 - __main__ - INFO - 
2️⃣  Загрузка лекции: sample_lecture.txt
2025-10-29 12:09:38,067 - src.utils.helpers - INFO - ✓ Загружена лекция: sample_lecture.txt (1096 символов)
2025-10-29 12:09:38,067 - __main__ - INFO -    Длина текста: 1096 символов
2025-10-29 12:09:38,067 - __main__ - INFO -    Слов: ~131
2025-10-29 12:09:38,067 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-29 12:09:38,067 - src.langgraph.workflow - INFO - Инициализация LangGraph Workflow...
2025-10-29 12:09:38,067 - src.agents.enhanced_parser_agent - INFO - Инициализация Enhanced Parser Agent...
2025-10-29 12:09:38,146 - src.agents.enhanced_parser_agent - INFO - Enhanced Parser Agent инициализирован
2025-10-29 12:09:38,146 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-29 12:09:38,146 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-29 12:09:38,146 - src.utils.gigachat_client - INFO - GigaChatClient инициализирован (model=GigaChat)
2025-10-29 12:09:38,146 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов, типы: ['multiple_choice', 'true_false', 'short_answer']
2025-10-29 12:09:38,146 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-29 12:09:38,146 - src.langgraph.workflow - INFO - Построение LangGraph графа...
2025-10-29 12:09:38,146 - src.langgraph.workflow - INFO - Граф успешно построен: parser -> quiz_generator -> END
2025-10-29 12:09:38,146 - src.langgraph.workflow - INFO - LangGraph Workflow готов к работе
2025-10-29 12:09:38,146 - __main__ - INFO -    RAG: ✓ Включен
2025-10-29 12:09:38,146 - __main__ - INFO -    Веб-поиск: ✓ Включен
2025-10-29 12:09:38,146 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-29 12:09:38,146 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-29 12:09:38,146 - src.langgraph.workflow - INFO - 
======================================================================
2025-10-29 12:09:38,146 - src.langgraph.workflow - INFO - ЗАПУСК WORKFLOW
2025-10-29 12:09:38,146 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:09:38,146 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-29 12:09:38,146 - src.agents.enhanced_parser_agent - INFO - Parser Agent: начало обработки
2025-10-29 12:09:38,146 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-29 12:09:38,286 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:09:39,350 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:09:39,350 - src.agents.enhanced_parser_agent - INFO - ✓ Извлечено 7 ключевых фактов
2025-10-29 12:09:39,350 - src.agents.enhanced_parser_agent - INFO - ✓ Создано 7 концепций для Quiz Agent
2025-10-29 12:09:39,350 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:09:39,350 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-29 12:09:39,350 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:09:39,350 - src.agents.adapted_quiz_agent - INFO - Получено 7 концепций от Parser Agent
2025-10-29 12:09:39,350 - src.agents.quiz_agent - INFO - Начало генерации квиза
2025-10-29 12:09:39,350 - src.agents.quiz_agent - INFO - Обнаружено 7 концепций
2025-10-29 12:09:39,350 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Квантовая механика изучает поведение материи и эне
2025-10-29 12:09:39,444 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:09:40,695 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:09:40,695 - src.agents.quiz_agent - INFO - ✓ Вопрос успешно сгенерирован для 'Квантовая механика изучает поведение материи и эне'
2025-10-29 12:09:40,695 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:09:40,695 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Основные концепции квантовой механики включают ква
2025-10-29 12:09:42,088 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:09:42,088 - src.agents.quiz_agent - INFO - ✓ Вопрос успешно сгенерирован для 'Основные концепции квантовой механики включают ква'
2025-10-29 12:09:42,088 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:09:42,088 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Волновая функция ψ(x,t) полностью характеризует со
2025-10-29 12:09:43,417 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:09:43,417 - src.agents.quiz_agent - INFO - ✓ Вопрос успешно сгенерирован для 'Волновая функция ψ(x,t) полностью характеризует со'
2025-10-29 12:09:43,417 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:09:43,417 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Принцип неопределённости Гейзенберга утверждает не
2025-10-29 12:09:44,981 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:09:44,981 - src.agents.quiz_agent - INFO - ✓ Вопрос успешно сгенерирован для 'Принцип неопределённости Гейзенберга утверждает не'
2025-10-29 12:09:44,981 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:09:44,981 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Уравнение Шрёдингера описывает изменение волновой 
2025-10-29 12:09:46,314 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:09:46,314 - src.agents.quiz_agent - INFO - ✓ Вопрос успешно сгенерирован для 'Уравнение Шрёдингера описывает изменение волновой '
2025-10-29 12:09:46,314 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:09:46,314 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Квантовое состояние может быть суперпозицией разли
2025-10-29 12:09:47,578 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:09:47,578 - src.agents.quiz_agent - INFO - ✓ Вопрос успешно сгенерирован для 'Квантовое состояние может быть суперпозицией разли'
2025-10-29 12:09:47,578 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:09:47,578 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Энергетическое состояние микрообъектов ограничено 
2025-10-29 12:09:48,666 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:09:48,666 - src.agents.quiz_agent - INFO - ✓ Вопрос успешно сгенерирован для 'Энергетическое состояние микрообъектов ограничено '
2025-10-29 12:09:48,667 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:09:48,667 - src.agents.quiz_agent - INFO - Квиз сгенерирован: 7 вопросов, сложность: {'easy': 2, 'medium': 5, 'hard': 0}, типы: {'multiple_choice': 7, 'true_false': 0, 'short_answer': 0}
2025-10-29 12:09:48,667 - src.agents.adapted_quiz_agent - INFO - ✓ Сгенерировано 7 вопросов
2025-10-29 12:09:48,667 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по сложности: {'easy': 2, 'medium': 5, 'hard': 0}
2025-10-29 12:09:48,667 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по типам: {'multiple_choice': 7, 'true_false': 0, 'short_answer': 0}
2025-10-29 12:09:48,668 - src.langgraph.workflow - INFO - 
======================================================================
2025-10-29 12:09:48,668 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-29 12:09:48,668 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:09:48,669 - src.langgraph.workflow - INFO - Извлечено фактов: 7
2025-10-29 12:09:48,669 - src.langgraph.workflow - INFO - Создано концепций: 7
2025-10-29 12:09:48,669 - src.langgraph.workflow - INFO - Сгенерировано вопросов: 7
2025-10-29 12:09:48,669 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-29 12:09:48,669 - src.langgraph.workflow - INFO -   - Parser: извлечено 7 фактов
2025-10-29 12:09:48,669 - src.langgraph.workflow - INFO -   - Quiz: сгенерировано 7 вопросов
2025-10-29 12:09:48,670 - __main__ - INFO - 
5️⃣  Форматирование и сохранение результатов
2025-10-29 12:09:48,670 - src.utils.helpers - INFO - ✓ Результаты сохранены: quiz_result.json
2025-10-29 12:09:48,673 - __main__ - INFO - 
======================================================================
2025-10-29 12:09:48,673 - __main__ - INFO - ✓ ГЕНЕРАЦИЯ ЗАВЕРШЕНА УСПЕШНО
2025-10-29 12:09:48,673 - __main__ - INFO - ======================================================================
2025-10-29 12:09:48,673 - __main__ - INFO - Результаты сохранены в: quiz_result.json
2025-10-29 12:09:48,673 - __main__ - INFO - Логи записаны в: quiz_generation.log
2025-10-29 12:10:21,067 - __main__ - INFO - ======================================================================
2025-10-29 12:10:21,067 - __main__ - INFO - OBSIDIAN QUIZ PLUGIN - LANGGRAPH WORKFLOW
2025-10-29 12:10:21,067 - __main__ - INFO - ======================================================================
2025-10-29 12:10:21,067 - __main__ - INFO - 
1️⃣  Загрузка конфигурации: config/config.yaml
2025-10-29 12:10:21,067 - __main__ - INFO - 
2️⃣  Загрузка лекции: sample_lecture.txt
2025-10-29 12:10:21,067 - src.utils.helpers - INFO - ✓ Загружена лекция: sample_lecture.txt (1096 символов)
2025-10-29 12:10:21,067 - __main__ - INFO -    Длина текста: 1096 символов
2025-10-29 12:10:21,083 - __main__ - INFO -    Слов: ~131
2025-10-29 12:10:21,083 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-29 12:10:21,083 - src.langgraph.workflow - INFO - Инициализация LangGraph Workflow...
2025-10-29 12:10:21,083 - src.agents.enhanced_parser_agent - INFO - Инициализация Enhanced Parser Agent...
2025-10-29 12:10:21,146 - src.agents.enhanced_parser_agent - INFO - Enhanced Parser Agent инициализирован
2025-10-29 12:10:21,146 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-29 12:10:21,146 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-29 12:10:21,146 - src.utils.gigachat_client - INFO - GigaChatClient инициализирован (model=GigaChat)
2025-10-29 12:10:21,146 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов, типы: ['multiple_choice', 'true_false', 'short_answer']
2025-10-29 12:10:21,146 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-29 12:10:21,146 - src.langgraph.workflow - INFO - Построение LangGraph графа...
2025-10-29 12:10:21,146 - src.langgraph.workflow - INFO - Граф успешно построен: parser -> quiz_generator -> END
2025-10-29 12:10:21,146 - src.langgraph.workflow - INFO - LangGraph Workflow готов к работе
2025-10-29 12:10:21,146 - __main__ - INFO -    RAG: ✓ Включен
2025-10-29 12:10:21,146 - __main__ - INFO -    Веб-поиск: ✗ Отключен
2025-10-29 12:10:21,146 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-29 12:10:21,146 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-29 12:10:21,146 - src.langgraph.workflow - INFO - 
======================================================================
2025-10-29 12:10:21,146 - src.langgraph.workflow - INFO - ЗАПУСК WORKFLOW
2025-10-29 12:10:21,146 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:10:21,146 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-29 12:10:21,146 - src.agents.enhanced_parser_agent - INFO - Parser Agent: начало обработки
2025-10-29 12:10:21,146 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-29 12:10:21,303 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:10:22,429 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:10:22,429 - src.agents.enhanced_parser_agent - INFO - ✓ Извлечено 7 ключевых фактов
2025-10-29 12:10:22,429 - src.agents.enhanced_parser_agent - INFO - ✓ Создано 7 концепций для Quiz Agent
2025-10-29 12:10:22,429 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:10:22,429 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-29 12:10:22,429 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:10:22,429 - src.agents.adapted_quiz_agent - INFO - Получено 7 концепций от Parser Agent
2025-10-29 12:10:22,429 - src.agents.quiz_agent - INFO - Начало генерации квиза
2025-10-29 12:10:22,429 - src.agents.quiz_agent - INFO - Обнаружено 7 концепций
2025-10-29 12:10:22,429 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Квантовая механика изучает поведение материи и эне
2025-10-29 12:10:22,507 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:10:23,821 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:10:23,821 - src.agents.quiz_agent - INFO - ✓ Вопрос успешно сгенерирован для 'Квантовая механика изучает поведение материи и эне'
2025-10-29 12:10:23,821 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:10:23,821 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Основные концепции квантовой механики включают ква
2025-10-29 12:10:25,258 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:10:25,258 - src.agents.quiz_agent - INFO - ✓ Вопрос успешно сгенерирован для 'Основные концепции квантовой механики включают ква'
2025-10-29 12:10:25,258 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:10:25,258 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Волновая функция ψ(x,t) полностью характеризует со
2025-10-29 12:10:26,557 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:10:26,557 - src.agents.quiz_agent - INFO - ✓ Вопрос успешно сгенерирован для 'Волновая функция ψ(x,t) полностью характеризует со'
2025-10-29 12:10:26,557 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:10:26,557 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Принцип неопределённости Гейзенберга утверждает не
2025-10-29 12:10:27,949 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:10:27,949 - src.agents.quiz_agent - INFO - ✓ Вопрос успешно сгенерирован для 'Принцип неопределённости Гейзенберга утверждает не'
2025-10-29 12:10:27,949 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:10:27,949 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Уравнение Шрёдингера описывает изменение волновой 
2025-10-29 12:10:29,090 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:10:29,090 - src.agents.quiz_agent - INFO - ✓ Вопрос успешно сгенерирован для 'Уравнение Шрёдингера описывает изменение волновой '
2025-10-29 12:10:29,090 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:10:29,105 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Квантовая система способна пребывать в суперпозици
2025-10-29 12:10:30,514 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:10:30,514 - src.agents.quiz_agent - INFO - ✓ Вопрос успешно сгенерирован для 'Квантовая система способна пребывать в суперпозици'
2025-10-29 12:10:30,514 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:10:30,514 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Энергетическое состояние электрона в атоме огранич
2025-10-29 12:10:31,828 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:10:31,828 - src.agents.quiz_agent - INFO - ✓ Вопрос успешно сгенерирован для 'Энергетическое состояние электрона в атоме огранич'
2025-10-29 12:10:31,828 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:10:31,828 - src.agents.quiz_agent - INFO - Квиз сгенерирован: 7 вопросов, сложность: {'easy': 1, 'medium': 6, 'hard': 0}, типы: {'multiple_choice': 7, 'true_false': 0, 'short_answer': 0}
2025-10-29 12:10:31,828 - src.agents.adapted_quiz_agent - INFO - ✓ Сгенерировано 7 вопросов
2025-10-29 12:10:31,828 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по сложности: {'easy': 1, 'medium': 6, 'hard': 0}
2025-10-29 12:10:31,828 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по типам: {'multiple_choice': 7, 'true_false': 0, 'short_answer': 0}
2025-10-29 12:10:31,828 - src.langgraph.workflow - INFO - 
======================================================================
2025-10-29 12:10:31,828 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-29 12:10:31,828 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:10:31,828 - src.langgraph.workflow - INFO - Извлечено фактов: 7
2025-10-29 12:10:31,828 - src.langgraph.workflow - INFO - Создано концепций: 7
2025-10-29 12:10:31,828 - src.langgraph.workflow - INFO - Сгенерировано вопросов: 7
2025-10-29 12:10:31,828 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-29 12:10:31,828 - src.langgraph.workflow - INFO -   - Parser: извлечено 7 фактов
2025-10-29 12:10:31,828 - src.langgraph.workflow - INFO -   - Quiz: сгенерировано 7 вопросов
2025-10-29 12:10:31,828 - __main__ - INFO - 
5️⃣  Форматирование и сохранение результатов
2025-10-29 12:10:31,828 - src.utils.helpers - INFO - ✓ Результаты сохранены: quiz_result.json
2025-10-29 12:10:31,839 - __main__ - INFO - 
======================================================================
2025-10-29 12:10:31,839 - __main__ - INFO - ✓ ГЕНЕРАЦИЯ ЗАВЕРШЕНА УСПЕШНО
2025-10-29 12:10:31,839 - __main__ - INFO - ======================================================================
2025-10-29 12:10:31,839 - __main__ - INFO - Результаты сохранены в: quiz_result.json
2025-10-29 12:10:31,839 - __main__ - INFO - Логи записаны в: quiz_generation.log
2025-10-29 12:16:48,278 - __main__ - INFO - ======================================================================
2025-10-29 12:16:48,278 - __main__ - INFO - OBSIDIAN QUIZ PLUGIN - LANGGRAPH WORKFLOW
2025-10-29 12:16:48,278 - __main__ - INFO - ======================================================================
2025-10-29 12:16:48,278 - __main__ - INFO - 
1️⃣  Загрузка конфигурации
2025-10-29 12:16:48,278 - __main__ - INFO - 
2️⃣  Загрузка лекции: sample_lecture.txt
2025-10-29 12:16:48,278 - src.utils.helpers - INFO - ✓ Загружена лекция: sample_lecture.txt (1096 символов)
2025-10-29 12:16:48,278 - __main__ - INFO -    📄 Длина: 1096 символов
2025-10-29 12:16:48,278 - __main__ - INFO -    📝 Слов: ~131
2025-10-29 12:16:48,278 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-29 12:16:48,278 - src.langgraph.workflow - INFO - Инициализация LangGraph Workflow...
2025-10-29 12:16:48,278 - __main__ - ERROR - 
✗ Критическая ошибка: EnhancedParserAgent.__init__() got an unexpected keyword argument 'credentials'
2025-10-29 12:16:48,278 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:16:48,278 - src.utils.gigachat_client - INFO - 📊 ИТОГОВАЯ СТАТИСТИКА ИСПОЛЬЗОВАНИЯ ТОКЕНОВ
2025-10-29 12:16:48,278 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:16:48,278 - src.utils.gigachat_client - INFO - LLM запросов: 0
2025-10-29 12:16:48,278 - src.utils.gigachat_client - INFO -   Токенов в промптах: 0
2025-10-29 12:16:48,278 - src.utils.gigachat_client - INFO -   Токенов в ответах: 0
2025-10-29 12:16:48,278 - src.utils.gigachat_client - INFO -   Всего LLM токенов: 0
2025-10-29 12:16:48,278 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 12:16:48,278 - src.utils.gigachat_client - INFO - Embedding запросов: 0
2025-10-29 12:16:48,278 - src.utils.gigachat_client - INFO -   Embedding токенов: 0
2025-10-29 12:16:48,278 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 12:16:48,278 - src.utils.gigachat_client - INFO - ВСЕГО ТОКЕНОВ: 0
2025-10-29 12:16:48,278 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:18:01,225 - __main__ - INFO - ======================================================================
2025-10-29 12:18:01,225 - __main__ - INFO - OBSIDIAN QUIZ PLUGIN - LANGGRAPH WORKFLOW
2025-10-29 12:18:01,225 - __main__ - INFO - ======================================================================
2025-10-29 12:18:01,225 - __main__ - INFO - 
1️⃣  Загрузка конфигурации
2025-10-29 12:18:01,225 - __main__ - INFO - 
2️⃣  Загрузка лекции: sample_lecture.txt
2025-10-29 12:18:01,225 - src.utils.helpers - INFO - ✓ Загружена лекция: sample_lecture.txt (1096 символов)
2025-10-29 12:18:01,225 - __main__ - INFO -    📄 Длина: 1096 символов
2025-10-29 12:18:01,225 - __main__ - INFO -    📝 Слов: ~131
2025-10-29 12:18:01,225 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-29 12:18:01,225 - src.agents.base_agent.EnhancedParserAgent - INFO - EnhancedParserAgent инициализирован
2025-10-29 12:18:01,302 - src.agents.enhanced_parser_agent - INFO - ✓ RAG компоненты инициализированы с подсчетом токенов
2025-10-29 12:18:01,302 - src.agents.enhanced_parser_agent - INFO - EnhancedParserAgent инициализирован (RAG=ON, WebSearch=OFF)
2025-10-29 12:18:01,302 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-29 12:18:01,302 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-29 12:18:01,302 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов, типы: ['multiple_choice', 'true_false', 'short_answer']
2025-10-29 12:18:01,302 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-29 12:18:01,302 - src.langgraph.workflow - INFO - Workflow скомпилирован: parser → quiz_generator → END
2025-10-29 12:18:01,302 - src.langgraph.workflow - INFO - QuizGenerationWorkflow инициализирован (RAG=True, WebSearch=False)
2025-10-29 12:18:01,302 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-29 12:18:01,302 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-29 12:18:01,302 - src.langgraph.workflow - INFO - Запуск workflow с лекцией (1096 символов)
2025-10-29 12:18:01,302 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-29 12:18:01,302 - src.agents.enhanced_parser_agent - INFO - Parser Agent: начало обработки
2025-10-29 12:18:01,302 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-29 12:18:01,302 - src.agents.enhanced_parser_agent - INFO - 📝 Обработка лекции: 1096 символов
2025-10-29 12:18:01,302 - src.agents.enhanced_parser_agent - INFO - 🔍 Использование RAG для обработки текста
2025-10-29 12:18:01,302 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 1 - Разбиение текста на чанки
2025-10-29 12:18:01,302 - src.agents.enhanced_parser_agent - INFO -    Создано 3 чанков
2025-10-29 12:18:01,302 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 2 - Создание векторного хранилища FAISS
2025-10-29 12:18:01,302 - src.agents.enhanced_parser_agent - INFO -    Генерация эмбеддингов для 3 чанков...
2025-10-29 12:18:01,443 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:18:01,599 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 12:18:01,615 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #1: tokens=170
2025-10-29 12:18:01,646 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-10-29 12:18:01,882 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-10-29 12:18:01,897 - langchain_community.vectorstores.faiss - WARNING - `embedding_function` is expected to be an Embeddings object, support for passing in a function will soon be removed.
2025-10-29 12:18:01,897 - src.agents.enhanced_parser_agent - INFO -    ✓ Векторное хранилище создано
2025-10-29 12:18:01,897 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 3 - Семантический поиск релевантных фрагментов
2025-10-29 12:18:01,897 - src.agents.enhanced_parser_agent - INFO -    Поиск по запросу: 'Какие основные концепции, определения и ключевые ф...'
2025-10-29 12:18:01,897 - src.agents.enhanced_parser_agent - ERROR - ✗ Ошибка в Parser Agent: 'GigaChatEmbeddingsProxy' object is not callable
2025-10-29 12:18:01,913 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:18:01,913 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-29 12:18:01,913 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:18:01,913 - src.agents.adapted_quiz_agent - ERROR - ✗ Ошибка в Quiz Agent: Отсутствуют концепции от Parser Agent
2025-10-29 12:18:01,913 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:18:01,913 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-29 12:18:01,913 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:18:01,913 - src.langgraph.workflow - INFO - Извлечено фактов: 0
2025-10-29 12:18:01,913 - src.langgraph.workflow - INFO - Создано концепций: 0
2025-10-29 12:18:01,913 - src.langgraph.workflow - INFO - Сгенерировано вопросов: 0
2025-10-29 12:18:01,913 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-29 12:18:01,913 - src.langgraph.workflow - INFO -   - Parser: ОШИБКА - 'GigaChatEmbeddingsProxy' object is not callable
2025-10-29 12:18:01,913 - src.langgraph.workflow - INFO -   - Quiz: ОШИБКА - Отсутствуют концепции от Parser Agent
2025-10-29 12:18:01,913 - __main__ - ERROR - 
✗ Ошибка: Отсутствуют концепции от Parser Agent
2025-10-29 12:18:01,913 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:18:01,913 - src.utils.gigachat_client - INFO - 📊 ИТОГОВАЯ СТАТИСТИКА ИСПОЛЬЗОВАНИЯ ТОКЕНОВ
2025-10-29 12:18:01,913 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:18:01,913 - src.utils.gigachat_client - INFO - LLM запросов: 0
2025-10-29 12:18:01,913 - src.utils.gigachat_client - INFO -   Токенов в промптах: 0
2025-10-29 12:18:01,913 - src.utils.gigachat_client - INFO -   Токенов в ответах: 0
2025-10-29 12:18:01,913 - src.utils.gigachat_client - INFO -   Всего LLM токенов: 0
2025-10-29 12:18:01,913 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 12:18:01,913 - src.utils.gigachat_client - INFO - Embedding запросов: 1
2025-10-29 12:18:01,913 - src.utils.gigachat_client - INFO -   Embedding токенов: 170
2025-10-29 12:18:01,913 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 12:18:01,913 - src.utils.gigachat_client - INFO - ВСЕГО ТОКЕНОВ: 170
2025-10-29 12:18:01,913 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:19:25,275 - __main__ - INFO - ======================================================================
2025-10-29 12:19:25,275 - __main__ - INFO - OBSIDIAN QUIZ PLUGIN - LANGGRAPH WORKFLOW
2025-10-29 12:19:25,275 - __main__ - INFO - ======================================================================
2025-10-29 12:19:25,275 - __main__ - INFO - 
1️⃣  Загрузка конфигурации
2025-10-29 12:19:25,290 - __main__ - INFO - 
2️⃣  Загрузка лекции: sample_lecture.txt
2025-10-29 12:19:25,290 - src.utils.helpers - INFO - ✓ Загружена лекция: sample_lecture.txt (1096 символов)
2025-10-29 12:19:25,290 - __main__ - INFO -    📄 Длина: 1096 символов
2025-10-29 12:19:25,290 - __main__ - INFO -    📝 Слов: ~131
2025-10-29 12:19:25,290 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-29 12:19:25,290 - src.agents.base_agent.EnhancedParserAgent - INFO - EnhancedParserAgent инициализирован
2025-10-29 12:19:25,353 - src.agents.enhanced_parser_agent - INFO - ✓ RAG компоненты инициализированы с подсчетом токенов
2025-10-29 12:19:25,353 - src.agents.enhanced_parser_agent - INFO - EnhancedParserAgent инициализирован (RAG=ON, WebSearch=OFF)
2025-10-29 12:19:25,353 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-29 12:19:25,353 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-29 12:19:25,353 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов, типы: ['multiple_choice', 'true_false', 'short_answer']
2025-10-29 12:19:25,353 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-29 12:19:25,353 - src.langgraph.workflow - INFO - Workflow скомпилирован: parser → quiz_generator → END
2025-10-29 12:19:25,353 - src.langgraph.workflow - INFO - QuizGenerationWorkflow инициализирован (RAG=True, WebSearch=False)
2025-10-29 12:19:25,353 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-29 12:19:25,353 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-29 12:19:25,353 - src.langgraph.workflow - INFO - Запуск workflow с лекцией (1096 символов)
2025-10-29 12:19:25,353 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-29 12:19:25,353 - src.agents.enhanced_parser_agent - INFO - Parser Agent: начало обработки
2025-10-29 12:19:25,353 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-29 12:19:25,353 - src.agents.enhanced_parser_agent - INFO - 📝 Обработка лекции: 1096 символов
2025-10-29 12:19:25,353 - src.agents.enhanced_parser_agent - INFO - 🔍 Использование RAG для обработки текста
2025-10-29 12:19:25,353 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 1 - Разбиение текста на чанки
2025-10-29 12:19:25,353 - src.agents.enhanced_parser_agent - INFO -    Создано 3 чанков
2025-10-29 12:19:25,353 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 2 - Создание векторного хранилища FAISS
2025-10-29 12:19:25,353 - src.agents.enhanced_parser_agent - INFO -    Генерация эмбеддингов для 3 чанков...
2025-10-29 12:19:25,478 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:19:25,643 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 12:19:25,659 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #1: tokens=170
2025-10-29 12:19:25,666 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-10-29 12:19:25,698 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-10-29 12:19:25,698 - langchain_community.vectorstores.faiss - WARNING - `embedding_function` is expected to be an Embeddings object, support for passing in a function will soon be removed.
2025-10-29 12:19:25,698 - src.agents.enhanced_parser_agent - INFO -    ✓ Векторное хранилище создано
2025-10-29 12:19:25,698 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 3 - Семантический поиск релевантных фрагментов
2025-10-29 12:19:25,698 - src.agents.enhanced_parser_agent - INFO -    Поиск по запросу: 'Какие основные концепции, определения и ключевые ф...'
2025-10-29 12:19:25,807 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 12:19:25,807 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #2: tokens=14
2025-10-29 12:19:25,823 - src.agents.enhanced_parser_agent - INFO -    ✓ Найдено 3 релевантных фрагментов
2025-10-29 12:19:25,823 - src.agents.enhanced_parser_agent - INFO -    Объединенный контекст: 1095 символов
2025-10-29 12:19:25,823 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 4 - Извлечение фактов через LLM
2025-10-29 12:19:25,901 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:19:27,386 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:19:27,386 - src.utils.gigachat_client - INFO - 📊 LLM запрос #1: prompt=385, completion=190, total=575
2025-10-29 12:19:27,386 - src.agents.enhanced_parser_agent - INFO -    Извлечено 10 фактов через LLM
2025-10-29 12:19:27,386 - src.agents.enhanced_parser_agent - INFO - ✓ RAG завершен: извлечено 10 фактов
2025-10-29 12:19:27,386 - src.agents.enhanced_parser_agent - INFO - ✓ Извлечено 10 ключевых фактов
2025-10-29 12:19:27,386 - src.agents.enhanced_parser_agent - INFO - ✓ Создано 10 концепций для Quiz Agent
2025-10-29 12:19:27,386 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:19:27,386 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-29 12:19:27,386 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:19:27,386 - src.agents.adapted_quiz_agent - INFO - Получено 10 концепций от Parser Agent
2025-10-29 12:19:27,386 - src.agents.quiz_agent - INFO - Начало генерации квиза
2025-10-29 12:19:27,386 - src.agents.quiz_agent - INFO - Обнаружено 10 концепций
2025-10-29 12:19:27,386 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Квантовая механика — фундаментальная физическая те
2025-10-29 12:19:27,386 - src.agents.quiz_agent - ERROR - ✗ Ошибка вызова GigaChat API для 'Квантовая механика — фундаментальная физическая те': 'GigaChat' object has no attribute 'generate_structured'
2025-10-29 12:19:27,386 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Квантовая механика — фундаментальная физическая те': 'GigaChat' object has no attribute 'generate_structured'
2025-10-29 12:19:27,386 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-29 12:19:27,386 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Основные понятия квантовой механики включают волно
2025-10-29 12:19:27,386 - src.agents.quiz_agent - ERROR - ✗ Ошибка вызова GigaChat API для 'Основные понятия квантовой механики включают волно': 'GigaChat' object has no attribute 'generate_structured'
2025-10-29 12:19:27,386 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Основные понятия квантовой механики включают волно': 'GigaChat' object has no attribute 'generate_structured'
2025-10-29 12:19:27,386 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-29 12:19:27,386 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Волновая функция ψ(x,t) полностью характеризует со
2025-10-29 12:19:27,386 - src.agents.quiz_agent - ERROR - ✗ Ошибка вызова GigaChat API для 'Волновая функция ψ(x,t) полностью характеризует со': 'GigaChat' object has no attribute 'generate_structured'
2025-10-29 12:19:27,386 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Волновая функция ψ(x,t) полностью характеризует со': 'GigaChat' object has no attribute 'generate_structured'
2025-10-29 12:19:27,386 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-29 12:19:27,386 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Энергия квантовализована, принимает дискретные зна
2025-10-29 12:19:27,386 - src.agents.quiz_agent - ERROR - ✗ Ошибка вызова GigaChat API для 'Энергия квантовализована, принимает дискретные зна': 'GigaChat' object has no attribute 'generate_structured'
2025-10-29 12:19:27,386 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Энергия квантовализована, принимает дискретные зна': 'GigaChat' object has no attribute 'generate_structured'
2025-10-29 12:19:27,386 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-29 12:19:27,386 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Уравнение Шрёдингера описывает изменение состояния
2025-10-29 12:19:27,386 - src.agents.quiz_agent - ERROR - ✗ Ошибка вызова GigaChat API для 'Уравнение Шрёдингера описывает изменение состояния': 'GigaChat' object has no attribute 'generate_structured'
2025-10-29 12:19:27,386 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Уравнение Шрёдингера описывает изменение состояния': 'GigaChat' object has no attribute 'generate_structured'
2025-10-29 12:19:27,386 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-29 12:19:27,386 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Принцип неопределённости Гейзенберга ограничивает 
2025-10-29 12:19:27,386 - src.agents.quiz_agent - ERROR - ✗ Ошибка вызова GigaChat API для 'Принцип неопределённости Гейзенберга ограничивает ': 'GigaChat' object has no attribute 'generate_structured'
2025-10-29 12:19:27,402 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Принцип неопределённости Гейзенберга ограничивает ': 'GigaChat' object has no attribute 'generate_structured'
2025-10-29 12:19:27,402 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-29 12:19:27,402 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Система может пребывать в суперпозиции различных с
2025-10-29 12:19:27,402 - src.agents.quiz_agent - ERROR - ✗ Ошибка вызова GigaChat API для 'Система может пребывать в суперпозиции различных с': 'GigaChat' object has no attribute 'generate_structured'
2025-10-29 12:19:27,402 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Система может пребывать в суперпозиции различных с': 'GigaChat' object has no attribute 'generate_structured'
2025-10-29 12:19:27,402 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-29 12:19:27,402 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Константа $\hbar$ (приведённая постоянная Планка) 
2025-10-29 12:19:27,402 - src.agents.quiz_agent - ERROR - ✗ Ошибка вызова GigaChat API для 'Константа $\hbar$ (приведённая постоянная Планка) ': 'GigaChat' object has no attribute 'generate_structured'
2025-10-29 12:19:27,402 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Константа $\hbar$ (приведённая постоянная Планка) ': 'GigaChat' object has no attribute 'generate_structured'
2025-10-29 12:19:27,402 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-29 12:19:27,402 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Формулировка принципа неопределённости: $\Delta x 
2025-10-29 12:19:27,402 - src.agents.quiz_agent - ERROR - ✗ Ошибка вызова GigaChat API для 'Формулировка принципа неопределённости: $\Delta x ': 'GigaChat' object has no attribute 'generate_structured'
2025-10-29 12:19:27,402 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Формулировка принципа неопределённости: $\Delta x ': 'GigaChat' object has no attribute 'generate_structured'
2025-10-29 12:19:27,402 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-29 12:19:27,402 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Дискретность энергии позволяет электронам занимать
2025-10-29 12:19:27,402 - src.agents.quiz_agent - ERROR - ✗ Ошибка вызова GigaChat API для 'Дискретность энергии позволяет электронам занимать': 'GigaChat' object has no attribute 'generate_structured'
2025-10-29 12:19:27,402 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Дискретность энергии позволяет электронам занимать': 'GigaChat' object has no attribute 'generate_structured'
2025-10-29 12:19:27,402 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-29 12:19:27,402 - src.agents.quiz_agent - ERROR - Не удалось сгенерировать ни одного вопроса!
2025-10-29 12:19:27,402 - src.agents.adapted_quiz_agent - INFO - ✓ Сгенерировано 0 вопросов
2025-10-29 12:19:27,402 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по сложности: {}
2025-10-29 12:19:27,402 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по типам: {}
2025-10-29 12:19:27,402 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:19:27,402 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-29 12:19:27,402 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:19:27,402 - src.langgraph.workflow - INFO - Извлечено фактов: 10
2025-10-29 12:19:27,408 - src.langgraph.workflow - INFO - Создано концепций: 10
2025-10-29 12:19:27,408 - src.langgraph.workflow - INFO - Сгенерировано вопросов: 0
2025-10-29 12:19:27,408 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-29 12:19:27,408 - src.langgraph.workflow - INFO -   - Parser: извлечено 10 фактов
2025-10-29 12:19:27,408 - src.langgraph.workflow - INFO -   - Quiz: сгенерировано 0 вопросов
2025-10-29 12:19:27,408 - __main__ - INFO - 
5️⃣  Форматирование результатов
2025-10-29 12:19:27,408 - src.utils.helpers - INFO - ✓ Результаты сохранены: quiz_result.json
2025-10-29 12:19:27,408 - __main__ - INFO - 
6️⃣  Статистика использования токенов
2025-10-29 12:19:27,408 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:19:27,408 - src.utils.gigachat_client - INFO - 📊 ИТОГОВАЯ СТАТИСТИКА ИСПОЛЬЗОВАНИЯ ТОКЕНОВ
2025-10-29 12:19:27,408 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:19:27,408 - src.utils.gigachat_client - INFO - LLM запросов: 1
2025-10-29 12:19:27,408 - src.utils.gigachat_client - INFO -   Токенов в промптах: 385
2025-10-29 12:19:27,408 - src.utils.gigachat_client - INFO -   Токенов в ответах: 190
2025-10-29 12:19:27,408 - src.utils.gigachat_client - INFO -   Всего LLM токенов: 575
2025-10-29 12:19:27,408 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 12:19:27,408 - src.utils.gigachat_client - INFO - Embedding запросов: 2
2025-10-29 12:19:27,408 - src.utils.gigachat_client - INFO -   Embedding токенов: 184
2025-10-29 12:19:27,408 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 12:19:27,408 - src.utils.gigachat_client - INFO - ВСЕГО ТОКЕНОВ: 759
2025-10-29 12:19:27,408 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:19:27,408 - __main__ - INFO - 
======================================================================
2025-10-29 12:19:27,408 - __main__ - INFO - ✓ ГЕНЕРАЦИЯ ЗАВЕРШЕНА УСПЕШНО
2025-10-29 12:19:27,408 - __main__ - INFO - ======================================================================
2025-10-29 12:19:27,408 - __main__ - INFO - 📁 Результаты: quiz_result.json
2025-10-29 12:19:27,408 - __main__ - INFO - 📋 Логи: quiz_generation.log
2025-10-29 12:22:12,545 - __main__ - INFO - ======================================================================
2025-10-29 12:22:12,545 - __main__ - INFO - OBSIDIAN QUIZ PLUGIN - LANGGRAPH WORKFLOW
2025-10-29 12:22:12,545 - __main__ - INFO - ======================================================================
2025-10-29 12:22:12,545 - __main__ - INFO - 
1️⃣  Загрузка конфигурации
2025-10-29 12:22:12,545 - __main__ - INFO - 
2️⃣  Загрузка лекции: sample_lecture.txt
2025-10-29 12:22:12,545 - src.utils.helpers - INFO - ✓ Загружена лекция: sample_lecture.txt (1096 символов)
2025-10-29 12:22:12,545 - __main__ - INFO -    📄 Длина: 1096 символов
2025-10-29 12:22:12,545 - __main__ - INFO -    📝 Слов: ~131
2025-10-29 12:22:12,545 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-29 12:22:12,545 - src.agents.base_agent.EnhancedParserAgent - INFO - EnhancedParserAgent инициализирован
2025-10-29 12:22:12,623 - src.agents.enhanced_parser_agent - INFO - ✓ RAG компоненты инициализированы с подсчетом токенов
2025-10-29 12:22:12,623 - src.agents.enhanced_parser_agent - INFO - EnhancedParserAgent инициализирован (RAG=ON, WebSearch=OFF)
2025-10-29 12:22:12,623 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-29 12:22:12,623 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-29 12:22:12,623 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов, типы: ['multiple_choice', 'true_false', 'short_answer']
2025-10-29 12:22:12,623 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-29 12:22:12,623 - src.langgraph.workflow - INFO - Workflow скомпилирован: parser → quiz_generator → END
2025-10-29 12:22:12,623 - src.langgraph.workflow - INFO - QuizGenerationWorkflow инициализирован (RAG=True, WebSearch=False)
2025-10-29 12:22:12,623 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-29 12:22:12,623 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-29 12:22:12,623 - src.langgraph.workflow - INFO - Запуск workflow с лекцией (1096 символов)
2025-10-29 12:22:12,623 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-29 12:22:12,623 - src.agents.enhanced_parser_agent - INFO - Parser Agent: начало обработки
2025-10-29 12:22:12,623 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-29 12:22:12,623 - src.agents.enhanced_parser_agent - INFO - 📝 Обработка лекции: 1096 символов
2025-10-29 12:22:12,623 - src.agents.enhanced_parser_agent - INFO - 🔍 Использование RAG для обработки текста
2025-10-29 12:22:12,623 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 1 - Разбиение текста на чанки
2025-10-29 12:22:12,623 - src.agents.enhanced_parser_agent - INFO -    Создано 3 чанков
2025-10-29 12:22:12,623 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 2 - Создание векторного хранилища FAISS
2025-10-29 12:22:12,623 - src.agents.enhanced_parser_agent - INFO -    Генерация эмбеддингов для 3 чанков...
2025-10-29 12:22:12,748 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:22:12,890 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 12:22:12,906 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #1: tokens=170
2025-10-29 12:22:12,921 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-10-29 12:22:12,952 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-10-29 12:22:12,968 - langchain_community.vectorstores.faiss - WARNING - `embedding_function` is expected to be an Embeddings object, support for passing in a function will soon be removed.
2025-10-29 12:22:12,968 - src.agents.enhanced_parser_agent - INFO -    ✓ Векторное хранилище создано
2025-10-29 12:22:12,968 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 3 - Семантический поиск релевантных фрагментов
2025-10-29 12:22:12,968 - src.agents.enhanced_parser_agent - INFO -    Поиск по запросу: 'Какие основные концепции, определения и ключевые ф...'
2025-10-29 12:22:13,046 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 12:22:13,046 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #2: tokens=14
2025-10-29 12:22:13,046 - src.agents.enhanced_parser_agent - INFO -    ✓ Найдено 3 релевантных фрагментов
2025-10-29 12:22:13,046 - src.agents.enhanced_parser_agent - INFO -    Объединенный контекст: 1095 символов
2025-10-29 12:22:13,046 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 4 - Извлечение фактов через LLM
2025-10-29 12:22:13,124 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:22:14,656 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:22:14,656 - src.utils.gigachat_client - INFO - 📊 LLM запрос #1: prompt=385, completion=148, total=533
2025-10-29 12:22:14,656 - src.agents.enhanced_parser_agent - INFO -    Извлечено 9 фактов через LLM
2025-10-29 12:22:14,656 - src.agents.enhanced_parser_agent - INFO - ✓ RAG завершен: извлечено 9 фактов
2025-10-29 12:22:14,656 - src.agents.enhanced_parser_agent - INFO - ✓ Извлечено 9 ключевых фактов
2025-10-29 12:22:14,656 - src.agents.enhanced_parser_agent - INFO - ✓ Создано 9 концепций для Quiz Agent
2025-10-29 12:22:14,656 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:22:14,656 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-29 12:22:14,656 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:22:14,656 - src.agents.adapted_quiz_agent - INFO - Получено 9 концепций от Parser Agent
2025-10-29 12:22:14,656 - src.agents.quiz_agent - INFO - Начало генерации квиза
2025-10-29 12:22:14,656 - src.agents.quiz_agent - INFO - Обнаружено 9 концепций
2025-10-29 12:22:14,656 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Квантовая механика — фундаментальная физическая те
2025-10-29 12:22:14,656 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: name 'HumanMessage' is not defined
2025-10-29 12:22:14,656 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 12:22:14,656 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Квантовая механика — фундаментальная физическая те': 'QuizAgent' object has no attribute '_build_simplified_prompt'
2025-10-29 12:22:14,656 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-29 12:22:14,656 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Квантовая система характеризуется волновой функцие
2025-10-29 12:22:14,656 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: name 'HumanMessage' is not defined
2025-10-29 12:22:14,656 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 12:22:14,665 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Квантовая система характеризуется волновой функцие': 'QuizAgent' object has no attribute '_build_simplified_prompt'
2025-10-29 12:22:14,665 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-29 12:22:14,665 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Энергия частиц квантуется, принимает дискретные зн
2025-10-29 12:22:14,665 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: name 'HumanMessage' is not defined
2025-10-29 12:22:14,665 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 12:22:14,665 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Энергия частиц квантуется, принимает дискретные зн': 'QuizAgent' object has no attribute '_build_simplified_prompt'
2025-10-29 12:22:14,665 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-29 12:22:14,665 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Уравнение Шрёдингера описывает изменение состояния
2025-10-29 12:22:14,665 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: name 'HumanMessage' is not defined
2025-10-29 12:22:14,665 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 12:22:14,665 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Уравнение Шрёдингера описывает изменение состояния': 'QuizAgent' object has no attribute '_build_simplified_prompt'
2025-10-29 12:22:14,665 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-29 12:22:14,665 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Неопределенность Гейзенберга ограничивает одноврем
2025-10-29 12:22:14,665 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: name 'HumanMessage' is not defined
2025-10-29 12:22:14,665 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 12:22:14,665 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Неопределенность Гейзенберга ограничивает одноврем': 'QuizAgent' object has no attribute '_build_simplified_prompt'
2025-10-29 12:22:14,665 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-29 12:22:14,665 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Система находится в суперпозиции состояний до изме
2025-10-29 12:22:14,665 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: name 'HumanMessage' is not defined
2025-10-29 12:22:14,665 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 12:22:14,665 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Система находится в суперпозиции состояний до изме': 'QuizAgent' object has no attribute '_build_simplified_prompt'
2025-10-29 12:22:14,665 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-29 12:22:14,665 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Приведённая постоянная Планка обозначается как ℏ =
2025-10-29 12:22:14,665 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: name 'HumanMessage' is not defined
2025-10-29 12:22:14,665 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 12:22:14,665 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Приведённая постоянная Планка обозначается как ℏ =': 'QuizAgent' object has no attribute '_build_simplified_prompt'
2025-10-29 12:22:14,665 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-29 12:22:14,665 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Соотношение неопределённостей: Δx⋅Δp ≥ ℏ/2
2025-10-29 12:22:14,665 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: name 'HumanMessage' is not defined
2025-10-29 12:22:14,665 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 12:22:14,665 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Соотношение неопределённостей: Δx⋅Δp ≥ ℏ/2': 'QuizAgent' object has no attribute '_build_simplified_prompt'
2025-10-29 12:22:14,665 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-29 12:22:14,665 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Конечное состояние квантовой системы определяется 
2025-10-29 12:22:14,665 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: name 'HumanMessage' is not defined
2025-10-29 12:22:14,665 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 12:22:14,665 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Конечное состояние квантовой системы определяется ': 'QuizAgent' object has no attribute '_build_simplified_prompt'
2025-10-29 12:22:14,665 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-29 12:22:14,665 - src.agents.quiz_agent - ERROR - Не удалось сгенерировать ни одного вопроса!
2025-10-29 12:22:14,665 - src.agents.adapted_quiz_agent - INFO - ✓ Сгенерировано 0 вопросов
2025-10-29 12:22:14,665 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по сложности: {}
2025-10-29 12:22:14,665 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по типам: {}
2025-10-29 12:22:14,665 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:22:14,665 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-29 12:22:14,665 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:22:14,665 - src.langgraph.workflow - INFO - Извлечено фактов: 9
2025-10-29 12:22:14,665 - src.langgraph.workflow - INFO - Создано концепций: 9
2025-10-29 12:22:14,665 - src.langgraph.workflow - INFO - Сгенерировано вопросов: 0
2025-10-29 12:22:14,665 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-29 12:22:14,665 - src.langgraph.workflow - INFO -   - Parser: извлечено 9 фактов
2025-10-29 12:22:14,665 - src.langgraph.workflow - INFO -   - Quiz: сгенерировано 0 вопросов
2025-10-29 12:22:14,665 - __main__ - INFO - 
5️⃣  Форматирование результатов
2025-10-29 12:22:14,665 - src.utils.helpers - INFO - ✓ Результаты сохранены: quiz_result.json
2025-10-29 12:22:14,665 - __main__ - INFO - 
6️⃣  Статистика использования токенов
2025-10-29 12:22:14,665 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:22:14,665 - src.utils.gigachat_client - INFO - 📊 ИТОГОВАЯ СТАТИСТИКА ИСПОЛЬЗОВАНИЯ ТОКЕНОВ
2025-10-29 12:22:14,665 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:22:14,665 - src.utils.gigachat_client - INFO - LLM запросов: 1
2025-10-29 12:22:14,665 - src.utils.gigachat_client - INFO -   Токенов в промптах: 385
2025-10-29 12:22:14,665 - src.utils.gigachat_client - INFO -   Токенов в ответах: 148
2025-10-29 12:22:14,665 - src.utils.gigachat_client - INFO -   Всего LLM токенов: 533
2025-10-29 12:22:14,665 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 12:22:14,665 - src.utils.gigachat_client - INFO - Embedding запросов: 2
2025-10-29 12:22:14,665 - src.utils.gigachat_client - INFO -   Embedding токенов: 184
2025-10-29 12:22:14,665 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 12:22:14,665 - src.utils.gigachat_client - INFO - ВСЕГО ТОКЕНОВ: 717
2025-10-29 12:22:14,665 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:22:14,665 - __main__ - INFO - 
======================================================================
2025-10-29 12:22:14,665 - __main__ - INFO - ✓ ГЕНЕРАЦИЯ ЗАВЕРШЕНА УСПЕШНО
2025-10-29 12:22:14,665 - __main__ - INFO - ======================================================================
2025-10-29 12:22:14,665 - __main__ - INFO - 📁 Результаты: quiz_result.json
2025-10-29 12:22:14,665 - __main__ - INFO - 📋 Логи: quiz_generation.log
2025-10-29 12:24:18,030 - __main__ - INFO - ======================================================================
2025-10-29 12:24:18,030 - __main__ - INFO - OBSIDIAN QUIZ PLUGIN - LANGGRAPH WORKFLOW
2025-10-29 12:24:18,030 - __main__ - INFO - ======================================================================
2025-10-29 12:24:18,030 - __main__ - INFO - 
1️⃣  Загрузка конфигурации
2025-10-29 12:24:18,030 - __main__ - INFO - 
2️⃣  Загрузка лекции: sample_lecture.txt
2025-10-29 12:24:18,030 - src.utils.helpers - INFO - ✓ Загружена лекция: sample_lecture.txt (1096 символов)
2025-10-29 12:24:18,030 - __main__ - INFO -    📄 Длина: 1096 символов
2025-10-29 12:24:18,030 - __main__ - INFO -    📝 Слов: ~131
2025-10-29 12:24:18,030 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-29 12:24:18,030 - src.agents.base_agent.EnhancedParserAgent - INFO - EnhancedParserAgent инициализирован
2025-10-29 12:24:18,108 - src.agents.enhanced_parser_agent - INFO - ✓ RAG компоненты инициализированы с подсчетом токенов
2025-10-29 12:24:18,108 - src.agents.enhanced_parser_agent - INFO - EnhancedParserAgent инициализирован (RAG=ON, WebSearch=OFF)
2025-10-29 12:24:18,108 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-29 12:24:18,108 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-29 12:24:18,108 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов, типы: ['multiple_choice', 'true_false', 'short_answer']
2025-10-29 12:24:18,108 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-29 12:24:18,108 - src.langgraph.workflow - INFO - Workflow скомпилирован: parser → quiz_generator → END
2025-10-29 12:24:18,108 - src.langgraph.workflow - INFO - QuizGenerationWorkflow инициализирован (RAG=True, WebSearch=False)
2025-10-29 12:24:18,108 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-29 12:24:18,108 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-29 12:24:18,108 - src.langgraph.workflow - INFO - Запуск workflow с лекцией (1096 символов)
2025-10-29 12:24:18,108 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-29 12:24:18,108 - src.agents.enhanced_parser_agent - INFO - Parser Agent: начало обработки
2025-10-29 12:24:18,108 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-29 12:24:18,108 - src.agents.enhanced_parser_agent - INFO - 📝 Обработка лекции: 1096 символов
2025-10-29 12:24:18,108 - src.agents.enhanced_parser_agent - INFO - 🔍 Использование RAG для обработки текста
2025-10-29 12:24:18,108 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 1 - Разбиение текста на чанки
2025-10-29 12:24:18,108 - src.agents.enhanced_parser_agent - INFO -    Создано 3 чанков
2025-10-29 12:24:18,108 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 2 - Создание векторного хранилища FAISS
2025-10-29 12:24:18,108 - src.agents.enhanced_parser_agent - INFO -    Генерация эмбеддингов для 3 чанков...
2025-10-29 12:24:18,233 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:24:18,383 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 12:24:18,397 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #1: tokens=170
2025-10-29 12:24:18,405 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-10-29 12:24:18,436 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-10-29 12:24:18,436 - langchain_community.vectorstores.faiss - WARNING - `embedding_function` is expected to be an Embeddings object, support for passing in a function will soon be removed.
2025-10-29 12:24:18,436 - src.agents.enhanced_parser_agent - INFO -    ✓ Векторное хранилище создано
2025-10-29 12:24:18,436 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 3 - Семантический поиск релевантных фрагментов
2025-10-29 12:24:18,436 - src.agents.enhanced_parser_agent - INFO -    Поиск по запросу: 'Какие основные концепции, определения и ключевые ф...'
2025-10-29 12:24:18,561 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 12:24:18,561 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #2: tokens=14
2025-10-29 12:24:18,561 - src.agents.enhanced_parser_agent - INFO -    ✓ Найдено 3 релевантных фрагментов
2025-10-29 12:24:18,561 - src.agents.enhanced_parser_agent - INFO -    Объединенный контекст: 1095 символов
2025-10-29 12:24:18,561 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 4 - Извлечение фактов через LLM
2025-10-29 12:24:18,639 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:24:20,078 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:24:20,078 - src.utils.gigachat_client - INFO - 📊 LLM запрос #1: prompt=385, completion=177, total=562
2025-10-29 12:24:20,078 - src.agents.enhanced_parser_agent - INFO -    Извлечено 9 фактов через LLM
2025-10-29 12:24:20,078 - src.agents.enhanced_parser_agent - INFO - ✓ RAG завершен: извлечено 9 фактов
2025-10-29 12:24:20,078 - src.agents.enhanced_parser_agent - INFO - ✓ Извлечено 9 ключевых фактов
2025-10-29 12:24:20,078 - src.agents.enhanced_parser_agent - INFO - ✓ Создано 9 концепций для Quiz Agent
2025-10-29 12:24:20,078 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:24:20,078 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-29 12:24:20,078 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:24:20,093 - src.agents.adapted_quiz_agent - INFO - Получено 9 концепций от Parser Agent
2025-10-29 12:24:20,093 - src.agents.quiz_agent - INFO - Начало генерации квиза
2025-10-29 12:24:20,093 - src.agents.quiz_agent - INFO - Обнаружено 9 концепций
2025-10-29 12:24:20,093 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Квантовая механика — раздел физики, изучающий пове
2025-10-29 12:24:20,156 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:24:21,345 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:24:21,345 - src.utils.gigachat_client - INFO - 📊 LLM запрос #2: prompt=738, completion=149, total=887
2025-10-29 12:24:21,345 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: 'QuizAgent' object has no attribute '_extract_json'
2025-10-29 12:24:21,345 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 12:24:22,253 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:24:22,253 - src.utils.gigachat_client - INFO - 📊 LLM запрос #3: prompt=120, completion=116, total=236
2025-10-29 12:24:22,253 - src.agents.quiz_agent - ERROR - ✗ Попытка 2 не удалась: 'QuizAgent' object has no attribute '_extract_json'
2025-10-29 12:24:22,253 - src.agents.quiz_agent - ERROR - Все попытки исчерпаны для 'Квантовая механика — раздел физики, изучающий пове'
2025-10-29 12:24:22,253 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Квантовая механика — раздел физики, изучающий пове': 'QuizAgent' object has no attribute '_create_fallback_question'
2025-10-29 12:24:22,253 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-29 12:24:22,253 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Основные принципы квантовой механики включают корп
2025-10-29 12:24:23,708 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:24:23,708 - src.utils.gigachat_client - INFO - 📊 LLM запрос #4: prompt=726, completion=187, total=913
2025-10-29 12:24:23,708 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: 'QuizAgent' object has no attribute '_extract_json'
2025-10-29 12:24:23,708 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 12:24:24,834 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:24:24,834 - src.utils.gigachat_client - INFO - 📊 LLM запрос #5: prompt=113, completion=147, total=260
2025-10-29 12:24:24,834 - src.agents.quiz_agent - ERROR - ✗ Попытка 2 не удалась: 'QuizAgent' object has no attribute '_extract_json'
2025-10-29 12:24:24,834 - src.agents.quiz_agent - ERROR - Все попытки исчерпаны для 'Основные принципы квантовой механики включают корп'
2025-10-29 12:24:24,834 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Основные принципы квантовой механики включают корп': 'QuizAgent' object has no attribute '_create_fallback_question'
2025-10-29 12:24:24,834 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-29 12:24:24,834 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Волновая функция (ψ(x,t)) полностью определяет сос
2025-10-29 12:24:26,398 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:24:26,398 - src.utils.gigachat_client - INFO - 📊 LLM запрос #6: prompt=727, completion=211, total=938
2025-10-29 12:24:26,398 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: 'QuizAgent' object has no attribute '_extract_json'
2025-10-29 12:24:26,398 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 12:24:27,368 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:24:27,368 - src.utils.gigachat_client - INFO - 📊 LLM запрос #7: prompt=123, completion=120, total=243
2025-10-29 12:24:27,368 - src.agents.quiz_agent - ERROR - ✗ Попытка 2 не удалась: 'QuizAgent' object has no attribute '_extract_json'
2025-10-29 12:24:27,368 - src.agents.quiz_agent - ERROR - Все попытки исчерпаны для 'Волновая функция (ψ(x,t)) полностью определяет сос'
2025-10-29 12:24:27,368 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Волновая функция (ψ(x,t)) полностью определяет сос': 'QuizAgent' object has no attribute '_create_fallback_question'
2025-10-29 12:24:27,368 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-29 12:24:27,368 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Энергия микрочастиц принимает строго определённые 
2025-10-29 12:24:28,479 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:24:28,479 - src.utils.gigachat_client - INFO - 📊 LLM запрос #8: prompt=678, completion=143, total=821
2025-10-29 12:24:28,479 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: 'QuizAgent' object has no attribute '_extract_json'
2025-10-29 12:24:28,479 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 12:24:29,199 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:24:29,199 - src.utils.gigachat_client - INFO - 📊 LLM запрос #9: prompt=111, completion=90, total=201
2025-10-29 12:24:29,199 - src.agents.quiz_agent - ERROR - ✗ Попытка 2 не удалась: 'QuizAgent' object has no attribute '_extract_json'
2025-10-29 12:24:29,199 - src.agents.quiz_agent - ERROR - Все попытки исчерпаны для 'Энергия микрочастиц принимает строго определённые '
2025-10-29 12:24:29,199 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Энергия микрочастиц принимает строго определённые ': 'QuizAgent' object has no attribute '_create_fallback_question'
2025-10-29 12:24:29,199 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-29 12:24:29,199 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Уравнение Шрёдингера используется для описания эво
2025-10-29 12:24:30,371 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:24:30,371 - src.utils.gigachat_client - INFO - 📊 LLM запрос #10: prompt=683, completion=144, total=827
2025-10-29 12:24:30,371 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: 'QuizAgent' object has no attribute '_extract_json'
2025-10-29 12:24:30,371 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 12:24:31,340 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:24:31,340 - src.utils.gigachat_client - INFO - 📊 LLM запрос #11: prompt=116, completion=123, total=239
2025-10-29 12:24:31,340 - src.agents.quiz_agent - ERROR - ✗ Попытка 2 не удалась: 'QuizAgent' object has no attribute '_extract_json'
2025-10-29 12:24:31,340 - src.agents.quiz_agent - ERROR - Все попытки исчерпаны для 'Уравнение Шрёдингера используется для описания эво'
2025-10-29 12:24:31,340 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Уравнение Шрёдингера используется для описания эво': 'QuizAgent' object has no attribute '_create_fallback_question'
2025-10-29 12:24:31,340 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-29 12:24:31,340 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Неопределённость координат и импульса частицы опис
2025-10-29 12:24:32,499 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:24:32,499 - src.utils.gigachat_client - INFO - 📊 LLM запрос #12: prompt=702, completion=144, total=846
2025-10-29 12:24:32,499 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: 'QuizAgent' object has no attribute '_extract_json'
2025-10-29 12:24:32,499 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 12:24:33,531 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:24:33,531 - src.utils.gigachat_client - INFO - 📊 LLM запрос #13: prompt=115, completion=133, total=248
2025-10-29 12:24:33,531 - src.agents.quiz_agent - ERROR - ✗ Попытка 2 не удалась: 'QuizAgent' object has no attribute '_extract_json'
2025-10-29 12:24:33,531 - src.agents.quiz_agent - ERROR - Все попытки исчерпаны для 'Неопределённость координат и импульса частицы опис'
2025-10-29 12:24:33,531 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Неопределённость координат и импульса частицы опис': 'QuizAgent' object has no attribute '_create_fallback_question'
2025-10-29 12:24:33,531 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-29 12:24:33,531 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Квантовые системы способны находиться сразу в неск
2025-10-29 12:24:34,783 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:24:34,783 - src.utils.gigachat_client - INFO - 📊 LLM запрос #14: prompt=731, completion=164, total=895
2025-10-29 12:24:34,783 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: 'QuizAgent' object has no attribute '_extract_json'
2025-10-29 12:24:34,783 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 12:24:35,486 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:24:35,486 - src.utils.gigachat_client - INFO - 📊 LLM запрос #15: prompt=109, completion=85, total=194
2025-10-29 12:24:35,486 - src.agents.quiz_agent - ERROR - ✗ Попытка 2 не удалась: 'QuizAgent' object has no attribute '_extract_json'
2025-10-29 12:24:35,486 - src.agents.quiz_agent - ERROR - Все попытки исчерпаны для 'Квантовые системы способны находиться сразу в неск'
2025-10-29 12:24:35,486 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Квантовые системы способны находиться сразу в неск': 'QuizAgent' object has no attribute '_create_fallback_question'
2025-10-29 12:24:35,486 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-29 12:24:35,486 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Приведённая постоянная Планка обозначается символо
2025-10-29 12:24:36,489 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:24:36,489 - src.utils.gigachat_client - INFO - 📊 LLM запрос #16: prompt=672, completion=124, total=796
2025-10-29 12:24:36,489 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: 'QuizAgent' object has no attribute '_extract_json'
2025-10-29 12:24:36,489 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 12:24:37,161 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:24:37,161 - src.utils.gigachat_client - INFO - 📊 LLM запрос #17: prompt=110, completion=80, total=190
2025-10-29 12:24:37,161 - src.agents.quiz_agent - ERROR - ✗ Попытка 2 не удалась: 'QuizAgent' object has no attribute '_extract_json'
2025-10-29 12:24:37,161 - src.agents.quiz_agent - ERROR - Все попытки исчерпаны для 'Приведённая постоянная Планка обозначается символо'
2025-10-29 12:24:37,161 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Приведённая постоянная Планка обозначается символо': 'QuizAgent' object has no attribute '_create_fallback_question'
2025-10-29 12:24:37,161 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-29 12:24:37,161 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для концепции: Микроскопические объекты обладают волновыми свойст
2025-10-29 12:24:38,398 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:24:38,398 - src.utils.gigachat_client - INFO - 📊 LLM запрос #18: prompt=679, completion=148, total=827
2025-10-29 12:24:38,398 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: 'QuizAgent' object has no attribute '_extract_json'
2025-10-29 12:24:38,398 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 12:24:39,680 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:24:39,680 - src.utils.gigachat_client - INFO - 📊 LLM запрос #19: prompt=108, completion=159, total=267
2025-10-29 12:24:39,680 - src.agents.quiz_agent - ERROR - ✗ Попытка 2 не удалась: 'QuizAgent' object has no attribute '_extract_json'
2025-10-29 12:24:39,680 - src.agents.quiz_agent - ERROR - Все попытки исчерпаны для 'Микроскопические объекты обладают волновыми свойст'
2025-10-29 12:24:39,680 - src.agents.quiz_agent - ERROR - Ошибка генерации вопроса 1 для 'Микроскопические объекты обладают волновыми свойст': 'QuizAgent' object has no attribute '_create_fallback_question'
2025-10-29 12:24:39,680 - src.agents.quiz_agent - INFO - Успешно сгенерировано 0 вопросов
2025-10-29 12:24:39,680 - src.agents.quiz_agent - ERROR - Не удалось сгенерировать ни одного вопроса!
2025-10-29 12:24:39,680 - src.agents.adapted_quiz_agent - INFO - ✓ Сгенерировано 0 вопросов
2025-10-29 12:24:39,680 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по сложности: {}
2025-10-29 12:24:39,680 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по типам: {}
2025-10-29 12:24:39,680 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:24:39,680 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-29 12:24:39,680 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:24:39,680 - src.langgraph.workflow - INFO - Извлечено фактов: 9
2025-10-29 12:24:39,680 - src.langgraph.workflow - INFO - Создано концепций: 9
2025-10-29 12:24:39,680 - src.langgraph.workflow - INFO - Сгенерировано вопросов: 0
2025-10-29 12:24:39,680 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-29 12:24:39,680 - src.langgraph.workflow - INFO -   - Parser: извлечено 9 фактов
2025-10-29 12:24:39,680 - src.langgraph.workflow - INFO -   - Quiz: сгенерировано 0 вопросов
2025-10-29 12:24:39,680 - __main__ - INFO - 
5️⃣  Форматирование результатов
2025-10-29 12:24:39,680 - src.utils.helpers - INFO - ✓ Результаты сохранены: quiz_result.json
2025-10-29 12:24:39,680 - __main__ - INFO - 
6️⃣  Статистика использования токенов
2025-10-29 12:24:39,680 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:24:39,680 - src.utils.gigachat_client - INFO - 📊 ИТОГОВАЯ СТАТИСТИКА ИСПОЛЬЗОВАНИЯ ТОКЕНОВ
2025-10-29 12:24:39,680 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:24:39,680 - src.utils.gigachat_client - INFO - LLM запросов: 19
2025-10-29 12:24:39,680 - src.utils.gigachat_client - INFO -   Токенов в промптах: 7,746
2025-10-29 12:24:39,680 - src.utils.gigachat_client - INFO -   Токенов в ответах: 2,644
2025-10-29 12:24:39,680 - src.utils.gigachat_client - INFO -   Всего LLM токенов: 10,390
2025-10-29 12:24:39,680 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 12:24:39,680 - src.utils.gigachat_client - INFO - Embedding запросов: 2
2025-10-29 12:24:39,680 - src.utils.gigachat_client - INFO -   Embedding токенов: 184
2025-10-29 12:24:39,680 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 12:24:39,680 - src.utils.gigachat_client - INFO - ВСЕГО ТОКЕНОВ: 10,574
2025-10-29 12:24:39,680 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:24:39,680 - __main__ - INFO - 
======================================================================
2025-10-29 12:24:39,680 - __main__ - INFO - ✓ ГЕНЕРАЦИЯ ЗАВЕРШЕНА УСПЕШНО
2025-10-29 12:24:39,680 - __main__ - INFO - ======================================================================
2025-10-29 12:24:39,680 - __main__ - INFO - 📁 Результаты: quiz_result.json
2025-10-29 12:24:39,680 - __main__ - INFO - 📋 Логи: quiz_generation.log
2025-10-29 12:26:30,227 - __main__ - INFO - ======================================================================
2025-10-29 12:26:30,227 - __main__ - INFO - OBSIDIAN QUIZ PLUGIN - LANGGRAPH WORKFLOW
2025-10-29 12:26:30,227 - __main__ - INFO - ======================================================================
2025-10-29 12:26:30,227 - __main__ - INFO - 
1️⃣  Загрузка конфигурации
2025-10-29 12:26:30,229 - __main__ - INFO - 
2️⃣  Загрузка лекции: sample_lecture.txt
2025-10-29 12:26:30,229 - src.utils.helpers - INFO - ✓ Загружена лекция: sample_lecture.txt (1096 символов)
2025-10-29 12:26:30,229 - __main__ - INFO -    📄 Длина: 1096 символов
2025-10-29 12:26:30,229 - __main__ - INFO -    📝 Слов: ~131
2025-10-29 12:26:30,229 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-29 12:26:30,229 - src.agents.base_agent.EnhancedParserAgent - INFO - EnhancedParserAgent инициализирован
2025-10-29 12:26:30,290 - src.agents.enhanced_parser_agent - INFO - ✓ RAG компоненты инициализированы с подсчетом токенов
2025-10-29 12:26:30,290 - src.agents.enhanced_parser_agent - INFO - EnhancedParserAgent инициализирован (RAG=ON, WebSearch=OFF)
2025-10-29 12:26:30,290 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-29 12:26:30,290 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-29 12:26:30,290 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов
2025-10-29 12:26:30,290 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-29 12:26:30,290 - src.langgraph.workflow - INFO - Workflow скомпилирован: parser → quiz_generator → END
2025-10-29 12:26:30,290 - src.langgraph.workflow - INFO - QuizGenerationWorkflow инициализирован (RAG=True, WebSearch=False)
2025-10-29 12:26:30,290 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-29 12:26:30,290 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-29 12:26:30,290 - src.langgraph.workflow - INFO - Запуск workflow с лекцией (1096 символов)
2025-10-29 12:26:30,290 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-29 12:26:30,290 - src.agents.enhanced_parser_agent - INFO - Parser Agent: начало обработки
2025-10-29 12:26:30,290 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-29 12:26:30,290 - src.agents.enhanced_parser_agent - INFO - 📝 Обработка лекции: 1096 символов
2025-10-29 12:26:30,290 - src.agents.enhanced_parser_agent - INFO - 🔍 Использование RAG для обработки текста
2025-10-29 12:26:30,290 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 1 - Разбиение текста на чанки
2025-10-29 12:26:30,290 - src.agents.enhanced_parser_agent - INFO -    Создано 3 чанков
2025-10-29 12:26:30,290 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 2 - Создание векторного хранилища FAISS
2025-10-29 12:26:30,290 - src.agents.enhanced_parser_agent - INFO -    Генерация эмбеддингов для 3 чанков...
2025-10-29 12:26:30,439 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:26:30,588 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 12:26:30,604 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #1: tokens=170
2025-10-29 12:26:30,615 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-10-29 12:26:30,640 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-10-29 12:26:30,640 - langchain_community.vectorstores.faiss - WARNING - `embedding_function` is expected to be an Embeddings object, support for passing in a function will soon be removed.
2025-10-29 12:26:30,640 - src.agents.enhanced_parser_agent - INFO -    ✓ Векторное хранилище создано
2025-10-29 12:26:30,640 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 3 - Семантический поиск релевантных фрагментов
2025-10-29 12:26:30,640 - src.agents.enhanced_parser_agent - INFO -    Поиск по запросу: 'Какие основные концепции, определения и ключевые ф...'
2025-10-29 12:26:30,765 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 12:26:30,767 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #2: tokens=14
2025-10-29 12:26:30,768 - src.agents.enhanced_parser_agent - INFO -    ✓ Найдено 3 релевантных фрагментов
2025-10-29 12:26:30,768 - src.agents.enhanced_parser_agent - INFO -    Объединенный контекст: 1095 символов
2025-10-29 12:26:30,768 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 4 - Извлечение фактов через LLM
2025-10-29 12:26:30,839 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:26:32,310 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:26:32,326 - src.utils.gigachat_client - INFO - 📊 LLM запрос #1: prompt=385, completion=193, total=578
2025-10-29 12:26:32,326 - src.agents.enhanced_parser_agent - INFO -    Извлечено 9 фактов через LLM
2025-10-29 12:26:32,326 - src.agents.enhanced_parser_agent - INFO - ✓ RAG завершен: извлечено 9 фактов
2025-10-29 12:26:32,326 - src.agents.enhanced_parser_agent - INFO - ✓ Извлечено 9 ключевых фактов
2025-10-29 12:26:32,326 - src.agents.enhanced_parser_agent - INFO - ✓ Создано 9 концепций для Quiz Agent
2025-10-29 12:26:32,326 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:26:32,326 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-29 12:26:32,326 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:26:32,326 - src.agents.adapted_quiz_agent - INFO - Получено 9 концепций от Parser Agent
2025-10-29 12:26:32,326 - src.agents.quiz_agent - INFO - Начало генерации квиза
2025-10-29 12:26:32,326 - src.agents.quiz_agent - INFO - Обнаружено 9 концепций
2025-10-29 12:26:32,326 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Квантовая механика — фундаментальная физическая те
2025-10-29 12:26:32,388 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:26:33,756 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:26:33,757 - src.utils.gigachat_client - INFO - 📊 LLM запрос #2: prompt=203, completion=179, total=382
2025-10-29 12:26:33,758 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Квантовая механика — фундаментальная физическая те'
2025-10-29 12:26:33,759 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:26:33,759 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Основные концепции квантовой механики включают вол
2025-10-29 12:26:35,271 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:26:35,272 - src.utils.gigachat_client - INFO - 📊 LLM запрос #3: prompt=205, completion=210, total=415
2025-10-29 12:26:35,272 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Основные концепции квантовой механики включают вол'
2025-10-29 12:26:35,272 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:26:35,272 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Волновая функция (ψ(x,t)) представляет состояние к
2025-10-29 12:26:36,580 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:26:36,580 - src.utils.gigachat_client - INFO - 📊 LLM запрос #4: prompt=197, completion=175, total=372
2025-10-29 12:26:36,580 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Волновая функция (ψ(x,t)) представляет состояние к'
2025-10-29 12:26:36,580 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:26:36,595 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Электрон в атоме способен занимать только определё
2025-10-29 12:26:37,865 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:26:37,865 - src.utils.gigachat_client - INFO - 📊 LLM запрос #5: prompt=189, completion=166, total=355
2025-10-29 12:26:37,865 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Электрон в атоме способен занимать только определё'
2025-10-29 12:26:37,865 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:26:37,865 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Уравнение Шрёдингера определяет динамику эволюции 
2025-10-29 12:26:38,990 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:26:38,990 - src.utils.gigachat_client - INFO - 📊 LLM запрос #6: prompt=190, completion=150, total=340
2025-10-29 12:26:38,990 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Уравнение Шрёдингера определяет динамику эволюции '
2025-10-29 12:26:38,990 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:26:38,990 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Принцип неопределённости Гейзенберга устанавливает
2025-10-29 12:26:40,101 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:26:40,101 - src.utils.gigachat_client - INFO - 📊 LLM запрос #7: prompt=187, completion=140, total=327
2025-10-29 12:26:40,101 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Принцип неопределённости Гейзенберга устанавливает'
2025-10-29 12:26:40,101 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:26:40,101 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Квантовые системы способны находиться в суперпозиц
2025-10-29 12:26:41,149 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:26:41,149 - src.utils.gigachat_client - INFO - 📊 LLM запрос #8: prompt=204, completion=147, total=351
2025-10-29 12:26:41,149 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Квантовые системы способны находиться в суперпозиц'
2025-10-29 12:26:41,149 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:26:41,149 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Приведённая постоянная Планка (ℏ) играет ключевую 
2025-10-29 12:26:42,479 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:26:42,479 - src.utils.gigachat_client - INFO - 📊 LLM запрос #9: prompt=211, completion=188, total=399
2025-10-29 12:26:42,479 - src.agents.quiz_agent - WARNING - JSON невалиден, попытка исправления...
2025-10-29 12:26:42,479 - src.agents.quiz_agent - ERROR - Не удалось исправить JSON
2025-10-29 12:26:42,479 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: 1 validation error for Question
__root__
  Invalid \escape: line 1 column 61 (char 60) [type=value_error.jsondecode, input_value='{  "question_text": "П..."difficulty": "medium"}', input_type=str]
2025-10-29 12:26:42,479 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 12:26:44,075 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:26:44,075 - src.utils.gigachat_client - INFO - 📊 LLM запрос #10: prompt=104, completion=220, total=324
2025-10-29 12:26:44,075 - src.agents.quiz_agent - WARNING - JSON невалиден, попытка исправления...
2025-10-29 12:26:44,075 - src.agents.quiz_agent - ERROR - Не удалось исправить JSON
2025-10-29 12:26:44,090 - src.agents.quiz_agent - ERROR - ✗ Попытка 2 не удалась: 1 validation error for Question
__root__
  Invalid \escape: line 1 column 61 (char 60) [type=value_error.jsondecode, input_value='{  "question_text": "П...  "difficulty": "easy"}', input_type=str]
2025-10-29 12:26:44,090 - src.agents.quiz_agent - ERROR - Все попытки исчерпаны для 'Приведённая постоянная Планка (ℏ) играет ключевую '
2025-10-29 12:26:44,090 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:26:44,090 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Постоянная Планка (h) равна произведению скорости 
2025-10-29 12:26:45,467 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:26:45,467 - src.utils.gigachat_client - INFO - 📊 LLM запрос #11: prompt=202, completion=191, total=393
2025-10-29 12:26:45,467 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Постоянная Планка (h) равна произведению скорости '
2025-10-29 12:26:45,467 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:26:45,467 - src.agents.quiz_agent - INFO - Квиз сгенерирован: 7 вопросов
2025-10-29 12:26:45,467 - src.agents.adapted_quiz_agent - INFO - ✓ Сгенерировано 7 вопросов
2025-10-29 12:26:45,467 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по сложности: {'easy': 3, 'medium': 4, 'hard': 0}
2025-10-29 12:26:45,467 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по типам: {'multiple_choice': 6, 'true_false': 0, 'short_answer': 1}
2025-10-29 12:26:45,467 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:26:45,467 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-29 12:26:45,467 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:26:45,467 - src.langgraph.workflow - INFO - Извлечено фактов: 9
2025-10-29 12:26:45,467 - src.langgraph.workflow - INFO - Создано концепций: 9
2025-10-29 12:26:45,467 - src.langgraph.workflow - INFO - Сгенерировано вопросов: 7
2025-10-29 12:26:45,467 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-29 12:26:45,467 - src.langgraph.workflow - INFO -   - Parser: извлечено 9 фактов
2025-10-29 12:26:45,467 - src.langgraph.workflow - INFO -   - Quiz: сгенерировано 7 вопросов
2025-10-29 12:26:45,467 - __main__ - INFO - 
5️⃣  Форматирование результатов
2025-10-29 12:26:45,467 - src.utils.helpers - INFO - ✓ Результаты сохранены: quiz_result.json
2025-10-29 12:26:45,467 - __main__ - INFO - 
6️⃣  Статистика использования токенов
2025-10-29 12:26:45,467 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:26:45,467 - src.utils.gigachat_client - INFO - 📊 ИТОГОВАЯ СТАТИСТИКА ИСПОЛЬЗОВАНИЯ ТОКЕНОВ
2025-10-29 12:26:45,467 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:26:45,467 - src.utils.gigachat_client - INFO - LLM запросов: 11
2025-10-29 12:26:45,467 - src.utils.gigachat_client - INFO -   Токенов в промптах: 2,277
2025-10-29 12:26:45,467 - src.utils.gigachat_client - INFO -   Токенов в ответах: 1,959
2025-10-29 12:26:45,467 - src.utils.gigachat_client - INFO -   Всего LLM токенов: 4,236
2025-10-29 12:26:45,467 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 12:26:45,467 - src.utils.gigachat_client - INFO - Embedding запросов: 2
2025-10-29 12:26:45,467 - src.utils.gigachat_client - INFO -   Embedding токенов: 184
2025-10-29 12:26:45,467 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 12:26:45,467 - src.utils.gigachat_client - INFO - ВСЕГО ТОКЕНОВ: 4,420
2025-10-29 12:26:45,467 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:26:45,467 - __main__ - INFO - 
======================================================================
2025-10-29 12:26:45,467 - __main__ - INFO - ✓ ГЕНЕРАЦИЯ ЗАВЕРШЕНА УСПЕШНО
2025-10-29 12:26:45,467 - __main__ - INFO - ======================================================================
2025-10-29 12:26:45,467 - __main__ - INFO - 📁 Результаты: quiz_result.json
2025-10-29 12:26:45,467 - __main__ - INFO - 📋 Логи: quiz_generation.log
2025-10-29 12:28:45,187 - __main__ - INFO - ======================================================================
2025-10-29 12:28:45,187 - __main__ - INFO - OBSIDIAN QUIZ PLUGIN - LANGGRAPH WORKFLOW
2025-10-29 12:28:45,187 - __main__ - INFO - ======================================================================
2025-10-29 12:28:45,187 - __main__ - INFO - 
1️⃣  Загрузка конфигурации
2025-10-29 12:28:45,187 - __main__ - INFO - 
2️⃣  Загрузка лекции: sample_lecture.txt
2025-10-29 12:28:45,187 - src.utils.helpers - INFO - ✓ Загружена лекция: sample_lecture.txt (1096 символов)
2025-10-29 12:28:45,187 - __main__ - INFO -    📄 Длина: 1096 символов
2025-10-29 12:28:45,187 - __main__ - INFO -    📝 Слов: ~131
2025-10-29 12:28:45,187 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-29 12:28:45,187 - src.agents.base_agent.EnhancedParserAgent - INFO - EnhancedParserAgent инициализирован
2025-10-29 12:28:45,265 - src.agents.enhanced_parser_agent - INFO - ✓ RAG компоненты инициализированы с подсчетом токенов
2025-10-29 12:28:45,265 - src.agents.enhanced_parser_agent - INFO - EnhancedParserAgent инициализирован (RAG=ON, WebSearch=OFF)
2025-10-29 12:28:45,265 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-29 12:28:45,265 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-29 12:28:45,265 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов
2025-10-29 12:28:45,265 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-29 12:28:45,265 - src.langgraph.workflow - INFO - Workflow скомпилирован: parser → quiz_generator → END
2025-10-29 12:28:45,265 - src.langgraph.workflow - INFO - QuizGenerationWorkflow инициализирован (RAG=True, WebSearch=False)
2025-10-29 12:28:45,265 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-29 12:28:45,265 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-29 12:28:45,265 - src.langgraph.workflow - INFO - Запуск workflow с лекцией (1096 символов)
2025-10-29 12:28:45,265 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-29 12:28:45,265 - src.agents.enhanced_parser_agent - INFO - Parser Agent: начало обработки
2025-10-29 12:28:45,265 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-29 12:28:45,265 - src.agents.enhanced_parser_agent - INFO - 📝 Обработка лекции: 1096 символов
2025-10-29 12:28:45,265 - src.agents.enhanced_parser_agent - INFO - 🔍 Использование RAG для обработки текста
2025-10-29 12:28:45,265 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 1 - Разбиение текста на чанки
2025-10-29 12:28:45,265 - src.agents.enhanced_parser_agent - INFO -    Создано 3 чанков
2025-10-29 12:28:45,265 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 2 - Создание векторного хранилища FAISS
2025-10-29 12:28:45,265 - src.agents.enhanced_parser_agent - INFO -    Генерация эмбеддингов для 3 чанков...
2025-10-29 12:28:45,390 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:28:45,568 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 12:28:45,581 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #1: tokens=170
2025-10-29 12:28:45,593 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-10-29 12:28:45,627 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-10-29 12:28:45,632 - langchain_community.vectorstores.faiss - WARNING - `embedding_function` is expected to be an Embeddings object, support for passing in a function will soon be removed.
2025-10-29 12:28:45,632 - src.agents.enhanced_parser_agent - INFO -    ✓ Векторное хранилище создано
2025-10-29 12:28:45,632 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 3 - Семантический поиск релевантных фрагментов
2025-10-29 12:28:45,633 - src.agents.enhanced_parser_agent - INFO -    Поиск по запросу: 'Какие основные концепции, определения и ключевые ф...'
2025-10-29 12:28:45,750 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 12:28:45,752 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #2: tokens=14
2025-10-29 12:28:45,753 - src.agents.enhanced_parser_agent - INFO -    ✓ Найдено 3 релевантных фрагментов
2025-10-29 12:28:45,753 - src.agents.enhanced_parser_agent - INFO -    Объединенный контекст: 1095 символов
2025-10-29 12:28:45,753 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 4 - Извлечение фактов через LLM
2025-10-29 12:28:45,846 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:28:47,105 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:28:47,106 - src.utils.gigachat_client - INFO - 📊 LLM запрос #1: prompt=385, completion=159, total=544
2025-10-29 12:28:47,106 - src.agents.enhanced_parser_agent - INFO -    Извлечено 9 фактов через LLM
2025-10-29 12:28:47,106 - src.agents.enhanced_parser_agent - INFO - ✓ RAG завершен: извлечено 9 фактов
2025-10-29 12:28:47,107 - src.agents.enhanced_parser_agent - INFO - ✓ Извлечено 9 ключевых фактов
2025-10-29 12:28:47,107 - src.agents.enhanced_parser_agent - INFO - ✓ Создано 9 концепций для Quiz Agent
2025-10-29 12:28:47,107 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:28:47,108 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-29 12:28:47,108 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:28:47,108 - src.agents.adapted_quiz_agent - INFO - Получено 9 концепций от Parser Agent
2025-10-29 12:28:47,108 - src.agents.quiz_agent - INFO - Начало генерации квиза
2025-10-29 12:28:47,109 - src.agents.quiz_agent - INFO - Обнаружено 9 концепций
2025-10-29 12:28:47,109 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Квантовая механика — раздел физики, изучающий пове
2025-10-29 12:28:47,173 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:28:48,283 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:28:48,283 - src.utils.gigachat_client - INFO - 📊 LLM запрос #2: prompt=208, completion=132, total=340
2025-10-29 12:28:48,283 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Квантовая механика — раздел физики, изучающий пове'
2025-10-29 12:28:48,283 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:28:48,283 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Квантовая система описывается волновой функцией ψ(
2025-10-29 12:28:49,410 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:28:49,410 - src.utils.gigachat_client - INFO - 📊 LLM запрос #3: prompt=205, completion=146, total=351
2025-10-29 12:28:49,410 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Квантовая система описывается волновой функцией ψ('
2025-10-29 12:28:49,410 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:28:49,410 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Энергия в микромире квантуется (может принимать то
2025-10-29 12:28:50,676 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:28:50,676 - src.utils.gigachat_client - INFO - 📊 LLM запрос #4: prompt=195, completion=172, total=367
2025-10-29 12:28:50,676 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Энергия в микромире квантуется (может принимать то'
2025-10-29 12:28:50,676 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:28:50,676 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Уравнение Шрёдингера описывает динамику волновой ф
2025-10-29 12:28:51,630 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:28:51,645 - src.utils.gigachat_client - INFO - 📊 LLM запрос #5: prompt=188, completion=129, total=317
2025-10-29 12:28:51,645 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Уравнение Шрёдингера описывает динамику волновой ф'
2025-10-29 12:28:51,645 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:28:51,645 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Принцип неопределённости Гейзенберга устанавливает
2025-10-29 12:28:52,725 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:28:52,725 - src.utils.gigachat_client - INFO - 📊 LLM запрос #6: prompt=186, completion=145, total=331
2025-10-29 12:28:52,725 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Принцип неопределённости Гейзенберга устанавливает'
2025-10-29 12:28:52,725 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:28:52,725 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Состояния квантовых объектов могут находиться в су
2025-10-29 12:28:54,008 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:28:54,008 - src.utils.gigachat_client - INFO - 📊 LLM запрос #7: prompt=188, completion=178, total=366
2025-10-29 12:28:54,008 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Состояния квантовых объектов могут находиться в су'
2025-10-29 12:28:54,008 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:28:54,008 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Приведённая постоянная Планка обозначается как ℏ =
2025-10-29 12:28:55,118 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:28:55,118 - src.utils.gigachat_client - INFO - 📊 LLM запрос #8: prompt=190, completion=141, total=331
2025-10-29 12:28:55,118 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Приведённая постоянная Планка обозначается как ℏ ='
2025-10-29 12:28:55,118 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:28:55,118 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Формулировка принципа неопределённости: Δx·Δp ≥ ℏ/
2025-10-29 12:28:56,417 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:28:56,432 - src.utils.gigachat_client - INFO - 📊 LLM запрос #9: prompt=209, completion=168, total=377
2025-10-29 12:28:56,432 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Формулировка принципа неопределённости: Δx·Δp ≥ ℏ/'
2025-10-29 12:28:56,432 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:28:56,432 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Закон сохранения энергии действует только на квант
2025-10-29 12:28:57,714 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:28:57,714 - src.utils.gigachat_client - INFO - 📊 LLM запрос #10: prompt=196, completion=167, total=363
2025-10-29 12:28:57,714 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Закон сохранения энергии действует только на квант'
2025-10-29 12:28:57,714 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:28:57,714 - src.agents.quiz_agent - INFO - Квиз сгенерирован: 7 вопросов
2025-10-29 12:28:57,714 - src.agents.adapted_quiz_agent - INFO - ✓ Сгенерировано 7 вопросов
2025-10-29 12:28:57,714 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по сложности: {'easy': 5, 'medium': 2, 'hard': 0}
2025-10-29 12:28:57,714 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по типам: {'multiple_choice': 7, 'true_false': 0, 'short_answer': 0}
2025-10-29 12:28:57,714 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:28:57,714 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-29 12:28:57,714 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:28:57,714 - src.langgraph.workflow - INFO - Извлечено фактов: 9
2025-10-29 12:28:57,714 - src.langgraph.workflow - INFO - Создано концепций: 9
2025-10-29 12:28:57,714 - src.langgraph.workflow - INFO - Сгенерировано вопросов: 7
2025-10-29 12:28:57,714 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-29 12:28:57,714 - src.langgraph.workflow - INFO -   - Parser: извлечено 9 фактов
2025-10-29 12:28:57,714 - src.langgraph.workflow - INFO -   - Quiz: сгенерировано 7 вопросов
2025-10-29 12:28:57,714 - __main__ - INFO - 
5️⃣  Форматирование результатов
2025-10-29 12:28:57,714 - src.utils.helpers - INFO - ✓ Результаты сохранены: quiz_result.json
2025-10-29 12:28:57,714 - __main__ - INFO - 
6️⃣  Статистика использования токенов
2025-10-29 12:28:57,714 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:28:57,714 - src.utils.gigachat_client - INFO - 📊 ИТОГОВАЯ СТАТИСТИКА ИСПОЛЬЗОВАНИЯ ТОКЕНОВ
2025-10-29 12:28:57,714 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:28:57,714 - src.utils.gigachat_client - INFO - LLM запросов: 10
2025-10-29 12:28:57,714 - src.utils.gigachat_client - INFO -   Токенов в промптах: 2,150
2025-10-29 12:28:57,714 - src.utils.gigachat_client - INFO -   Токенов в ответах: 1,537
2025-10-29 12:28:57,714 - src.utils.gigachat_client - INFO -   Всего LLM токенов: 3,687
2025-10-29 12:28:57,714 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 12:28:57,714 - src.utils.gigachat_client - INFO - Embedding запросов: 2
2025-10-29 12:28:57,714 - src.utils.gigachat_client - INFO -   Embedding токенов: 184
2025-10-29 12:28:57,714 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 12:28:57,714 - src.utils.gigachat_client - INFO - ВСЕГО ТОКЕНОВ: 3,871
2025-10-29 12:28:57,714 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:28:57,714 - __main__ - INFO - 
======================================================================
2025-10-29 12:28:57,714 - __main__ - INFO - ✓ ГЕНЕРАЦИЯ ЗАВЕРШЕНА УСПЕШНО
2025-10-29 12:28:57,714 - __main__ - INFO - ======================================================================
2025-10-29 12:28:57,714 - __main__ - INFO - 📁 Результаты: quiz_result.json
2025-10-29 12:28:57,714 - __main__ - INFO - 📋 Логи: quiz_generation.log
2025-10-29 12:29:33,356 - __main__ - INFO - ======================================================================
2025-10-29 12:29:33,356 - __main__ - INFO - OBSIDIAN QUIZ PLUGIN - LANGGRAPH WORKFLOW
2025-10-29 12:29:33,356 - __main__ - INFO - ======================================================================
2025-10-29 12:29:33,356 - __main__ - INFO - 
1️⃣  Загрузка конфигурации
2025-10-29 12:29:33,356 - __main__ - INFO - 
2️⃣  Загрузка лекции: sample_lecture.txt
2025-10-29 12:29:33,356 - src.utils.helpers - INFO - ✓ Загружена лекция: sample_lecture.txt (1096 символов)
2025-10-29 12:29:33,356 - __main__ - INFO -    📄 Длина: 1096 символов
2025-10-29 12:29:33,356 - __main__ - INFO -    📝 Слов: ~131
2025-10-29 12:29:33,356 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-29 12:29:33,356 - src.agents.base_agent.EnhancedParserAgent - INFO - EnhancedParserAgent инициализирован
2025-10-29 12:29:33,426 - src.agents.enhanced_parser_agent - INFO - ✓ RAG компоненты инициализированы с подсчетом токенов
2025-10-29 12:29:33,426 - src.agents.enhanced_parser_agent - INFO - EnhancedParserAgent инициализирован (RAG=ON, WebSearch=OFF)
2025-10-29 12:29:33,426 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-29 12:29:33,426 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-29 12:29:33,426 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов
2025-10-29 12:29:33,426 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-29 12:29:33,426 - src.langgraph.workflow - INFO - Workflow скомпилирован: parser → quiz_generator → END
2025-10-29 12:29:33,426 - src.langgraph.workflow - INFO - QuizGenerationWorkflow инициализирован (RAG=True, WebSearch=False)
2025-10-29 12:29:33,426 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-29 12:29:33,426 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-29 12:29:33,426 - src.langgraph.workflow - INFO - Запуск workflow с лекцией (1096 символов)
2025-10-29 12:29:33,426 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-29 12:29:33,426 - src.agents.enhanced_parser_agent - INFO - Parser Agent: начало обработки
2025-10-29 12:29:33,426 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-29 12:29:33,426 - src.agents.enhanced_parser_agent - INFO - 📝 Обработка лекции: 1096 символов
2025-10-29 12:29:33,426 - src.agents.enhanced_parser_agent - INFO - 🔍 Использование RAG для обработки текста
2025-10-29 12:29:33,426 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 1 - Разбиение текста на чанки
2025-10-29 12:29:33,426 - src.agents.enhanced_parser_agent - INFO -    Создано 3 чанков
2025-10-29 12:29:33,426 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 2 - Создание векторного хранилища FAISS
2025-10-29 12:29:33,426 - src.agents.enhanced_parser_agent - INFO -    Генерация эмбеддингов для 3 чанков...
2025-10-29 12:29:33,551 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:29:33,707 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 12:29:33,723 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #1: tokens=170
2025-10-29 12:29:33,723 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-10-29 12:29:33,770 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-10-29 12:29:33,770 - langchain_community.vectorstores.faiss - WARNING - `embedding_function` is expected to be an Embeddings object, support for passing in a function will soon be removed.
2025-10-29 12:29:33,770 - src.agents.enhanced_parser_agent - INFO -    ✓ Векторное хранилище создано
2025-10-29 12:29:33,770 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 3 - Семантический поиск релевантных фрагментов
2025-10-29 12:29:33,770 - src.agents.enhanced_parser_agent - INFO -    Поиск по запросу: 'Какие основные концепции, определения и ключевые ф...'
2025-10-29 12:29:33,863 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 12:29:33,863 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #2: tokens=14
2025-10-29 12:29:33,879 - src.agents.enhanced_parser_agent - INFO -    ✓ Найдено 3 релевантных фрагментов
2025-10-29 12:29:33,879 - src.agents.enhanced_parser_agent - INFO -    Объединенный контекст: 1095 символов
2025-10-29 12:29:33,879 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 4 - Извлечение фактов через LLM
2025-10-29 12:29:33,942 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:29:35,616 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:29:35,616 - src.utils.gigachat_client - INFO - 📊 LLM запрос #1: prompt=385, completion=222, total=607
2025-10-29 12:29:35,616 - src.agents.enhanced_parser_agent - INFO -    Извлечено 10 фактов через LLM
2025-10-29 12:29:35,616 - src.agents.enhanced_parser_agent - INFO - ✓ RAG завершен: извлечено 10 фактов
2025-10-29 12:29:35,616 - src.agents.enhanced_parser_agent - INFO - ✓ Извлечено 10 ключевых фактов
2025-10-29 12:29:35,616 - src.agents.enhanced_parser_agent - INFO - ✓ Создано 10 концепций для Quiz Agent
2025-10-29 12:29:35,616 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:29:35,616 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-29 12:29:35,616 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:29:35,616 - src.agents.adapted_quiz_agent - INFO - Получено 10 концепций от Parser Agent
2025-10-29 12:29:35,616 - src.agents.quiz_agent - INFO - Начало генерации квиза
2025-10-29 12:29:35,616 - src.agents.quiz_agent - INFO - Обнаружено 10 концепций
2025-10-29 12:29:35,616 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Квантовая механика — фундаментальная физическая те
2025-10-29 12:29:35,679 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:29:36,976 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:29:36,976 - src.utils.gigachat_client - INFO - 📊 LLM запрос #2: prompt=214, completion=168, total=382
2025-10-29 12:29:36,976 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Квантовая механика — фундаментальная физическая те'
2025-10-29 12:29:36,976 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:29:36,976 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Основные понятия квантовой механики включают квант
2025-10-29 12:29:38,432 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:29:38,432 - src.utils.gigachat_client - INFO - 📊 LLM запрос #3: prompt=190, completion=181, total=371
2025-10-29 12:29:38,432 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Основные понятия квантовой механики включают квант'
2025-10-29 12:29:38,432 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:29:38,432 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Волновая функция ψ(x,t) полностью описывает состоя
2025-10-29 12:29:39,839 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:29:39,839 - src.utils.gigachat_client - INFO - 📊 LLM запрос #4: prompt=190, completion=190, total=380
2025-10-29 12:29:39,839 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Волновая функция ψ(x,t) полностью описывает состоя'
2025-10-29 12:29:39,839 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:29:39,839 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Энергия квантов (частиц микромира) принимает дискр
2025-10-29 12:29:41,231 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:29:41,231 - src.utils.gigachat_client - INFO - 📊 LLM запрос #5: prompt=214, completion=168, total=382
2025-10-29 12:29:41,231 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Энергия квантов (частиц микромира) принимает дискр'
2025-10-29 12:29:41,231 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:29:41,231 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Уравнение Шрёдингера определяет изменение состояни
2025-10-29 12:29:42,373 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:29:42,373 - src.utils.gigachat_client - INFO - 📊 LLM запрос #6: prompt=191, completion=150, total=341
2025-10-29 12:29:42,373 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Уравнение Шрёдингера определяет изменение состояни'
2025-10-29 12:29:42,373 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:29:42,373 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Принцип неопределённости Гейзенберга ограничивает 
2025-10-29 12:29:43,515 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:29:43,515 - src.utils.gigachat_client - INFO - 📊 LLM запрос #7: prompt=188, completion=152, total=340
2025-10-29 12:29:43,515 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Принцип неопределённости Гейзенберга ограничивает '
2025-10-29 12:29:43,515 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:29:43,515 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Квантовые системы способны пребывать в суперпозици
2025-10-29 12:29:44,688 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:29:44,688 - src.utils.gigachat_client - INFO - 📊 LLM запрос #8: prompt=194, completion=145, total=339
2025-10-29 12:29:44,688 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Квантовые системы способны пребывать в суперпозици'
2025-10-29 12:29:44,688 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:29:44,688 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Приведённая постоянная Планка обозначается символо
2025-10-29 12:29:45,604 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:29:45,604 - src.utils.gigachat_client - INFO - 📊 LLM запрос #9: prompt=199, completion=119, total=318
2025-10-29 12:29:45,604 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Приведённая постоянная Планка обозначается символо'
2025-10-29 12:29:45,604 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:29:45,604 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Формулировка принципа неопределённости: произведен
2025-10-29 12:29:47,162 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:29:47,163 - src.utils.gigachat_client - INFO - 📊 LLM запрос #10: prompt=204, completion=187, total=391
2025-10-29 12:29:47,164 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Формулировка принципа неопределённости: произведен'
2025-10-29 12:29:47,164 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:29:47,164 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Эволюция волновой функции подчиняется линейному ди
2025-10-29 12:29:48,442 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:29:48,442 - src.utils.gigachat_client - INFO - 📊 LLM запрос #11: prompt=201, completion=162, total=363
2025-10-29 12:29:48,442 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Эволюция волновой функции подчиняется линейному ди'
2025-10-29 12:29:48,442 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:29:48,442 - src.agents.quiz_agent - INFO - Квиз сгенерирован: 7 вопросов
2025-10-29 12:29:48,442 - src.agents.adapted_quiz_agent - INFO - ✓ Сгенерировано 7 вопросов
2025-10-29 12:29:48,442 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по сложности: {'easy': 4, 'medium': 3, 'hard': 0}
2025-10-29 12:29:48,442 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по типам: {'multiple_choice': 7, 'true_false': 0, 'short_answer': 0}
2025-10-29 12:29:48,442 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:29:48,442 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-29 12:29:48,442 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:29:48,442 - src.langgraph.workflow - INFO - Извлечено фактов: 10
2025-10-29 12:29:48,442 - src.langgraph.workflow - INFO - Создано концепций: 10
2025-10-29 12:29:48,442 - src.langgraph.workflow - INFO - Сгенерировано вопросов: 7
2025-10-29 12:29:48,442 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-29 12:29:48,442 - src.langgraph.workflow - INFO -   - Parser: извлечено 10 фактов
2025-10-29 12:29:48,442 - src.langgraph.workflow - INFO -   - Quiz: сгенерировано 7 вопросов
2025-10-29 12:29:48,442 - __main__ - INFO - 
5️⃣  Форматирование результатов
2025-10-29 12:29:48,458 - src.utils.helpers - INFO - ✓ Результаты сохранены: quiz_result.json
2025-10-29 12:29:48,458 - __main__ - INFO - 
6️⃣  Статистика использования токенов
2025-10-29 12:29:48,458 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:29:48,458 - src.utils.gigachat_client - INFO - 📊 ИТОГОВАЯ СТАТИСТИКА ИСПОЛЬЗОВАНИЯ ТОКЕНОВ
2025-10-29 12:29:48,458 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:29:48,458 - src.utils.gigachat_client - INFO - LLM запросов: 11
2025-10-29 12:29:48,458 - src.utils.gigachat_client - INFO -   Токенов в промптах: 2,370
2025-10-29 12:29:48,462 - src.utils.gigachat_client - INFO -   Токенов в ответах: 1,844
2025-10-29 12:29:48,462 - src.utils.gigachat_client - INFO -   Всего LLM токенов: 4,214
2025-10-29 12:29:48,462 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 12:29:48,462 - src.utils.gigachat_client - INFO - Embedding запросов: 2
2025-10-29 12:29:48,462 - src.utils.gigachat_client - INFO -   Embedding токенов: 184
2025-10-29 12:29:48,462 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 12:29:48,462 - src.utils.gigachat_client - INFO - ВСЕГО ТОКЕНОВ: 4,398
2025-10-29 12:29:48,462 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:29:48,462 - __main__ - INFO - 
======================================================================
2025-10-29 12:29:48,462 - __main__ - INFO - ✓ ГЕНЕРАЦИЯ ЗАВЕРШЕНА УСПЕШНО
2025-10-29 12:29:48,462 - __main__ - INFO - ======================================================================
2025-10-29 12:29:48,462 - __main__ - INFO - 📁 Результаты: quiz_result.json
2025-10-29 12:29:48,462 - __main__ - INFO - 📋 Логи: quiz_generation.log
2025-10-29 12:32:38,384 - __main__ - INFO - ======================================================================
2025-10-29 12:32:38,384 - __main__ - INFO - OBSIDIAN QUIZ PLUGIN - LANGGRAPH WORKFLOW
2025-10-29 12:32:38,384 - __main__ - INFO - ======================================================================
2025-10-29 12:32:38,384 - __main__ - INFO - 
1️⃣  Загрузка конфигурации
2025-10-29 12:32:38,384 - __main__ - INFO - 
2️⃣  Загрузка лекции: sample_lecture.txt
2025-10-29 12:32:38,384 - src.utils.helpers - INFO - ✓ Загружена лекция: sample_lecture.txt (1096 символов)
2025-10-29 12:32:38,384 - __main__ - INFO -    📄 Длина: 1096 символов
2025-10-29 12:32:38,384 - __main__ - INFO -    📝 Слов: ~131
2025-10-29 12:32:38,384 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-29 12:32:38,384 - src.agents.base_agent.EnhancedParserAgent - INFO - EnhancedParserAgent инициализирован
2025-10-29 12:32:38,446 - src.agents.enhanced_parser_agent - INFO - ✓ RAG компоненты инициализированы с подсчетом токенов
2025-10-29 12:32:38,446 - src.agents.enhanced_parser_agent - INFO - EnhancedParserAgent инициализирован (RAG=ON, WebSearch=OFF)
2025-10-29 12:32:38,446 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-29 12:32:38,446 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-29 12:32:38,446 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов
2025-10-29 12:32:38,446 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-29 12:32:38,446 - src.langgraph.workflow - INFO - Workflow скомпилирован: parser → quiz_generator → END
2025-10-29 12:32:38,446 - src.langgraph.workflow - INFO - QuizGenerationWorkflow инициализирован (RAG=True, WebSearch=False)
2025-10-29 12:32:38,446 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-29 12:32:38,446 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-29 12:32:38,446 - src.langgraph.workflow - INFO - Запуск workflow с лекцией (1096 символов)
2025-10-29 12:32:38,446 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-29 12:32:38,446 - src.agents.enhanced_parser_agent - INFO - Parser Agent: начало обработки
2025-10-29 12:32:38,460 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-29 12:32:38,460 - src.agents.enhanced_parser_agent - INFO - 📝 Обработка лекции: 1096 символов
2025-10-29 12:32:38,460 - src.agents.enhanced_parser_agent - INFO - 🔍 Использование RAG для обработки текста
2025-10-29 12:32:38,460 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 1 - Разбиение текста на чанки
2025-10-29 12:32:38,460 - src.agents.enhanced_parser_agent - INFO -    Создано 3 чанков
2025-10-29 12:32:38,460 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 2 - Создание векторного хранилища FAISS
2025-10-29 12:32:38,460 - src.agents.enhanced_parser_agent - INFO -    Генерация эмбеддингов для 3 чанков...
2025-10-29 12:32:38,583 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:32:38,746 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 12:32:38,746 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #1: tokens=170
2025-10-29 12:32:38,761 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-10-29 12:32:38,792 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-10-29 12:32:38,808 - langchain_community.vectorstores.faiss - WARNING - `embedding_function` is expected to be an Embeddings object, support for passing in a function will soon be removed.
2025-10-29 12:32:38,808 - src.agents.enhanced_parser_agent - INFO -    ✓ Векторное хранилище создано
2025-10-29 12:32:38,808 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 3 - Семантический поиск релевантных фрагментов
2025-10-29 12:32:38,808 - src.agents.enhanced_parser_agent - INFO -    Поиск по запросу: 'Какие основные концепции, определения и ключевые ф...'
2025-10-29 12:32:38,917 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 12:32:38,917 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #2: tokens=14
2025-10-29 12:32:38,917 - src.agents.enhanced_parser_agent - INFO -    ✓ Найдено 3 релевантных фрагментов
2025-10-29 12:32:38,917 - src.agents.enhanced_parser_agent - INFO -    Объединенный контекст: 1095 символов
2025-10-29 12:32:38,917 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 4 - Извлечение фактов через LLM
2025-10-29 12:32:38,995 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:32:40,244 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:32:40,244 - src.utils.gigachat_client - INFO - 📊 LLM запрос #1: prompt=385, completion=163, total=548
2025-10-29 12:32:40,244 - src.agents.enhanced_parser_agent - INFO -    Извлечено 9 фактов через LLM
2025-10-29 12:32:40,244 - src.agents.enhanced_parser_agent - INFO - ✓ RAG завершен: извлечено 9 фактов
2025-10-29 12:32:40,244 - src.agents.enhanced_parser_agent - INFO - ✓ Извлечено 9 ключевых фактов
2025-10-29 12:32:40,244 - src.agents.enhanced_parser_agent - INFO - ✓ Создано 9 концепций для Quiz Agent
2025-10-29 12:32:40,244 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:32:40,244 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-29 12:32:40,244 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:32:40,244 - src.agents.adapted_quiz_agent - INFO - Получено 9 концепций от Parser Agent
2025-10-29 12:32:40,244 - src.agents.quiz_agent - INFO - Начало генерации квиза
2025-10-29 12:32:40,244 - src.agents.quiz_agent - INFO - Обнаружено 9 концепций
2025-10-29 12:32:40,244 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Квантовая механика — фундаментальная физическая те
2025-10-29 12:32:40,306 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:32:41,521 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:32:41,521 - src.utils.gigachat_client - INFO - 📊 LLM запрос #2: prompt=302, completion=152, total=454
2025-10-29 12:32:41,521 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Квантовая механика — фундаментальная физическая те'
2025-10-29 12:32:41,521 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:32:41,521 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Основные понятия квантовой механики включают волно
2025-10-29 12:32:42,667 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:32:42,667 - src.utils.gigachat_client - INFO - 📊 LLM запрос #3: prompt=303, completion=146, total=449
2025-10-29 12:32:42,667 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Основные понятия квантовой механики включают волно'
2025-10-29 12:32:42,667 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:32:42,667 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Волновая функция (ψ(x,t)) полностью описывает сост
2025-10-29 12:32:43,481 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:32:43,481 - src.utils.gigachat_client - INFO - 📊 LLM запрос #4: prompt=304, completion=106, total=410
2025-10-29 12:32:43,481 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Волновая функция (ψ(x,t)) полностью описывает сост'
2025-10-29 12:32:43,481 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:32:43,481 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Электрон в атоме может занимать только определённы
2025-10-29 12:32:44,638 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:32:44,638 - src.utils.gigachat_client - INFO - 📊 LLM запрос #5: prompt=300, completion=158, total=458
2025-10-29 12:32:44,638 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Электрон в атоме может занимать только определённы'
2025-10-29 12:32:44,654 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:32:44,654 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Уравнение Шрёдингера описывает изменение состояния
2025-10-29 12:32:45,811 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:32:45,811 - src.utils.gigachat_client - INFO - 📊 LLM запрос #6: prompt=286, completion=146, total=432
2025-10-29 12:32:45,811 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Уравнение Шрёдингера описывает изменение состояния'
2025-10-29 12:32:45,811 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:32:45,811 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Неопределённость Гейзенберга утверждает невозможно
2025-10-29 12:32:46,795 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:32:46,795 - src.utils.gigachat_client - INFO - 📊 LLM запрос #7: prompt=300, completion=125, total=425
2025-10-29 12:32:46,795 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Неопределённость Гейзенберга утверждает невозможно'
2025-10-29 12:32:46,795 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:32:46,795 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Квантовые системы способны находиться в суперпозиц
2025-10-29 12:32:47,755 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:32:47,755 - src.utils.gigachat_client - INFO - 📊 LLM запрос #8: prompt=300, completion=129, total=429
2025-10-29 12:32:47,755 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Квантовые системы способны находиться в суперпозиц'
2025-10-29 12:32:47,755 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:32:47,755 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Приведённая постоянная Планка обозначается символо
2025-10-29 12:32:48,640 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:32:48,640 - src.utils.gigachat_client - INFO - 📊 LLM запрос #9: prompt=280, completion=113, total=393
2025-10-29 12:32:48,640 - src.agents.quiz_agent - WARNING - JSON невалиден, попытка исправления...
2025-10-29 12:32:48,640 - src.agents.quiz_agent - ERROR - Не удалось исправить JSON
2025-10-29 12:32:48,640 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: 1 validation error for Question
__root__
  Expecting ':' delimiter: line 1 column 9 (char 8) [type=value_error.jsondecode, input_value='{"     "question_text":"...,"difficulty":"easy"  }', input_type=str]
2025-10-29 12:32:48,640 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 12:32:49,768 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:32:49,768 - src.utils.gigachat_client - INFO - 📊 LLM запрос #10: prompt=97, completion=148, total=245
2025-10-29 12:32:49,768 - src.agents.quiz_agent - WARNING - JSON невалиден, попытка исправления...
2025-10-29 12:32:49,768 - src.agents.quiz_agent - ERROR - Не удалось исправить JSON
2025-10-29 12:32:49,768 - src.agents.quiz_agent - ERROR - ✗ Попытка 2 не удалась: 1 validation error for Question
__root__
  Invalid \escape: line 1 column 404 (char 403) [type=value_error.jsondecode, input_value='{  "question_text": "Ч...  "difficulty": "easy"}', input_type=str]
2025-10-29 12:32:49,768 - src.agents.quiz_agent - ERROR - Все попытки исчерпаны для 'Приведённая постоянная Планка обозначается символо'
2025-10-29 12:32:49,768 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:32:49,768 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Формулировка принципа неопределённости: Δx × Δp ≥ 
2025-10-29 12:32:51,064 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:32:51,064 - src.utils.gigachat_client - INFO - 📊 LLM запрос #11: prompt=290, completion=174, total=464
2025-10-29 12:32:51,064 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Формулировка принципа неопределённости: Δx × Δp ≥ '
2025-10-29 12:32:51,064 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:32:51,064 - src.agents.quiz_agent - INFO - Квиз сгенерирован: 7 вопросов
2025-10-29 12:32:51,064 - src.agents.adapted_quiz_agent - INFO - ✓ Сгенерировано 7 вопросов
2025-10-29 12:32:51,064 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по сложности: {'easy': 0, 'medium': 7, 'hard': 0}
2025-10-29 12:32:51,064 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по типам: {'multiple_choice': 7, 'true_false': 0, 'short_answer': 0}
2025-10-29 12:32:51,064 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:32:51,064 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-29 12:32:51,064 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:32:51,064 - src.langgraph.workflow - INFO - Извлечено фактов: 9
2025-10-29 12:32:51,064 - src.langgraph.workflow - INFO - Создано концепций: 9
2025-10-29 12:32:51,064 - src.langgraph.workflow - INFO - Сгенерировано вопросов: 7
2025-10-29 12:32:51,064 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-29 12:32:51,064 - src.langgraph.workflow - INFO -   - Parser: извлечено 9 фактов
2025-10-29 12:32:51,064 - src.langgraph.workflow - INFO -   - Quiz: сгенерировано 7 вопросов
2025-10-29 12:32:51,064 - __main__ - INFO - 
5️⃣  Форматирование результатов
2025-10-29 12:32:51,064 - src.utils.helpers - INFO - ✓ Результаты сохранены: quiz_result.json
2025-10-29 12:32:51,064 - __main__ - INFO - 
6️⃣  Статистика использования токенов
2025-10-29 12:32:51,064 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:32:51,064 - src.utils.gigachat_client - INFO - 📊 ИТОГОВАЯ СТАТИСТИКА ИСПОЛЬЗОВАНИЯ ТОКЕНОВ
2025-10-29 12:32:51,064 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:32:51,064 - src.utils.gigachat_client - INFO - LLM запросов: 11
2025-10-29 12:32:51,064 - src.utils.gigachat_client - INFO -   Токенов в промптах: 3,147
2025-10-29 12:32:51,064 - src.utils.gigachat_client - INFO -   Токенов в ответах: 1,560
2025-10-29 12:32:51,064 - src.utils.gigachat_client - INFO -   Всего LLM токенов: 4,707
2025-10-29 12:32:51,064 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 12:32:51,064 - src.utils.gigachat_client - INFO - Embedding запросов: 2
2025-10-29 12:32:51,064 - src.utils.gigachat_client - INFO -   Embedding токенов: 184
2025-10-29 12:32:51,064 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 12:32:51,064 - src.utils.gigachat_client - INFO - ВСЕГО ТОКЕНОВ: 4,891
2025-10-29 12:32:51,064 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:32:51,064 - __main__ - INFO - 
======================================================================
2025-10-29 12:32:51,064 - __main__ - INFO - ✓ ГЕНЕРАЦИЯ ЗАВЕРШЕНА УСПЕШНО
2025-10-29 12:32:51,064 - __main__ - INFO - ======================================================================
2025-10-29 12:32:51,064 - __main__ - INFO - 📁 Результаты: quiz_result.json
2025-10-29 12:32:51,064 - __main__ - INFO - 📋 Логи: quiz_generation.log
2025-10-29 12:33:58,542 - __main__ - INFO - ======================================================================
2025-10-29 12:33:58,542 - __main__ - INFO - OBSIDIAN QUIZ PLUGIN - LANGGRAPH WORKFLOW
2025-10-29 12:33:58,542 - __main__ - INFO - ======================================================================
2025-10-29 12:33:58,543 - __main__ - INFO - 
1️⃣  Загрузка конфигурации
2025-10-29 12:33:58,544 - __main__ - INFO - 
2️⃣  Загрузка лекции: sample_lecture.txt
2025-10-29 12:33:58,544 - src.utils.helpers - INFO - ✓ Загружена лекция: sample_lecture.txt (1096 символов)
2025-10-29 12:33:58,545 - __main__ - INFO -    📄 Длина: 1096 символов
2025-10-29 12:33:58,545 - __main__ - INFO -    📝 Слов: ~131
2025-10-29 12:33:58,545 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-29 12:33:58,545 - src.agents.base_agent.EnhancedParserAgent - INFO - EnhancedParserAgent инициализирован
2025-10-29 12:33:58,611 - src.agents.enhanced_parser_agent - INFO - ✓ RAG компоненты инициализированы с подсчетом токенов
2025-10-29 12:33:58,611 - src.agents.enhanced_parser_agent - INFO - EnhancedParserAgent инициализирован (RAG=ON, WebSearch=ON)
2025-10-29 12:33:58,611 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-29 12:33:58,611 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-29 12:33:58,611 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов
2025-10-29 12:33:58,611 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-29 12:33:58,611 - src.langgraph.workflow - INFO - Workflow скомпилирован: parser → quiz_generator → END
2025-10-29 12:33:58,611 - src.langgraph.workflow - INFO - QuizGenerationWorkflow инициализирован (RAG=True, WebSearch=True)
2025-10-29 12:33:58,611 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-29 12:33:58,611 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-29 12:33:58,611 - src.langgraph.workflow - INFO - Запуск workflow с лекцией (1096 символов)
2025-10-29 12:33:58,611 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-29 12:33:58,611 - src.agents.enhanced_parser_agent - INFO - Parser Agent: начало обработки
2025-10-29 12:33:58,611 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-29 12:33:58,611 - src.agents.enhanced_parser_agent - INFO - 📝 Обработка лекции: 1096 символов
2025-10-29 12:33:58,611 - src.agents.enhanced_parser_agent - INFO - 🔍 Использование RAG для обработки текста
2025-10-29 12:33:58,611 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 1 - Разбиение текста на чанки
2025-10-29 12:33:58,611 - src.agents.enhanced_parser_agent - INFO -    Создано 3 чанков
2025-10-29 12:33:58,611 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 2 - Создание векторного хранилища FAISS
2025-10-29 12:33:58,611 - src.agents.enhanced_parser_agent - INFO -    Генерация эмбеддингов для 3 чанков...
2025-10-29 12:33:58,736 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:33:58,877 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 12:33:58,892 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #1: tokens=170
2025-10-29 12:33:58,908 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-10-29 12:33:58,939 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-10-29 12:33:58,955 - langchain_community.vectorstores.faiss - WARNING - `embedding_function` is expected to be an Embeddings object, support for passing in a function will soon be removed.
2025-10-29 12:33:58,955 - src.agents.enhanced_parser_agent - INFO -    ✓ Векторное хранилище создано
2025-10-29 12:33:58,955 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 3 - Семантический поиск релевантных фрагментов
2025-10-29 12:33:58,955 - src.agents.enhanced_parser_agent - INFO -    Поиск по запросу: 'Какие основные концепции, определения и ключевые ф...'
2025-10-29 12:33:59,061 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 12:33:59,062 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #2: tokens=14
2025-10-29 12:33:59,063 - src.agents.enhanced_parser_agent - INFO -    ✓ Найдено 3 релевантных фрагментов
2025-10-29 12:33:59,063 - src.agents.enhanced_parser_agent - INFO -    Объединенный контекст: 1095 символов
2025-10-29 12:33:59,063 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 4 - Извлечение фактов через LLM
2025-10-29 12:33:59,128 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:34:00,410 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:34:00,410 - src.utils.gigachat_client - INFO - 📊 LLM запрос #1: prompt=385, completion=161, total=546
2025-10-29 12:34:00,410 - src.agents.enhanced_parser_agent - INFO -    Извлечено 9 фактов через LLM
2025-10-29 12:34:00,410 - src.agents.enhanced_parser_agent - INFO - ✓ RAG завершен: извлечено 9 фактов
2025-10-29 12:34:00,410 - src.agents.enhanced_parser_agent - INFO - ✓ Извлечено 9 ключевых фактов
2025-10-29 12:34:00,410 - src.agents.enhanced_parser_agent - INFO - ✓ Создано 9 концепций для Quiz Agent
2025-10-29 12:34:00,410 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:34:00,410 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-29 12:34:00,410 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:34:00,410 - src.agents.adapted_quiz_agent - INFO - Получено 9 концепций от Parser Agent
2025-10-29 12:34:00,410 - src.agents.quiz_agent - INFO - Начало генерации квиза
2025-10-29 12:34:00,410 - src.agents.quiz_agent - INFO - Обнаружено 9 концепций
2025-10-29 12:34:00,410 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Квантовая механика — фундаментальная физическая те
2025-10-29 12:34:00,472 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:34:01,879 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:34:01,879 - src.utils.gigachat_client - INFO - 📊 LLM запрос #2: prompt=290, completion=182, total=472
2025-10-29 12:34:01,879 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Квантовая механика — фундаментальная физическая те'
2025-10-29 12:34:01,879 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:34:01,879 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Квантовая система описывается волновой функцией ψ(
2025-10-29 12:34:02,755 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:34:02,755 - src.utils.gigachat_client - INFO - 📊 LLM запрос #3: prompt=301, completion=97, total=398
2025-10-29 12:34:02,755 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Квантовая система описывается волновой функцией ψ('
2025-10-29 12:34:02,755 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:34:02,755 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Энергия в микромире квантуется, принимая только ди
2025-10-29 12:34:03,959 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:34:03,959 - src.utils.gigachat_client - INFO - 📊 LLM запрос #4: prompt=289, completion=158, total=447
2025-10-29 12:34:03,959 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Энергия в микромире квантуется, принимая только ди'
2025-10-29 12:34:03,959 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:34:03,959 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Уравнение Шрёдингера описывает изменение состояния
2025-10-29 12:34:05,008 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:34:05,008 - src.utils.gigachat_client - INFO - 📊 LLM запрос #5: prompt=302, completion=132, total=434
2025-10-29 12:34:05,008 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Уравнение Шрёдингера описывает изменение состояния'
2025-10-29 12:34:05,008 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:34:05,008 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Принцип неопределённости Гейзенберга утверждает не
2025-10-29 12:34:06,023 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:34:06,023 - src.utils.gigachat_client - INFO - 📊 LLM запрос #6: prompt=288, completion=130, total=418
2025-10-29 12:34:06,023 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Принцип неопределённости Гейзенберга утверждает не'
2025-10-29 12:34:06,023 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:34:06,023 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Квантовые системы способны пребывать в суперпозици
2025-10-29 12:34:07,276 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:34:07,276 - src.utils.gigachat_client - INFO - 📊 LLM запрос #7: prompt=286, completion=166, total=452
2025-10-29 12:34:07,276 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Квантовые системы способны пребывать в суперпозици'
2025-10-29 12:34:07,276 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:34:07,276 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Приведённая постоянная Планка обозначается символо
2025-10-29 12:34:08,027 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:34:08,027 - src.utils.gigachat_client - INFO - 📊 LLM запрос #8: prompt=258, completion=98, total=356
2025-10-29 12:34:08,042 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Приведённая постоянная Планка обозначается символо'
2025-10-29 12:34:08,042 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:34:08,042 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Формула принципа неопределённости имеет вид Δx·Δp 
2025-10-29 12:34:09,200 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:34:09,200 - src.utils.gigachat_client - INFO - 📊 LLM запрос #9: prompt=288, completion=157, total=445
2025-10-29 12:34:09,200 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Формула принципа неопределённости имеет вид Δx·Δp '
2025-10-29 12:34:09,200 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:34:09,200 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Волновая функция включает полную информацию о сост
2025-10-29 12:34:10,404 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:34:10,404 - src.utils.gigachat_client - INFO - 📊 LLM запрос #10: prompt=281, completion=158, total=439
2025-10-29 12:34:10,404 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Волновая функция включает полную информацию о сост'
2025-10-29 12:34:10,404 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:34:10,404 - src.agents.quiz_agent - INFO - Квиз сгенерирован: 7 вопросов
2025-10-29 12:34:10,404 - src.agents.adapted_quiz_agent - INFO - ✓ Сгенерировано 7 вопросов
2025-10-29 12:34:10,404 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по сложности: {'easy': 1, 'medium': 6, 'hard': 0}
2025-10-29 12:34:10,404 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по типам: {'multiple_choice': 7, 'true_false': 0, 'short_answer': 0}
2025-10-29 12:34:10,404 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:34:10,404 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-29 12:34:10,404 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:34:10,404 - src.langgraph.workflow - INFO - Извлечено фактов: 9
2025-10-29 12:34:10,404 - src.langgraph.workflow - INFO - Создано концепций: 9
2025-10-29 12:34:10,404 - src.langgraph.workflow - INFO - Сгенерировано вопросов: 7
2025-10-29 12:34:10,404 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-29 12:34:10,404 - src.langgraph.workflow - INFO -   - Parser: извлечено 9 фактов
2025-10-29 12:34:10,404 - src.langgraph.workflow - INFO -   - Quiz: сгенерировано 7 вопросов
2025-10-29 12:34:10,404 - __main__ - INFO - 
5️⃣  Форматирование результатов
2025-10-29 12:34:10,404 - src.utils.helpers - INFO - ✓ Результаты сохранены: quiz_result.json
2025-10-29 12:34:10,404 - __main__ - INFO - 
6️⃣  Статистика использования токенов
2025-10-29 12:34:10,404 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:34:10,404 - src.utils.gigachat_client - INFO - 📊 ИТОГОВАЯ СТАТИСТИКА ИСПОЛЬЗОВАНИЯ ТОКЕНОВ
2025-10-29 12:34:10,404 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:34:10,404 - src.utils.gigachat_client - INFO - LLM запросов: 10
2025-10-29 12:34:10,404 - src.utils.gigachat_client - INFO -   Токенов в промптах: 2,968
2025-10-29 12:34:10,404 - src.utils.gigachat_client - INFO -   Токенов в ответах: 1,439
2025-10-29 12:34:10,404 - src.utils.gigachat_client - INFO -   Всего LLM токенов: 4,407
2025-10-29 12:34:10,404 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 12:34:10,404 - src.utils.gigachat_client - INFO - Embedding запросов: 2
2025-10-29 12:34:10,404 - src.utils.gigachat_client - INFO -   Embedding токенов: 184
2025-10-29 12:34:10,404 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 12:34:10,404 - src.utils.gigachat_client - INFO - ВСЕГО ТОКЕНОВ: 4,591
2025-10-29 12:34:10,404 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:34:10,404 - __main__ - INFO - 
======================================================================
2025-10-29 12:34:10,404 - __main__ - INFO - ✓ ГЕНЕРАЦИЯ ЗАВЕРШЕНА УСПЕШНО
2025-10-29 12:34:10,404 - __main__ - INFO - ======================================================================
2025-10-29 12:34:10,404 - __main__ - INFO - 📁 Результаты: quiz_result.json
2025-10-29 12:34:10,404 - __main__ - INFO - 📋 Логи: quiz_generation.log
2025-10-29 12:34:51,608 - __main__ - INFO - ======================================================================
2025-10-29 12:34:51,608 - __main__ - INFO - OBSIDIAN QUIZ PLUGIN - LANGGRAPH WORKFLOW
2025-10-29 12:34:51,608 - __main__ - INFO - ======================================================================
2025-10-29 12:34:51,608 - __main__ - INFO - 
1️⃣  Загрузка конфигурации
2025-10-29 12:34:51,608 - __main__ - INFO - 
2️⃣  Загрузка лекции: sample_lecture.txt
2025-10-29 12:34:51,608 - src.utils.helpers - INFO - ✓ Загружена лекция: sample_lecture.txt (1096 символов)
2025-10-29 12:34:51,608 - __main__ - INFO -    📄 Длина: 1096 символов
2025-10-29 12:34:51,608 - __main__ - INFO -    📝 Слов: ~131
2025-10-29 12:34:51,608 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-29 12:34:51,608 - src.agents.base_agent.EnhancedParserAgent - INFO - EnhancedParserAgent инициализирован
2025-10-29 12:34:51,686 - src.agents.enhanced_parser_agent - INFO - ✓ RAG компоненты инициализированы с подсчетом токенов
2025-10-29 12:34:51,686 - src.agents.enhanced_parser_agent - INFO - EnhancedParserAgent инициализирован (RAG=ON, WebSearch=ON)
2025-10-29 12:34:51,686 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-29 12:34:51,686 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-29 12:34:51,686 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов
2025-10-29 12:34:51,686 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-29 12:34:51,686 - src.langgraph.workflow - INFO - Workflow скомпилирован: parser → quiz_generator → END
2025-10-29 12:34:51,686 - src.langgraph.workflow - INFO - QuizGenerationWorkflow инициализирован (RAG=True, WebSearch=True)
2025-10-29 12:34:51,686 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-29 12:34:51,686 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-29 12:34:51,686 - src.langgraph.workflow - INFO - Запуск workflow с лекцией (1096 символов)
2025-10-29 12:34:51,686 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-29 12:34:51,686 - src.agents.enhanced_parser_agent - INFO - Parser Agent: начало обработки
2025-10-29 12:34:51,686 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-29 12:34:51,686 - src.agents.enhanced_parser_agent - INFO - 📝 Обработка лекции: 1096 символов
2025-10-29 12:34:51,686 - src.agents.enhanced_parser_agent - INFO - 🔍 Использование RAG для обработки текста
2025-10-29 12:34:51,686 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 1 - Разбиение текста на чанки
2025-10-29 12:34:51,686 - src.agents.enhanced_parser_agent - INFO -    Создано 3 чанков
2025-10-29 12:34:51,686 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 2 - Создание векторного хранилища FAISS
2025-10-29 12:34:51,686 - src.agents.enhanced_parser_agent - INFO -    Генерация эмбеддингов для 3 чанков...
2025-10-29 12:34:51,811 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:34:51,986 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 12:34:52,003 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #1: tokens=170
2025-10-29 12:34:52,014 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-10-29 12:34:52,045 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-10-29 12:34:52,045 - langchain_community.vectorstores.faiss - WARNING - `embedding_function` is expected to be an Embeddings object, support for passing in a function will soon be removed.
2025-10-29 12:34:52,045 - src.agents.enhanced_parser_agent - INFO -    ✓ Векторное хранилище создано
2025-10-29 12:34:52,045 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 3 - Семантический поиск релевантных фрагментов
2025-10-29 12:34:52,045 - src.agents.enhanced_parser_agent - INFO -    Поиск по запросу: 'Какие основные концепции, определения и ключевые ф...'
2025-10-29 12:34:52,154 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 12:34:52,154 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #2: tokens=14
2025-10-29 12:34:52,154 - src.agents.enhanced_parser_agent - INFO -    ✓ Найдено 3 релевантных фрагментов
2025-10-29 12:34:52,154 - src.agents.enhanced_parser_agent - INFO -    Объединенный контекст: 1095 символов
2025-10-29 12:34:52,154 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 4 - Извлечение фактов через LLM
2025-10-29 12:34:52,232 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:34:53,859 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:34:53,859 - src.utils.gigachat_client - INFO - 📊 LLM запрос #1: prompt=385, completion=187, total=572
2025-10-29 12:34:53,859 - src.agents.enhanced_parser_agent - INFO -    Извлечено 9 фактов через LLM
2025-10-29 12:34:53,859 - src.agents.enhanced_parser_agent - INFO - ✓ RAG завершен: извлечено 9 фактов
2025-10-29 12:34:53,859 - src.agents.enhanced_parser_agent - INFO - ✓ Извлечено 9 ключевых фактов
2025-10-29 12:34:53,859 - src.agents.enhanced_parser_agent - INFO - ✓ Создано 9 концепций для Quiz Agent
2025-10-29 12:34:53,859 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:34:53,859 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-29 12:34:53,859 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:34:53,859 - src.agents.adapted_quiz_agent - INFO - Получено 9 концепций от Parser Agent
2025-10-29 12:34:53,859 - src.agents.quiz_agent - INFO - Начало генерации квиза
2025-10-29 12:34:53,859 - src.agents.quiz_agent - INFO - Обнаружено 9 концепций
2025-10-29 12:34:53,859 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Квантовая механика — фундаментальная физическая те
2025-10-29 12:34:53,937 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:34:55,252 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:34:55,252 - src.utils.gigachat_client - INFO - 📊 LLM запрос #2: prompt=302, completion=161, total=463
2025-10-29 12:34:55,252 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Квантовая механика — фундаментальная физическая те'
2025-10-29 12:34:55,252 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:34:55,252 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Волновая функция (ψ(x,t)) представляет состояние к
2025-10-29 12:34:56,645 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:34:56,645 - src.utils.gigachat_client - INFO - 📊 LLM запрос #3: prompt=310, completion=168, total=478
2025-10-29 12:34:56,645 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Волновая функция (ψ(x,t)) представляет состояние к'
2025-10-29 12:34:56,645 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:34:56,645 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Квантование энергии: энергия атомов и молекул прин
2025-10-29 12:34:57,848 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:34:57,848 - src.utils.gigachat_client - INFO - 📊 LLM запрос #4: prompt=287, completion=152, total=439
2025-10-29 12:34:57,848 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Квантование энергии: энергия атомов и молекул прин'
2025-10-29 12:34:57,848 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:34:57,848 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Уравнение Шрёдингера определяет эволюцию волновой 
2025-10-29 12:34:59,290 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:34:59,290 - src.utils.gigachat_client - INFO - 📊 LLM запрос #5: prompt=289, completion=187, total=476
2025-10-29 12:34:59,290 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Уравнение Шрёдингера определяет эволюцию волновой '
2025-10-29 12:34:59,290 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:34:59,290 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Принцип неопределённости Гейзенберга ограничивает 
2025-10-29 12:35:00,601 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:35:00,601 - src.utils.gigachat_client - INFO - 📊 LLM запрос #6: prompt=298, completion=151, total=449
2025-10-29 12:35:00,601 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Принцип неопределённости Гейзенберга ограничивает '
2025-10-29 12:35:00,601 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:35:00,616 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Система находится в суперпозиции нескольких возмож
2025-10-29 12:35:02,211 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:35:02,211 - src.utils.gigachat_client - INFO - 📊 LLM запрос #7: prompt=278, completion=165, total=443
2025-10-29 12:35:02,212 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Система находится в суперпозиции нескольких возмож'
2025-10-29 12:35:02,212 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:35:02,212 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Приведённая постоянная Планка (ħ) играет ключевую 
2025-10-29 12:35:03,756 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:35:03,756 - src.utils.gigachat_client - INFO - 📊 LLM запрос #8: prompt=309, completion=169, total=478
2025-10-29 12:35:03,756 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Приведённая постоянная Планка (ħ) играет ключевую '
2025-10-29 12:35:03,757 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:35:03,757 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Важность уравнения Шрёдингера подчёркивается униве
2025-10-29 12:35:05,155 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:35:05,155 - src.utils.gigachat_client - INFO - 📊 LLM запрос #9: prompt=309, completion=174, total=483
2025-10-29 12:35:05,155 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Важность уравнения Шрёдингера подчёркивается униве'
2025-10-29 12:35:05,155 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:35:05,155 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Классическая физика Ньютона неприменима на уровне 
2025-10-29 12:35:06,672 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:35:06,672 - src.utils.gigachat_client - INFO - 📊 LLM запрос #10: prompt=301, completion=171, total=472
2025-10-29 12:35:06,672 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Классическая физика Ньютона неприменима на уровне '
2025-10-29 12:35:06,672 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:35:06,672 - src.agents.quiz_agent - INFO - Квиз сгенерирован: 7 вопросов
2025-10-29 12:35:06,672 - src.agents.adapted_quiz_agent - INFO - ✓ Сгенерировано 7 вопросов
2025-10-29 12:35:06,672 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по сложности: {'easy': 0, 'medium': 7, 'hard': 0}
2025-10-29 12:35:06,672 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по типам: {'multiple_choice': 7, 'true_false': 0, 'short_answer': 0}
2025-10-29 12:35:06,672 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:35:06,672 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-29 12:35:06,672 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:35:06,672 - src.langgraph.workflow - INFO - Извлечено фактов: 9
2025-10-29 12:35:06,672 - src.langgraph.workflow - INFO - Создано концепций: 9
2025-10-29 12:35:06,672 - src.langgraph.workflow - INFO - Сгенерировано вопросов: 7
2025-10-29 12:35:06,672 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-29 12:35:06,672 - src.langgraph.workflow - INFO -   - Parser: извлечено 9 фактов
2025-10-29 12:35:06,672 - src.langgraph.workflow - INFO -   - Quiz: сгенерировано 7 вопросов
2025-10-29 12:35:06,672 - __main__ - INFO - 
5️⃣  Форматирование результатов
2025-10-29 12:35:06,672 - src.utils.helpers - INFO - ✓ Результаты сохранены: quiz_result.json
2025-10-29 12:35:06,687 - __main__ - INFO - 
6️⃣  Статистика использования токенов
2025-10-29 12:35:06,687 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:35:06,687 - src.utils.gigachat_client - INFO - 📊 ИТОГОВАЯ СТАТИСТИКА ИСПОЛЬЗОВАНИЯ ТОКЕНОВ
2025-10-29 12:35:06,687 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:35:06,687 - src.utils.gigachat_client - INFO - LLM запросов: 10
2025-10-29 12:35:06,687 - src.utils.gigachat_client - INFO -   Токенов в промптах: 3,068
2025-10-29 12:35:06,687 - src.utils.gigachat_client - INFO -   Токенов в ответах: 1,685
2025-10-29 12:35:06,687 - src.utils.gigachat_client - INFO -   Всего LLM токенов: 4,753
2025-10-29 12:35:06,687 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 12:35:06,687 - src.utils.gigachat_client - INFO - Embedding запросов: 2
2025-10-29 12:35:06,687 - src.utils.gigachat_client - INFO -   Embedding токенов: 184
2025-10-29 12:35:06,687 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 12:35:06,687 - src.utils.gigachat_client - INFO - ВСЕГО ТОКЕНОВ: 4,937
2025-10-29 12:35:06,687 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:35:06,687 - __main__ - INFO - 
======================================================================
2025-10-29 12:35:06,687 - __main__ - INFO - ✓ ГЕНЕРАЦИЯ ЗАВЕРШЕНА УСПЕШНО
2025-10-29 12:35:06,687 - __main__ - INFO - ======================================================================
2025-10-29 12:35:06,687 - __main__ - INFO - 📁 Результаты: quiz_result.json
2025-10-29 12:35:06,687 - __main__ - INFO - 📋 Логи: quiz_generation.log
2025-10-29 12:35:55,379 - __main__ - INFO - ======================================================================
2025-10-29 12:35:55,379 - __main__ - INFO - OBSIDIAN QUIZ PLUGIN - LANGGRAPH WORKFLOW
2025-10-29 12:35:55,379 - __main__ - INFO - ======================================================================
2025-10-29 12:35:55,379 - __main__ - INFO - 
1️⃣  Загрузка конфигурации
2025-10-29 12:35:55,379 - __main__ - INFO - 
2️⃣  Загрузка лекции: sample_lecture.txt
2025-10-29 12:35:55,379 - src.utils.helpers - INFO - ✓ Загружена лекция: sample_lecture.txt (1096 символов)
2025-10-29 12:35:55,379 - __main__ - INFO -    📄 Длина: 1096 символов
2025-10-29 12:35:55,379 - __main__ - INFO -    📝 Слов: ~131
2025-10-29 12:35:55,379 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-29 12:35:55,379 - src.agents.base_agent.EnhancedParserAgent - INFO - EnhancedParserAgent инициализирован
2025-10-29 12:35:55,457 - src.agents.enhanced_parser_agent - INFO - ✓ RAG компоненты инициализированы с подсчетом токенов
2025-10-29 12:35:55,457 - src.agents.enhanced_parser_agent - INFO - EnhancedParserAgent инициализирован (RAG=ON, WebSearch=ON)
2025-10-29 12:35:55,457 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-29 12:35:55,457 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-29 12:35:55,457 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов
2025-10-29 12:35:55,457 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-29 12:35:55,457 - src.langgraph.workflow - INFO - Workflow скомпилирован: parser → quiz_generator → END
2025-10-29 12:35:55,457 - src.langgraph.workflow - INFO - QuizGenerationWorkflow инициализирован (RAG=True, WebSearch=True)
2025-10-29 12:35:55,457 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-29 12:35:55,457 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-29 12:35:55,457 - src.langgraph.workflow - INFO - Запуск workflow с лекцией (1096 символов)
2025-10-29 12:35:55,457 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-29 12:35:55,457 - src.agents.enhanced_parser_agent - INFO - Parser Agent: начало обработки
2025-10-29 12:35:55,457 - src.agents.enhanced_parser_agent - INFO - ==================================================
2025-10-29 12:35:55,457 - src.agents.enhanced_parser_agent - INFO - 📝 Обработка лекции: 1096 символов
2025-10-29 12:35:55,457 - src.agents.enhanced_parser_agent - INFO - 🔍 Использование RAG для обработки текста
2025-10-29 12:35:55,457 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 1 - Разбиение текста на чанки
2025-10-29 12:35:55,457 - src.agents.enhanced_parser_agent - INFO -    Создано 3 чанков
2025-10-29 12:35:55,457 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 2 - Создание векторного хранилища FAISS
2025-10-29 12:35:55,457 - src.agents.enhanced_parser_agent - INFO -    Генерация эмбеддингов для 3 чанков...
2025-10-29 12:35:55,582 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:35:55,740 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 12:35:55,755 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #1: tokens=170
2025-10-29 12:35:55,771 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-10-29 12:35:55,802 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-10-29 12:35:55,802 - langchain_community.vectorstores.faiss - WARNING - `embedding_function` is expected to be an Embeddings object, support for passing in a function will soon be removed.
2025-10-29 12:35:55,802 - src.agents.enhanced_parser_agent - INFO -    ✓ Векторное хранилище создано
2025-10-29 12:35:55,802 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 3 - Семантический поиск релевантных фрагментов
2025-10-29 12:35:55,802 - src.agents.enhanced_parser_agent - INFO -    Поиск по запросу: 'Какие основные концепции, определения и ключевые ф...'
2025-10-29 12:35:55,912 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 12:35:55,912 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #2: tokens=14
2025-10-29 12:35:55,912 - src.agents.enhanced_parser_agent - INFO -    ✓ Найдено 3 релевантных фрагментов
2025-10-29 12:35:55,912 - src.agents.enhanced_parser_agent - INFO -    Объединенный контекст: 1095 символов
2025-10-29 12:35:55,912 - src.agents.enhanced_parser_agent - INFO - 🔍 RAG: Шаг 4 - Извлечение фактов через LLM
2025-10-29 12:35:55,990 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:35:57,333 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:35:57,333 - src.utils.gigachat_client - INFO - 📊 LLM запрос #1: prompt=385, completion=178, total=563
2025-10-29 12:35:57,333 - src.agents.enhanced_parser_agent - INFO -    Извлечено 9 фактов через LLM
2025-10-29 12:35:57,333 - src.agents.enhanced_parser_agent - INFO - ✓ RAG завершен: извлечено 9 фактов
2025-10-29 12:35:57,343 - src.agents.enhanced_parser_agent - INFO - ✓ Извлечено 9 ключевых фактов
2025-10-29 12:35:57,343 - src.agents.enhanced_parser_agent - INFO - ✓ Создано 9 концепций для Quiz Agent
2025-10-29 12:35:57,343 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:35:57,343 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-29 12:35:57,343 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:35:57,343 - src.agents.adapted_quiz_agent - INFO - Получено 9 концепций от Parser Agent
2025-10-29 12:35:57,343 - src.agents.quiz_agent - INFO - Начало генерации квиза
2025-10-29 12:35:57,343 - src.agents.quiz_agent - INFO - Обнаружено 9 концепций
2025-10-29 12:35:57,343 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Квантовая механика — фундаментальная физическая те
2025-10-29 12:35:57,405 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:35:58,429 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:35:58,429 - src.utils.gigachat_client - INFO - 📊 LLM запрос #2: prompt=287, completion=130, total=417
2025-10-29 12:35:58,429 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Квантовая механика — фундаментальная физическая те'
2025-10-29 12:35:58,429 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:35:58,429 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Основные концепции квантовой механики включают вол
2025-10-29 12:35:59,690 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:35:59,691 - src.utils.gigachat_client - INFO - 📊 LLM запрос #3: prompt=287, completion=171, total=458
2025-10-29 12:35:59,691 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Основные концепции квантовой механики включают вол'
2025-10-29 12:35:59,691 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:35:59,692 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Волновая функция (ψ(x,t)) представляет состояние к
2025-10-29 12:36:00,884 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:36:00,884 - src.utils.gigachat_client - INFO - 📊 LLM запрос #4: prompt=294, completion=150, total=444
2025-10-29 12:36:00,884 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Волновая функция (ψ(x,t)) представляет состояние к'
2025-10-29 12:36:00,884 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:36:00,884 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Электрон в атоме способен занимать лишь определённ
2025-10-29 12:36:01,963 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:36:01,963 - src.utils.gigachat_client - INFO - 📊 LLM запрос #5: prompt=285, completion=144, total=429
2025-10-29 12:36:01,963 - src.agents.quiz_agent - WARNING - JSON невалиден, попытка исправления...
2025-10-29 12:36:01,978 - src.agents.quiz_agent - ERROR - Не удалось исправить JSON
2025-10-29 12:36:01,978 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: 1 validation error for Question
__root__
  Expecting ':' delimiter: line 1 column 9 (char 8) [type=value_error.jsondecode, input_value='{"     "question_text":"...difficulty":"medium"  }', input_type=str]
2025-10-29 12:36:01,978 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 12:36:03,136 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:36:03,136 - src.utils.gigachat_client - INFO - 📊 LLM запрос #6: prompt=97, completion=156, total=253
2025-10-29 12:36:03,136 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Электрон в атоме способен занимать лишь определённ'
2025-10-29 12:36:03,136 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:36:03,136 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Уравнение Шрёдингера описывает временную эволюцию 
2025-10-29 12:36:04,388 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:36:04,404 - src.utils.gigachat_client - INFO - 📊 LLM запрос #7: prompt=306, completion=169, total=475
2025-10-29 12:36:04,404 - src.agents.quiz_agent - WARNING - JSON невалиден, попытка исправления...
2025-10-29 12:36:04,404 - src.agents.quiz_agent - ERROR - Не удалось исправить JSON
2025-10-29 12:36:04,404 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: 1 validation error for Question
__root__
  Expecting ':' delimiter: line 1 column 9 (char 8) [type=value_error.jsondecode, input_value='{"     "question_text":"...difficulty":"medium"  }', input_type=str]
2025-10-29 12:36:04,404 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 12:36:05,467 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:36:05,467 - src.utils.gigachat_client - INFO - 📊 LLM запрос #8: prompt=97, completion=144, total=241
2025-10-29 12:36:05,467 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Уравнение Шрёдингера описывает временную эволюцию '
2025-10-29 12:36:05,467 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:36:05,467 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Принцип неопределённости Гейзенберга утверждает не
2025-10-29 12:36:06,360 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:36:06,360 - src.utils.gigachat_client - INFO - 📊 LLM запрос #9: prompt=288, completion=116, total=404
2025-10-29 12:36:06,360 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Принцип неопределённости Гейзенберга утверждает не'
2025-10-29 12:36:06,360 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:36:06,360 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Квантовые системы способны находиться сразу в неск
2025-10-29 12:36:07,266 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:36:07,266 - src.utils.gigachat_client - INFO - 📊 LLM запрос #10: prompt=289, completion=116, total=405
2025-10-29 12:36:07,266 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Квантовые системы способны находиться сразу в неск'
2025-10-29 12:36:07,266 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:36:07,266 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Приведённая постоянная Планка обозначается символо
2025-10-29 12:36:08,174 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:36:08,174 - src.utils.gigachat_client - INFO - 📊 LLM запрос #11: prompt=281, completion=119, total=400
2025-10-29 12:36:08,174 - src.agents.quiz_agent - WARNING - JSON невалиден, попытка исправления...
2025-10-29 12:36:08,174 - src.agents.quiz_agent - ERROR - Не удалось исправить JSON
2025-10-29 12:36:08,174 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: 1 validation error for Question
__root__
  Invalid \escape: line 1 column 338 (char 337) [type=value_error.jsondecode, input_value='{  "question_text": "К...  "difficulty": "easy"}', input_type=str]
2025-10-29 12:36:08,174 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 12:36:09,221 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:36:09,221 - src.utils.gigachat_client - INFO - 📊 LLM запрос #12: prompt=90, completion=136, total=226
2025-10-29 12:36:09,221 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Приведённая постоянная Планка обозначается символо'
2025-10-29 12:36:09,221 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:36:09,221 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Значение неравенства принципа неопределённости выр
2025-10-29 12:36:10,289 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:36:10,289 - src.utils.gigachat_client - INFO - 📊 LLM запрос #13: prompt=288, completion=142, total=430
2025-10-29 12:36:10,289 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Значение неравенства принципа неопределённости выр'
2025-10-29 12:36:10,289 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 12:36:10,289 - src.agents.quiz_agent - INFO - Квиз сгенерирован: 7 вопросов
2025-10-29 12:36:10,289 - src.agents.adapted_quiz_agent - INFO - ✓ Сгенерировано 7 вопросов
2025-10-29 12:36:10,289 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по сложности: {'easy': 3, 'medium': 4, 'hard': 0}
2025-10-29 12:36:10,289 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по типам: {'multiple_choice': 5, 'true_false': 0, 'short_answer': 2}
2025-10-29 12:36:10,289 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:36:10,289 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-29 12:36:10,289 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:36:10,289 - src.langgraph.workflow - INFO - Извлечено фактов: 9
2025-10-29 12:36:10,289 - src.langgraph.workflow - INFO - Создано концепций: 9
2025-10-29 12:36:10,289 - src.langgraph.workflow - INFO - Сгенерировано вопросов: 7
2025-10-29 12:36:10,289 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-29 12:36:10,289 - src.langgraph.workflow - INFO -   - Parser: извлечено 9 фактов
2025-10-29 12:36:10,289 - src.langgraph.workflow - INFO -   - Quiz: сгенерировано 7 вопросов
2025-10-29 12:36:10,289 - __main__ - INFO - 
5️⃣  Форматирование результатов
2025-10-29 12:36:10,289 - src.utils.helpers - INFO - ✓ Результаты сохранены: quiz_result.json
2025-10-29 12:36:10,302 - __main__ - INFO - 
6️⃣  Статистика использования токенов
2025-10-29 12:36:10,302 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:36:10,302 - src.utils.gigachat_client - INFO - 📊 ИТОГОВАЯ СТАТИСТИКА ИСПОЛЬЗОВАНИЯ ТОКЕНОВ
2025-10-29 12:36:10,302 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:36:10,302 - src.utils.gigachat_client - INFO - LLM запросов: 13
2025-10-29 12:36:10,302 - src.utils.gigachat_client - INFO -   Токенов в промптах: 3,274
2025-10-29 12:36:10,302 - src.utils.gigachat_client - INFO -   Токенов в ответах: 1,871
2025-10-29 12:36:10,302 - src.utils.gigachat_client - INFO -   Всего LLM токенов: 5,145
2025-10-29 12:36:10,302 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 12:36:10,302 - src.utils.gigachat_client - INFO - Embedding запросов: 2
2025-10-29 12:36:10,302 - src.utils.gigachat_client - INFO -   Embedding токенов: 184
2025-10-29 12:36:10,302 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 12:36:10,302 - src.utils.gigachat_client - INFO - ВСЕГО ТОКЕНОВ: 5,329
2025-10-29 12:36:10,302 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:36:10,302 - __main__ - INFO - 
======================================================================
2025-10-29 12:36:10,302 - __main__ - INFO - ✓ ГЕНЕРАЦИЯ ЗАВЕРШЕНА УСПЕШНО
2025-10-29 12:36:10,302 - __main__ - INFO - ======================================================================
2025-10-29 12:36:10,302 - __main__ - INFO - 📁 Результаты: quiz_result.json
2025-10-29 12:36:10,302 - __main__ - INFO - 📋 Логи: quiz_generation.log
2025-10-29 12:54:26,577 - __main__ - INFO - ======================================================================
2025-10-29 12:54:26,577 - __main__ - INFO - MINDFORGE QUIZ GENERATOR - LANGGRAPH WORKFLOW
2025-10-29 12:54:26,577 - __main__ - INFO - ======================================================================
2025-10-29 12:54:26,577 - __main__ - INFO - 
1️⃣  Загрузка конфигурации
2025-10-29 12:54:26,577 - __main__ - INFO - 
2️⃣  Загрузка лекции: sample_lecture.txt
2025-10-29 12:54:26,577 - src.utils.helpers - INFO - ✓ Загружена лекция: sample_lecture.txt (1096 символов)
2025-10-29 12:54:26,577 - __main__ - INFO -    📄 Длина: 1096 символов
2025-10-29 12:54:26,577 - __main__ - INFO -    📝 Слов: ~131
2025-10-29 12:54:26,577 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-29 12:54:26,577 - src.agents.base_agent.ParserAgent - INFO - ParserAgent инициализирован
2025-10-29 12:54:26,639 - src.rag.chunker - INFO - TextChunker инициализирован (size=500, overlap=100)
2025-10-29 12:54:26,764 - src.rag.vector_store - INFO - VectorStore инициализирован
2025-10-29 12:54:26,773 - src.agents.parser_agent - INFO - ✓ RAG инициализирован
2025-10-29 12:54:26,773 - src.search.web_search - INFO - WebSearchService инициализирован (provider=duckduckgo)
2025-10-29 12:54:26,773 - src.agents.parser_agent - INFO - ✓ WebSearch инициализирован
2025-10-29 12:54:26,773 - src.agents.parser_agent - INFO - ParserAgent готов: RAG=ON, WebSearch=ON
2025-10-29 12:54:26,773 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-29 12:54:26,773 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-29 12:54:26,773 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов
2025-10-29 12:54:26,773 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-29 12:54:26,773 - src.langgraph.workflow - INFO - ✓ Workflow скомпилирован: parser → quiz_generator → END
2025-10-29 12:54:26,773 - src.langgraph.workflow - INFO - QuizGenerationWorkflow инициализирован (RAG=True, WebSearch=True)
2025-10-29 12:54:26,773 - __main__ - INFO -    RAG: ✓ Включен
2025-10-29 12:54:26,773 - __main__ - INFO -    Веб-поиск: ✓ Включен
2025-10-29 12:54:26,773 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-29 12:54:26,773 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-29 12:54:26,773 - src.langgraph.workflow - INFO - Запуск workflow (текст: 1096 символов)
2025-10-29 12:54:26,773 - src.agents.parser_agent - INFO - ==================================================
2025-10-29 12:54:26,773 - src.agents.parser_agent - INFO - Parser Agent: начало работы
2025-10-29 12:54:26,773 - src.agents.parser_agent - INFO - ==================================================
2025-10-29 12:54:26,773 - src.agents.parser_agent - INFO - 📝 Текст лекции: 1096 символов
2025-10-29 12:54:26,773 - src.agents.parser_agent - INFO - 🔍 Режим: RAG (текст > 1000 символов)
2025-10-29 12:54:26,773 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 1/4 - Разбиение текста на чанки
2025-10-29 12:54:26,773 - src.rag.chunker - INFO - Текст разбит на 3 чанков
2025-10-29 12:54:26,773 - src.agents.parser_agent - INFO -    Создано 3 чанков
2025-10-29 12:54:26,773 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 2/4 - Создание векторного индекса FAISS
2025-10-29 12:54:26,773 - src.rag.vector_store - INFO - Создание FAISS индекса для 3 чанков...
2025-10-29 12:54:26,929 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:54:27,086 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 12:54:27,101 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #1: tokens=170
2025-10-29 12:54:27,117 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-10-29 12:54:27,132 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-10-29 12:54:27,132 - langchain_community.vectorstores.faiss - WARNING - `embedding_function` is expected to be an Embeddings object, support for passing in a function will soon be removed.
2025-10-29 12:54:27,132 - src.rag.vector_store - INFO - ✓ FAISS индекс создан
2025-10-29 12:54:27,132 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 3/4 - Семантический поиск релевантных фрагментов
2025-10-29 12:54:27,247 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 12:54:27,247 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #2: tokens=9
2025-10-29 12:54:27,247 - src.agents.parser_agent - INFO -    Найдено 3 релевантных фрагментов
2025-10-29 12:54:27,247 - src.agents.parser_agent - INFO -    Объединённый контекст: 1095 символов
2025-10-29 12:54:27,247 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 4/4 - Извлечение фактов через LLM
2025-10-29 12:54:27,325 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:54:28,609 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:54:28,609 - src.utils.gigachat_client - INFO - 📊 LLM запрос #1: prompt=360, completion=167, total=527
2025-10-29 12:54:28,609 - src.agents.parser_agent - INFO -    Извлечено 7 фактов
2025-10-29 12:54:28,624 - src.agents.parser_agent - INFO - ✓ RAG завершён: извлечено 7 фактов
2025-10-29 12:54:28,624 - src.agents.parser_agent - INFO - ✓ Извлечено 7 фактов
2025-10-29 12:54:28,624 - src.agents.parser_agent - INFO - 🌐 Проверка фактов в интернете...
2025-10-29 12:54:28,624 - src.search.web_search - INFO - 🔍 Проверка 7 фактов через веб-поиск...
2025-10-29 12:54:28,624 - src.search.web_search - INFO -    Проверка факта 1/7: Квантовая механика — фундаментальная физическая теория, опис...
2025-10-29 12:54:28,656 - src.search.web_search - ERROR - Ошибка DuckDuckGo поиска: 'generator' object is not subscriptable
2025-10-29 12:54:28,656 - src.search.web_search - WARNING -       ✗ Не подтвержден
2025-10-29 12:54:28,656 - src.search.web_search - INFO -    Проверка факта 2/7: Классическая физика не применима к микрообъектам, в квантово...
2025-10-29 12:54:28,656 - src.search.web_search - ERROR - Ошибка DuckDuckGo поиска: 'generator' object is not subscriptable
2025-10-29 12:54:28,656 - src.search.web_search - WARNING -       ✗ Не подтвержден
2025-10-29 12:54:28,656 - src.search.web_search - INFO -    Проверка факта 3/7: Основные состояния квантовой системы полностью определяются ...
2025-10-29 12:54:28,656 - src.search.web_search - ERROR - Ошибка DuckDuckGo поиска: 'generator' object is not subscriptable
2025-10-29 12:54:28,656 - src.search.web_search - WARNING -       ✗ Не подтвержден
2025-10-29 12:54:28,656 - src.search.web_search - INFO -    Проверка факта 4/7: Электрон в атоме может занимать лишь определённые дискретные...
2025-10-29 12:54:28,656 - src.search.web_search - ERROR - Ошибка DuckDuckGo поиска: 'generator' object is not subscriptable
2025-10-29 12:54:28,656 - src.search.web_search - WARNING -       ✗ Не подтвержден
2025-10-29 12:54:28,656 - src.search.web_search - INFO -    Проверка факта 5/7: Важнейшее уравнение квантовой механики — уравнение Шрёдингер...
2025-10-29 12:54:28,656 - src.search.web_search - ERROR - Ошибка DuckDuckGo поиска: 'generator' object is not subscriptable
2025-10-29 12:54:28,656 - src.search.web_search - WARNING -       ✗ Не подтвержден
2025-10-29 12:54:28,656 - src.search.web_search - INFO -    Проверка факта 6/7: Согласно принципу неопределённости Гейзенберга невозможно од...
2025-10-29 12:54:28,656 - src.search.web_search - ERROR - Ошибка DuckDuckGo поиска: 'generator' object is not subscriptable
2025-10-29 12:54:28,656 - src.search.web_search - WARNING -       ✗ Не подтвержден
2025-10-29 12:54:28,656 - src.search.web_search - INFO -    Проверка факта 7/7: Квантовые объекты могут пребывать сразу в нескольких состоян...
2025-10-29 12:54:28,656 - src.search.web_search - ERROR - Ошибка DuckDuckGo поиска: 'generator' object is not subscriptable
2025-10-29 12:54:28,656 - src.search.web_search - WARNING -       ✗ Не подтвержден
2025-10-29 12:54:28,656 - src.search.web_search - INFO - ✓ Проверка завершена: 0/7 фактов подтверждены
2025-10-29 12:54:28,656 - src.agents.parser_agent - INFO - ✓ Проверка завершена: 0/7 фактов подтверждены
2025-10-29 12:54:28,656 - src.agents.parser_agent - INFO - ✓ Создано 0 концепций для QuizAgent
2025-10-29 12:54:28,656 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:54:28,656 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-29 12:54:28,656 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:54:28,656 - src.agents.adapted_quiz_agent - ERROR - ✗ Ошибка в Quiz Agent: Отсутствуют концепции от Parser Agent
2025-10-29 12:54:28,656 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:54:28,656 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-29 12:54:28,656 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:54:28,656 - src.langgraph.workflow - INFO - Фактов: 0
2025-10-29 12:54:28,656 - src.langgraph.workflow - INFO - Концепций: 0
2025-10-29 12:54:28,656 - src.langgraph.workflow - INFO - Вопросов: 0
2025-10-29 12:54:28,656 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-29 12:54:28,656 - src.langgraph.workflow - INFO -   - Parser: извлечено 0 фактов
2025-10-29 12:54:28,656 - src.langgraph.workflow - INFO -   - Quiz: ОШИБКА - Отсутствуют концепции от Parser Agent
2025-10-29 12:54:28,656 - __main__ - ERROR - 
✗ Ошибка: Отсутствуют концепции от Parser Agent
2025-10-29 12:54:28,656 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:54:28,656 - src.utils.gigachat_client - INFO - 📊 ИТОГОВАЯ СТАТИСТИКА ИСПОЛЬЗОВАНИЯ ТОКЕНОВ
2025-10-29 12:54:28,656 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:54:28,656 - src.utils.gigachat_client - INFO - LLM запросов: 1
2025-10-29 12:54:28,656 - src.utils.gigachat_client - INFO -   Токенов в промптах: 360
2025-10-29 12:54:28,656 - src.utils.gigachat_client - INFO -   Токенов в ответах: 167
2025-10-29 12:54:28,656 - src.utils.gigachat_client - INFO -   Всего LLM токенов: 527
2025-10-29 12:54:28,656 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 12:54:28,656 - src.utils.gigachat_client - INFO - Embedding запросов: 2
2025-10-29 12:54:28,656 - src.utils.gigachat_client - INFO -   Embedding токенов: 179
2025-10-29 12:54:28,656 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 12:54:28,656 - src.utils.gigachat_client - INFO - ВСЕГО ТОКЕНОВ: 706
2025-10-29 12:54:28,656 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:58:42,310 - __main__ - INFO - ======================================================================
2025-10-29 12:58:42,310 - __main__ - INFO - MINDFORGE QUIZ GENERATOR - LANGGRAPH WORKFLOW
2025-10-29 12:58:42,310 - __main__ - INFO - ======================================================================
2025-10-29 12:58:42,310 - __main__ - INFO - 
1️⃣  Загрузка конфигурации
2025-10-29 12:58:42,310 - __main__ - INFO - 
2️⃣  Загрузка лекции: sample_lecture.txt
2025-10-29 12:58:42,310 - src.utils.helpers - INFO - ✓ Загружена лекция: sample_lecture.txt (1096 символов)
2025-10-29 12:58:42,310 - __main__ - INFO -    📄 Длина: 1096 символов
2025-10-29 12:58:42,310 - __main__ - INFO -    📝 Слов: ~131
2025-10-29 12:58:42,310 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-29 12:58:42,310 - src.agents.base_agent.ParserAgent - INFO - ParserAgent инициализирован
2025-10-29 12:58:42,388 - src.rag.chunker - INFO - TextChunker инициализирован (size=500, overlap=100)
2025-10-29 12:58:42,497 - src.rag.vector_store - INFO - VectorStore инициализирован
2025-10-29 12:58:42,497 - src.agents.parser_agent - INFO - ✓ RAG инициализирован
2025-10-29 12:58:42,497 - src.search.web_search - INFO - WebSearchService инициализирован (provider=duckduckgo)
2025-10-29 12:58:42,497 - src.agents.parser_agent - INFO - ✓ WebSearch инициализирован
2025-10-29 12:58:42,497 - src.agents.parser_agent - INFO - ParserAgent готов: RAG=ON, WebSearch=ON
2025-10-29 12:58:42,497 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-29 12:58:42,497 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-29 12:58:42,497 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов
2025-10-29 12:58:42,497 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-29 12:58:42,497 - src.langgraph.workflow - INFO - ✓ Workflow скомпилирован: parser → quiz_generator → END
2025-10-29 12:58:42,497 - src.langgraph.workflow - INFO - QuizGenerationWorkflow инициализирован (RAG=True, WebSearch=True)
2025-10-29 12:58:42,497 - __main__ - INFO -    RAG: ✓ Включен
2025-10-29 12:58:42,497 - __main__ - INFO -    Веб-поиск: ✓ Включен
2025-10-29 12:58:42,497 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-29 12:58:42,497 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-29 12:58:42,497 - src.langgraph.workflow - INFO - Запуск workflow (текст: 1096 символов)
2025-10-29 12:58:42,513 - src.agents.parser_agent - INFO - ==================================================
2025-10-29 12:58:42,513 - src.agents.parser_agent - INFO - Parser Agent: начало работы
2025-10-29 12:58:42,513 - src.agents.parser_agent - INFO - ==================================================
2025-10-29 12:58:42,513 - src.agents.parser_agent - INFO - 📝 Текст лекции: 1096 символов
2025-10-29 12:58:42,513 - src.agents.parser_agent - INFO - 🔍 Режим: RAG (текст > 1000 символов)
2025-10-29 12:58:42,513 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 1/4 - Разбиение текста на чанки
2025-10-29 12:58:42,513 - src.rag.chunker - INFO - Текст разбит на 3 чанков
2025-10-29 12:58:42,513 - src.agents.parser_agent - INFO -    Создано 3 чанков
2025-10-29 12:58:42,513 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 2/4 - Создание векторного индекса FAISS
2025-10-29 12:58:42,513 - src.rag.vector_store - INFO - Создание FAISS индекса для 3 чанков...
2025-10-29 12:58:42,670 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:58:42,826 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 12:58:42,842 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #1: tokens=170
2025-10-29 12:58:42,857 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-10-29 12:58:42,873 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-10-29 12:58:42,873 - langchain_community.vectorstores.faiss - WARNING - `embedding_function` is expected to be an Embeddings object, support for passing in a function will soon be removed.
2025-10-29 12:58:42,873 - src.rag.vector_store - INFO - ✓ FAISS индекс создан
2025-10-29 12:58:42,873 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 3/4 - Семантический поиск релевантных фрагментов
2025-10-29 12:58:42,982 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 12:58:42,982 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #2: tokens=9
2025-10-29 12:58:42,982 - src.agents.parser_agent - INFO -    Найдено 3 релевантных фрагментов
2025-10-29 12:58:42,982 - src.agents.parser_agent - INFO -    Объединённый контекст: 1095 символов
2025-10-29 12:58:42,982 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 4/4 - Извлечение фактов через LLM
2025-10-29 12:58:43,061 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 12:58:44,249 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 12:58:44,249 - src.utils.gigachat_client - INFO - 📊 LLM запрос #1: prompt=360, completion=152, total=512
2025-10-29 12:58:44,265 - src.agents.parser_agent - INFO -    Извлечено 9 фактов
2025-10-29 12:58:44,265 - src.agents.parser_agent - INFO - ✓ RAG завершён: извлечено 9 фактов
2025-10-29 12:58:44,265 - src.agents.parser_agent - INFO - ✓ Извлечено 9 фактов
2025-10-29 12:58:44,265 - src.agents.parser_agent - INFO - 🌐 Проверка фактов в интернете...
2025-10-29 12:58:44,265 - src.search.web_search - INFO - 🔍 Проверка 9 фактов через веб-поиск...
2025-10-29 12:58:44,265 - src.search.web_search - INFO -    Проверка факта 1/9: Квантовая механика изучает поведение частиц на уровне атома ...
2025-10-29 12:58:45,486 - src.search.web_search - ERROR - Ошибка DuckDuckGo поиска: _get_url() https://links.duckduckgo.com/d.js RuntimeError: No active exception to reraise
2025-10-29 12:58:45,486 - src.search.web_search - WARNING -       ✗ Не подтверждён
2025-10-29 12:58:45,486 - src.search.web_search - INFO -    Проверка факта 2/9: Классическая физика не применима к объектам микромира (атомы...
2025-10-29 12:58:46,658 - src.search.web_search - ERROR - Ошибка DuckDuckGo поиска: _get_url() https://links.duckduckgo.com/d.js RuntimeError: No active exception to reraise
2025-10-29 12:58:46,674 - src.search.web_search - WARNING -       ✗ Не подтверждён
2025-10-29 12:58:46,674 - src.search.web_search - INFO -    Проверка факта 3/9: Волновая функция ψ(x,t) полностью описывает состояние кванто...
2025-10-29 12:58:47,863 - src.search.web_search - ERROR - Ошибка DuckDuckGo поиска: _get_url() https://links.duckduckgo.com/d.js RuntimeError: No active exception to reraise
2025-10-29 12:58:47,863 - src.search.web_search - WARNING -       ✗ Не подтверждён
2025-10-29 12:58:47,863 - src.search.web_search - INFO -    Проверка факта 4/9: Энергия в микромире квантуется (может принимать лишь отдельн...
2025-10-29 12:58:49,082 - src.search.web_search - ERROR - Ошибка DuckDuckGo поиска: _get_url() https://links.duckduckgo.com/d.js RuntimeError: No active exception to reraise
2025-10-29 12:58:49,082 - src.search.web_search - WARNING -       ✗ Не подтверждён
2025-10-29 12:58:49,082 - src.search.web_search - INFO -    Проверка факта 5/9: Уравнение Шрёдингера определяет изменение волновой функции с...
2025-10-29 12:58:50,305 - src.search.web_search - ERROR - Ошибка DuckDuckGo поиска: _get_url() https://links.duckduckgo.com/d.js RuntimeError: No active exception to reraise
2025-10-29 12:58:50,305 - src.search.web_search - WARNING -       ✗ Не подтверждён
2025-10-29 12:58:50,305 - src.search.web_search - INFO -    Проверка факта 6/9: Неопределенность Гейзенберга ограничивает одновременное изме...
2025-10-29 12:58:51,462 - src.search.web_search - ERROR - Ошибка DuckDuckGo поиска: _get_url() https://links.duckduckgo.com/d.js RuntimeError: No active exception to reraise
2025-10-29 12:58:51,462 - src.search.web_search - WARNING -       ✗ Не подтверждён
2025-10-29 12:58:51,462 - src.search.web_search - INFO -    Проверка факта 7/9: Квантовые объекты могут пребывать сразу в нескольких состоян...
2025-10-29 12:58:52,666 - src.search.web_search - ERROR - Ошибка DuckDuckGo поиска: _get_url() https://links.duckduckgo.com/d.js RuntimeError: No active exception to reraise
2025-10-29 12:58:52,666 - src.search.web_search - WARNING -       ✗ Не подтверждён
2025-10-29 12:58:52,667 - src.search.web_search - INFO -    Проверка факта 8/9: Приведённая постоянная Планка обозначается как ħ = h/(2π)...
2025-10-29 12:58:53,873 - src.search.web_search - ERROR - Ошибка DuckDuckGo поиска: _get_url() https://links.duckduckgo.com/d.js RuntimeError: No active exception to reraise
2025-10-29 12:58:53,873 - src.search.web_search - WARNING -       ✗ Не подтверждён
2025-10-29 12:58:53,873 - src.search.web_search - INFO -    Проверка факта 9/9: Взаимодействие наблюдателя влияет на суперпозицию состояния ...
2025-10-29 12:58:55,079 - src.search.web_search - ERROR - Ошибка DuckDuckGo поиска: _get_url() https://links.duckduckgo.com/d.js RuntimeError: No active exception to reraise
2025-10-29 12:58:55,079 - src.search.web_search - WARNING -       ✗ Не подтверждён
2025-10-29 12:58:55,079 - src.search.web_search - INFO - ✓ Проверка завершена: 0/9 фактов подтверждены
2025-10-29 12:58:55,079 - src.agents.parser_agent - INFO - ✓ Проверка завершена: 0/9 фактов подтверждены
2025-10-29 12:58:55,080 - src.agents.parser_agent - INFO - ✓ Создано 0 концепций для QuizAgent
2025-10-29 12:58:55,081 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:58:55,081 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-29 12:58:55,081 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 12:58:55,081 - src.agents.adapted_quiz_agent - ERROR - ✗ Ошибка в Quiz Agent: Отсутствуют концепции от Parser Agent
2025-10-29 12:58:55,082 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:58:55,082 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-29 12:58:55,082 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 12:58:55,082 - src.langgraph.workflow - INFO - Фактов: 0
2025-10-29 12:58:55,082 - src.langgraph.workflow - INFO - Концепций: 0
2025-10-29 12:58:55,082 - src.langgraph.workflow - INFO - Вопросов: 0
2025-10-29 12:58:55,082 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-29 12:58:55,082 - src.langgraph.workflow - INFO -   - Parser: извлечено 0 фактов
2025-10-29 12:58:55,082 - src.langgraph.workflow - INFO -   - Quiz: ОШИБКА - Отсутствуют концепции от Parser Agent
2025-10-29 12:58:55,083 - __main__ - ERROR - 
✗ Ошибка: Отсутствуют концепции от Parser Agent
2025-10-29 12:58:55,083 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:58:55,083 - src.utils.gigachat_client - INFO - 📊 ИТОГОВАЯ СТАТИСТИКА ИСПОЛЬЗОВАНИЯ ТОКЕНОВ
2025-10-29 12:58:55,083 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 12:58:55,083 - src.utils.gigachat_client - INFO - LLM запросов: 1
2025-10-29 12:58:55,083 - src.utils.gigachat_client - INFO -   Токенов в промптах: 360
2025-10-29 12:58:55,083 - src.utils.gigachat_client - INFO -   Токенов в ответах: 152
2025-10-29 12:58:55,083 - src.utils.gigachat_client - INFO -   Всего LLM токенов: 512
2025-10-29 12:58:55,083 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 12:58:55,083 - src.utils.gigachat_client - INFO - Embedding запросов: 2
2025-10-29 12:58:55,083 - src.utils.gigachat_client - INFO -   Embedding токенов: 179
2025-10-29 12:58:55,084 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 12:58:55,084 - src.utils.gigachat_client - INFO - ВСЕГО ТОКЕНОВ: 691
2025-10-29 12:58:55,084 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 13:01:10,004 - __main__ - INFO - ======================================================================
2025-10-29 13:01:10,004 - __main__ - INFO - MINDFORGE QUIZ GENERATOR - LANGGRAPH WORKFLOW
2025-10-29 13:01:10,004 - __main__ - INFO - ======================================================================
2025-10-29 13:01:10,004 - __main__ - INFO - 
1️⃣  Загрузка конфигурации
2025-10-29 13:01:10,004 - __main__ - INFO - 
2️⃣  Загрузка лекции: sample_lecture.txt
2025-10-29 13:01:10,004 - src.utils.helpers - INFO - ✓ Загружена лекция: sample_lecture.txt (1096 символов)
2025-10-29 13:01:10,004 - __main__ - INFO -    📄 Длина: 1096 символов
2025-10-29 13:01:10,020 - __main__ - INFO -    📝 Слов: ~131
2025-10-29 13:01:10,020 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-29 13:01:10,020 - src.agents.base_agent.ParserAgent - INFO - ParserAgent инициализирован
2025-10-29 13:01:10,084 - src.rag.chunker - INFO - TextChunker инициализирован (size=500, overlap=100)
2025-10-29 13:01:10,193 - src.rag.vector_store - INFO - VectorStore инициализирован
2025-10-29 13:01:10,193 - src.agents.parser_agent - INFO - ✓ RAG инициализирован
2025-10-29 13:01:10,193 - src.search.web_search - INFO - WebSearchService инициализирован (provider=duckduckgo)
2025-10-29 13:01:10,206 - src.agents.parser_agent - INFO - ✓ WebSearch инициализирован
2025-10-29 13:01:10,206 - src.agents.parser_agent - INFO - ParserAgent готов: RAG=ON, WebSearch=ON
2025-10-29 13:01:10,206 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-29 13:01:10,206 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-29 13:01:10,206 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов
2025-10-29 13:01:10,206 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-29 13:01:10,206 - src.langgraph.workflow - INFO - ✓ Workflow скомпилирован: parser → quiz_generator → END
2025-10-29 13:01:10,206 - src.langgraph.workflow - INFO - QuizGenerationWorkflow инициализирован (RAG=True, WebSearch=True)
2025-10-29 13:01:10,206 - __main__ - INFO -    RAG: ✓ Включен
2025-10-29 13:01:10,206 - __main__ - INFO -    Веб-поиск: ✓ Включен
2025-10-29 13:01:10,206 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-29 13:01:10,206 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-29 13:01:10,206 - src.langgraph.workflow - INFO - Запуск workflow (текст: 1096 символов)
2025-10-29 13:01:10,206 - src.agents.parser_agent - INFO - ==================================================
2025-10-29 13:01:10,206 - src.agents.parser_agent - INFO - Parser Agent: начало работы
2025-10-29 13:01:10,206 - src.agents.parser_agent - INFO - ==================================================
2025-10-29 13:01:10,206 - src.agents.parser_agent - INFO - 📝 Текст лекции: 1096 символов
2025-10-29 13:01:10,206 - src.agents.parser_agent - INFO - 🔍 Режим: RAG (текст > 1000 символов)
2025-10-29 13:01:10,206 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 1/4 - Разбиение текста на чанки
2025-10-29 13:01:10,206 - src.rag.chunker - INFO - Текст разбит на 3 чанков
2025-10-29 13:01:10,206 - src.agents.parser_agent - INFO -    Создано 3 чанков
2025-10-29 13:01:10,206 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 2/4 - Создание векторного индекса FAISS
2025-10-29 13:01:10,206 - src.rag.vector_store - INFO - Создание FAISS индекса для 3 чанков...
2025-10-29 13:01:10,378 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 13:01:10,519 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 13:01:10,534 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #1: tokens=170
2025-10-29 13:01:10,562 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-10-29 13:01:10,575 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-10-29 13:01:10,579 - langchain_community.vectorstores.faiss - WARNING - `embedding_function` is expected to be an Embeddings object, support for passing in a function will soon be removed.
2025-10-29 13:01:10,580 - src.rag.vector_store - INFO - ✓ FAISS индекс создан
2025-10-29 13:01:10,580 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 3/4 - Семантический поиск релевантных фрагментов
2025-10-29 13:01:10,677 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 13:01:10,677 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #2: tokens=9
2025-10-29 13:01:10,677 - src.agents.parser_agent - INFO -    Найдено 3 релевантных фрагментов
2025-10-29 13:01:10,677 - src.agents.parser_agent - INFO -    Объединённый контекст: 1095 символов
2025-10-29 13:01:10,677 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 4/4 - Извлечение фактов через LLM
2025-10-29 13:01:10,755 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 13:01:12,399 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:01:12,399 - src.utils.gigachat_client - INFO - 📊 LLM запрос #1: prompt=360, completion=195, total=555
2025-10-29 13:01:12,400 - src.agents.parser_agent - INFO -    Извлечено 9 фактов
2025-10-29 13:01:12,400 - src.agents.parser_agent - INFO - ✓ RAG завершён: извлечено 9 фактов
2025-10-29 13:01:12,401 - src.agents.parser_agent - INFO - ✓ Извлечено 9 фактов
2025-10-29 13:01:12,401 - src.agents.parser_agent - INFO - 🌐 Проверка фактов в интернете...
2025-10-29 13:01:12,401 - src.search.web_search - INFO - 🔍 Проверка 9 фактов через веб-поиск...
2025-10-29 13:01:12,401 - src.search.web_search - INFO -    Проверка факта 1/9: Квантовая механика — фундаментальная физическая теория, опис...
2025-10-29 13:01:13,028 - src.search.web_search - ERROR - Ошибка DuckDuckGo поиска: _get_url() https://links.duckduckgo.com/d.js RuntimeError: No active exception to reraise
2025-10-29 13:01:13,029 - src.search.web_search - WARNING -       ✗ Не подтверждён
2025-10-29 13:01:13,030 - src.search.web_search - INFO -    Проверка факта 2/9: Основное отличие от классической механики заключается в поня...
2025-10-29 13:01:13,573 - src.search.web_search - ERROR - Ошибка DuckDuckGo поиска: _get_url() https://links.duckduckgo.com/d.js RuntimeError: No active exception to reraise
2025-10-29 13:01:13,574 - src.search.web_search - WARNING -       ✗ Не подтверждён
2025-10-29 13:01:13,574 - src.search.web_search - INFO -    Проверка факта 3/9: Состояние квантовой системы определяется волновой функцией ψ...
2025-10-29 13:01:14,135 - src.search.web_search - ERROR - Ошибка DuckDuckGo поиска: _get_url() https://links.duckduckgo.com/d.js RuntimeError: No active exception to reraise
2025-10-29 13:01:14,135 - src.search.web_search - WARNING -       ✗ Не подтверждён
2025-10-29 13:01:14,136 - src.search.web_search - INFO -    Проверка факта 4/9: Энергия квантуется, то есть принимает дискретные значения (н...
2025-10-29 13:01:14,685 - src.search.web_search - ERROR - Ошибка DuckDuckGo поиска: _get_url() https://links.duckduckgo.com/d.js RuntimeError: No active exception to reraise
2025-10-29 13:01:14,686 - src.search.web_search - WARNING -       ✗ Не подтверждён
2025-10-29 13:01:14,686 - src.search.web_search - INFO -    Проверка факта 5/9: Важнейшее уравнение квантовой механики — уравнение Шрёдингер...
2025-10-29 13:01:15,248 - src.search.web_search - ERROR - Ошибка DuckDuckGo поиска: _get_url() https://links.duckduckgo.com/d.js RuntimeError: No active exception to reraise
2025-10-29 13:01:15,248 - src.search.web_search - WARNING -       ✗ Не подтверждён
2025-10-29 13:01:15,249 - src.search.web_search - INFO -    Проверка факта 6/9: Согласно принципу неопределённости Гейзенберга невозможно од...
2025-10-29 13:01:15,832 - src.search.web_search - ERROR - Ошибка DuckDuckGo поиска: _get_url() https://links.duckduckgo.com/d.js RuntimeError: No active exception to reraise
2025-10-29 13:01:15,832 - src.search.web_search - WARNING -       ✗ Не подтверждён
2025-10-29 13:01:15,832 - src.search.web_search - INFO -    Проверка факта 7/9: Квантовые системы способны пребывать в суперпозиции нескольк...
2025-10-29 13:01:16,428 - src.search.web_search - ERROR - Ошибка DuckDuckGo поиска: _get_url() https://links.duckduckgo.com/d.js RuntimeError: No active exception to reraise
2025-10-29 13:01:16,429 - src.search.web_search - WARNING -       ✗ Не подтверждён
2025-10-29 13:01:16,429 - src.search.web_search - INFO -    Проверка факта 8/9: Приведённая постоянная Планка обозначается символом ℏ....
2025-10-29 13:01:16,962 - src.search.web_search - ERROR - Ошибка DuckDuckGo поиска: _get_url() https://links.duckduckgo.com/d.js RuntimeError: No active exception to reraise
2025-10-29 13:01:16,962 - src.search.web_search - WARNING -       ✗ Не подтверждён
2025-10-29 13:01:16,963 - src.search.web_search - INFO -    Проверка факта 9/9: Формула принципа неопределённости записывается как Δx·Δp ≥ ℏ...
2025-10-29 13:01:17,510 - src.search.web_search - ERROR - Ошибка DuckDuckGo поиска: _get_url() https://links.duckduckgo.com/d.js RuntimeError: No active exception to reraise
2025-10-29 13:01:17,510 - src.search.web_search - WARNING -       ✗ Не подтверждён
2025-10-29 13:01:17,510 - src.search.web_search - INFO - ✓ Проверка завершена: 0/9 фактов подтверждены
2025-10-29 13:01:17,510 - src.agents.parser_agent - INFO - ✓ Проверка завершена: 0/9 фактов подтверждены
2025-10-29 13:01:17,510 - src.agents.parser_agent - INFO - ✓ Создано 0 концепций для QuizAgent
2025-10-29 13:01:17,510 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 13:01:17,510 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-29 13:01:17,510 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 13:01:17,510 - src.agents.adapted_quiz_agent - ERROR - ✗ Ошибка в Quiz Agent: Отсутствуют концепции от Parser Agent
2025-10-29 13:01:17,510 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 13:01:17,510 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-29 13:01:17,510 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 13:01:17,510 - src.langgraph.workflow - INFO - Фактов: 0
2025-10-29 13:01:17,510 - src.langgraph.workflow - INFO - Концепций: 0
2025-10-29 13:01:17,510 - src.langgraph.workflow - INFO - Вопросов: 0
2025-10-29 13:01:17,510 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-29 13:01:17,510 - src.langgraph.workflow - INFO -   - Parser: извлечено 0 фактов
2025-10-29 13:01:17,510 - src.langgraph.workflow - INFO -   - Quiz: ОШИБКА - Отсутствуют концепции от Parser Agent
2025-10-29 13:01:17,510 - __main__ - ERROR - 
✗ Ошибка: Отсутствуют концепции от Parser Agent
2025-10-29 13:01:17,510 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 13:01:17,510 - src.utils.gigachat_client - INFO - 📊 ИТОГОВАЯ СТАТИСТИКА ИСПОЛЬЗОВАНИЯ ТОКЕНОВ
2025-10-29 13:01:17,510 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 13:01:17,510 - src.utils.gigachat_client - INFO - LLM запросов: 1
2025-10-29 13:01:17,510 - src.utils.gigachat_client - INFO -   Токенов в промптах: 360
2025-10-29 13:01:17,510 - src.utils.gigachat_client - INFO -   Токенов в ответах: 195
2025-10-29 13:01:17,510 - src.utils.gigachat_client - INFO -   Всего LLM токенов: 555
2025-10-29 13:01:17,510 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 13:01:17,522 - src.utils.gigachat_client - INFO - Embedding запросов: 2
2025-10-29 13:01:17,522 - src.utils.gigachat_client - INFO -   Embedding токенов: 179
2025-10-29 13:01:17,522 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 13:01:17,522 - src.utils.gigachat_client - INFO - ВСЕГО ТОКЕНОВ: 734
2025-10-29 13:01:17,522 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 13:07:21,094 - __main__ - INFO - ======================================================================
2025-10-29 13:07:21,094 - __main__ - INFO - MINDFORGE QUIZ GENERATOR - LANGGRAPH WORKFLOW
2025-10-29 13:07:21,094 - __main__ - INFO - ======================================================================
2025-10-29 13:07:21,094 - __main__ - INFO - 
1️⃣  Загрузка конфигурации
2025-10-29 13:07:21,094 - __main__ - INFO - 
2️⃣  Загрузка лекции: sample_lecture.txt
2025-10-29 13:07:21,094 - src.utils.helpers - INFO - ✓ Загружена лекция: sample_lecture.txt (1096 символов)
2025-10-29 13:07:21,094 - __main__ - INFO -    📄 Длина: 1096 символов
2025-10-29 13:07:21,094 - __main__ - INFO -    📝 Слов: ~131
2025-10-29 13:07:21,094 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-29 13:07:21,094 - src.agents.base_agent.ParserAgent - INFO - ParserAgent инициализирован
2025-10-29 13:07:21,156 - src.rag.chunker - INFO - TextChunker инициализирован (size=500, overlap=100)
2025-10-29 13:07:21,281 - src.rag.vector_store - INFO - VectorStore инициализирован
2025-10-29 13:07:21,281 - src.agents.parser_agent - INFO - ✓ RAG инициализирован
2025-10-29 13:07:21,281 - __main__ - ERROR - 
✗ Критическая ошибка: WebSearchService.__init__() got an unexpected keyword argument 'search_provider'
2025-10-29 13:07:21,281 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 13:07:21,281 - src.utils.gigachat_client - INFO - 📊 ИТОГОВАЯ СТАТИСТИКА ИСПОЛЬЗОВАНИЯ ТОКЕНОВ
2025-10-29 13:07:21,281 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 13:07:21,281 - src.utils.gigachat_client - INFO - LLM запросов: 0
2025-10-29 13:07:21,281 - src.utils.gigachat_client - INFO -   Токенов в промптах: 0
2025-10-29 13:07:21,281 - src.utils.gigachat_client - INFO -   Токенов в ответах: 0
2025-10-29 13:07:21,281 - src.utils.gigachat_client - INFO -   Всего LLM токенов: 0
2025-10-29 13:07:21,281 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 13:07:21,281 - src.utils.gigachat_client - INFO - Embedding запросов: 0
2025-10-29 13:07:21,281 - src.utils.gigachat_client - INFO -   Embedding токенов: 0
2025-10-29 13:07:21,287 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 13:07:21,287 - src.utils.gigachat_client - INFO - ВСЕГО ТОКЕНОВ: 0
2025-10-29 13:07:21,287 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 13:09:01,506 - __main__ - INFO - ======================================================================
2025-10-29 13:09:01,506 - __main__ - INFO - MINDFORGE QUIZ GENERATOR - LANGGRAPH WORKFLOW
2025-10-29 13:09:01,506 - __main__ - INFO - ======================================================================
2025-10-29 13:09:01,506 - __main__ - INFO - 
1️⃣  Загрузка конфигурации
2025-10-29 13:09:01,506 - __main__ - INFO - 
2️⃣  Загрузка лекции: sample_lecture.txt
2025-10-29 13:09:01,506 - src.utils.helpers - INFO - ✓ Загружена лекция: sample_lecture.txt (1096 символов)
2025-10-29 13:09:01,506 - __main__ - INFO -    📄 Длина: 1096 символов
2025-10-29 13:09:01,506 - __main__ - INFO -    📝 Слов: ~131
2025-10-29 13:09:01,506 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-29 13:09:01,506 - src.agents.base_agent.ParserAgent - INFO - ParserAgent инициализирован
2025-10-29 13:09:01,568 - src.rag.chunker - INFO - TextChunker инициализирован (size=500, overlap=100)
2025-10-29 13:09:01,693 - src.rag.vector_store - INFO - VectorStore инициализирован
2025-10-29 13:09:01,693 - src.agents.parser_agent - INFO - ✓ RAG инициализирован
2025-10-29 13:09:02,037 - src.search.web_search - INFO - ✓ WebSearchService: режим TAVILY (реальный веб-поиск)
2025-10-29 13:09:02,037 - src.agents.parser_agent - INFO - ✓ WebSearch инициализирован
2025-10-29 13:09:02,037 - src.agents.parser_agent - INFO - ParserAgent готов: RAG=ON, WebSearch=ON
2025-10-29 13:09:02,037 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-29 13:09:02,037 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-29 13:09:02,037 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов
2025-10-29 13:09:02,037 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-29 13:09:02,037 - src.langgraph.workflow - INFO - ✓ Workflow скомпилирован: parser → quiz_generator → END
2025-10-29 13:09:02,037 - src.langgraph.workflow - INFO - QuizGenerationWorkflow инициализирован (RAG=True, WebSearch=True)
2025-10-29 13:09:02,037 - __main__ - INFO -    RAG: ✓ Включен
2025-10-29 13:09:02,037 - __main__ - INFO -    Веб-поиск: ✓ Включен
2025-10-29 13:09:02,037 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-29 13:09:02,037 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-29 13:09:02,037 - src.langgraph.workflow - INFO - Запуск workflow (текст: 1096 символов)
2025-10-29 13:09:02,037 - src.agents.parser_agent - INFO - ==================================================
2025-10-29 13:09:02,037 - src.agents.parser_agent - INFO - Parser Agent: начало работы
2025-10-29 13:09:02,037 - src.agents.parser_agent - INFO - ==================================================
2025-10-29 13:09:02,037 - src.agents.parser_agent - INFO - 📝 Текст лекции: 1096 символов
2025-10-29 13:09:02,037 - src.agents.parser_agent - INFO - 🔍 Режим: RAG (текст > 1000 символов)
2025-10-29 13:09:02,037 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 1/4 - Разбиение текста на чанки
2025-10-29 13:09:02,037 - src.rag.chunker - INFO - Текст разбит на 3 чанков
2025-10-29 13:09:02,037 - src.agents.parser_agent - INFO -    Создано 3 чанков
2025-10-29 13:09:02,037 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 2/4 - Создание векторного индекса FAISS
2025-10-29 13:09:02,037 - src.rag.vector_store - INFO - Создание FAISS индекса для 3 чанков...
2025-10-29 13:09:02,162 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 13:09:02,318 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 13:09:02,333 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #1: tokens=170
2025-10-29 13:09:02,333 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-10-29 13:09:02,361 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-10-29 13:09:02,365 - langchain_community.vectorstores.faiss - WARNING - `embedding_function` is expected to be an Embeddings object, support for passing in a function will soon be removed.
2025-10-29 13:09:02,365 - src.rag.vector_store - INFO - ✓ FAISS индекс создан
2025-10-29 13:09:02,366 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 3/4 - Семантический поиск релевантных фрагментов
2025-10-29 13:09:02,444 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 13:09:02,444 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #2: tokens=9
2025-10-29 13:09:02,444 - src.agents.parser_agent - INFO -    Найдено 3 релевантных фрагментов
2025-10-29 13:09:02,444 - src.agents.parser_agent - INFO -    Объединённый контекст: 1095 символов
2025-10-29 13:09:02,444 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 4/4 - Извлечение фактов через LLM
2025-10-29 13:09:02,522 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 13:09:03,773 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:09:03,773 - src.utils.gigachat_client - INFO - 📊 LLM запрос #1: prompt=360, completion=155, total=515
2025-10-29 13:09:03,773 - src.agents.parser_agent - INFO -    Извлечено 9 фактов
2025-10-29 13:09:03,773 - src.agents.parser_agent - INFO - ✓ RAG завершён: извлечено 9 фактов
2025-10-29 13:09:03,773 - src.agents.parser_agent - INFO - ✓ Извлечено 9 фактов
2025-10-29 13:09:03,773 - src.agents.parser_agent - INFO - 🌐 Проверка фактов в интернете...
2025-10-29 13:09:03,773 - src.search.web_search - INFO - 🔍 Проверка 9 фактов (tavily режим)...
2025-10-29 13:09:03,773 - src.search.web_search - INFO -    Факт 1/9: Квантовая механика изучает поведение материи и энергии на ур...
2025-10-29 13:09:05,463 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 13:09:05,463 - src.search.web_search - INFO -    Факт 2/9: Основные принципы квантовой механики включают квантование эн...
2025-10-29 13:09:07,293 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 13:09:07,293 - src.search.web_search - INFO -    Факт 3/9: Волновая функция (ψ(x,t)) полностью описывает состояние кван...
2025-10-29 13:09:11,799 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 13:09:11,799 - src.search.web_search - INFO -    Факт 4/9: Электрон в атоме способен занимать лишь строго определённые ...
2025-10-29 13:09:14,034 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 13:09:14,034 - src.search.web_search - INFO -    Факт 5/9: Важнейшее уравнение квантовой механики — уравнение Шрёдингер...
2025-10-29 13:09:15,655 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 13:09:15,655 - src.search.web_search - INFO -    Факт 6/9: Неопределённость Гейзенберга утверждает невозможность точног...
2025-10-29 13:09:18,342 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 13:09:18,343 - src.search.web_search - INFO -    Факт 7/9: Квантовая система способна пребывать сразу в нескольких сост...
2025-10-29 13:09:20,585 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 13:09:20,585 - src.search.web_search - INFO -    Факт 8/9: Приведённая постоянная Планка обозначается символом ℏ...
2025-10-29 13:09:22,131 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 13:09:22,131 - src.search.web_search - INFO -    Факт 9/9: Эволюция состояния квантовой системы во времени определяется...
2025-10-29 13:09:23,557 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 13:09:23,557 - src.search.web_search - INFO - ✓ Проверка завершена: 9/9 фактов подтверждены (tavily)
2025-10-29 13:09:23,557 - src.agents.parser_agent - INFO - ✓ Проверка завершена: 9/9 фактов подтверждены
2025-10-29 13:09:23,558 - src.agents.parser_agent - INFO - ✓ Создано 9 концепций для QuizAgent
2025-10-29 13:09:23,559 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 13:09:23,559 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-29 13:09:23,559 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 13:09:23,559 - src.agents.adapted_quiz_agent - INFO - Получено 9 концепций от Parser Agent
2025-10-29 13:09:23,560 - src.agents.quiz_agent - INFO - Начало генерации квиза
2025-10-29 13:09:23,560 - src.agents.quiz_agent - INFO - Обнаружено 9 концепций
2025-10-29 13:09:23,560 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Квантовая механика изучает поведение материи и эне
2025-10-29 13:09:23,646 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 13:09:24,852 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:09:24,853 - src.utils.gigachat_client - INFO - 📊 LLM запрос #2: prompt=304, completion=136, total=440
2025-10-29 13:09:24,854 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Квантовая механика изучает поведение материи и эне'
2025-10-29 13:09:24,854 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 13:09:24,854 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Основные принципы квантовой механики включают кван
2025-10-29 13:09:25,905 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:09:25,906 - src.utils.gigachat_client - INFO - 📊 LLM запрос #3: prompt=299, completion=135, total=434
2025-10-29 13:09:25,906 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Основные принципы квантовой механики включают кван'
2025-10-29 13:09:25,907 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 13:09:25,907 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Волновая функция (ψ(x,t)) полностью описывает сост
2025-10-29 13:09:26,588 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:09:26,589 - src.utils.gigachat_client - INFO - 📊 LLM запрос #4: prompt=288, completion=77, total=365
2025-10-29 13:09:26,589 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Волновая функция (ψ(x,t)) полностью описывает сост'
2025-10-29 13:09:26,590 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 13:09:26,590 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Электрон в атоме способен занимать лишь строго опр
2025-10-29 13:09:27,647 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:09:27,648 - src.utils.gigachat_client - INFO - 📊 LLM запрос #5: prompt=298, completion=130, total=428
2025-10-29 13:09:27,648 - src.agents.quiz_agent - WARNING - JSON невалиден, попытка исправления...
2025-10-29 13:09:27,648 - src.agents.quiz_agent - ERROR - Не удалось исправить JSON
2025-10-29 13:09:27,649 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: 1 validation error for Question
__root__
  Expecting ',' delimiter: line 1 column 192 (char 191) [type=value_error.jsondecode, input_value='{"question_text":"Поч...,"difficulty":"medium"}', input_type=str]
2025-10-29 13:09:27,649 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 13:09:28,693 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:09:28,694 - src.utils.gigachat_client - INFO - 📊 LLM запрос #6: prompt=97, completion=134, total=231
2025-10-29 13:09:28,694 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Электрон в атоме способен занимать лишь строго опр'
2025-10-29 13:09:28,694 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 13:09:28,695 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Важнейшее уравнение квантовой механики — уравнение
2025-10-29 13:09:29,811 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:09:29,811 - src.utils.gigachat_client - INFO - 📊 LLM запрос #7: prompt=302, completion=138, total=440
2025-10-29 13:09:29,811 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Важнейшее уравнение квантовой механики — уравнение'
2025-10-29 13:09:29,812 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 13:09:29,812 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Неопределённость Гейзенберга утверждает невозможно
2025-10-29 13:09:30,683 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:09:30,683 - src.utils.gigachat_client - INFO - 📊 LLM запрос #8: prompt=284, completion=102, total=386
2025-10-29 13:09:30,684 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Неопределённость Гейзенберга утверждает невозможно'
2025-10-29 13:09:30,684 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 13:09:30,685 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Квантовая система способна пребывать сразу в неско
2025-10-29 13:09:31,656 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:09:31,656 - src.utils.gigachat_client - INFO - 📊 LLM запрос #9: prompt=285, completion=121, total=406
2025-10-29 13:09:31,657 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Квантовая система способна пребывать сразу в неско'
2025-10-29 13:09:31,657 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 13:09:31,657 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Приведённая постоянная Планка обозначается символо
2025-10-29 13:09:32,575 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:09:32,575 - src.utils.gigachat_client - INFO - 📊 LLM запрос #10: prompt=280, completion=106, total=386
2025-10-29 13:09:32,575 - src.agents.quiz_agent - WARNING - JSON невалиден, попытка исправления...
2025-10-29 13:09:32,575 - src.agents.quiz_agent - ERROR - Не удалось исправить JSON
2025-10-29 13:09:32,576 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: 1 validation error for Question
__root__
  Expecting ':' delimiter: line 1 column 9 (char 8) [type=value_error.jsondecode, input_value='{"     "question_text":"...,"difficulty":"easy"  }', input_type=str]
2025-10-29 13:09:32,576 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 13:09:33,712 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:09:33,712 - src.utils.gigachat_client - INFO - 📊 LLM запрос #11: prompt=97, completion=132, total=229
2025-10-29 13:09:33,713 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Приведённая постоянная Планка обозначается символо'
2025-10-29 13:09:33,713 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 13:09:33,713 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Эволюция состояния квантовой системы во времени оп
2025-10-29 13:09:34,786 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:09:34,786 - src.utils.gigachat_client - INFO - 📊 LLM запрос #12: prompt=286, completion=130, total=416
2025-10-29 13:09:34,787 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Эволюция состояния квантовой системы во времени оп'
2025-10-29 13:09:34,787 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 13:09:34,787 - src.agents.quiz_agent - INFO - Квиз сгенерирован: 7 вопросов
2025-10-29 13:09:34,787 - src.agents.adapted_quiz_agent - INFO - ✓ Сгенерировано 7 вопросов
2025-10-29 13:09:34,788 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по сложности: {'easy': 5, 'medium': 2, 'hard': 0}
2025-10-29 13:09:34,788 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по типам: {'multiple_choice': 5, 'true_false': 0, 'short_answer': 2}
2025-10-29 13:09:34,788 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 13:09:34,788 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-29 13:09:34,789 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 13:09:34,789 - src.langgraph.workflow - INFO - Фактов: 9
2025-10-29 13:09:34,789 - src.langgraph.workflow - INFO - Концепций: 9
2025-10-29 13:09:34,789 - src.langgraph.workflow - INFO - Вопросов: 7
2025-10-29 13:09:34,789 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-29 13:09:34,789 - src.langgraph.workflow - INFO -   - Parser: извлечено 9 фактов
2025-10-29 13:09:34,789 - src.langgraph.workflow - INFO -   - Quiz: сгенерировано 7 вопросов
2025-10-29 13:09:34,789 - __main__ - INFO - 
5️⃣  Форматирование результатов
2025-10-29 13:09:34,790 - src.utils.helpers - INFO - ✓ Результаты сохранены: quiz_result.json
2025-10-29 13:09:34,792 - __main__ - INFO - 
6️⃣  Статистика использования токенов
2025-10-29 13:09:34,792 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 13:09:34,792 - src.utils.gigachat_client - INFO - 📊 ИТОГОВАЯ СТАТИСТИКА ИСПОЛЬЗОВАНИЯ ТОКЕНОВ
2025-10-29 13:09:34,792 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 13:09:34,793 - src.utils.gigachat_client - INFO - LLM запросов: 12
2025-10-29 13:09:34,793 - src.utils.gigachat_client - INFO -   Токенов в промптах: 3,180
2025-10-29 13:09:34,793 - src.utils.gigachat_client - INFO -   Токенов в ответах: 1,496
2025-10-29 13:09:34,793 - src.utils.gigachat_client - INFO -   Всего LLM токенов: 4,676
2025-10-29 13:09:34,793 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 13:09:34,793 - src.utils.gigachat_client - INFO - Embedding запросов: 2
2025-10-29 13:09:34,793 - src.utils.gigachat_client - INFO -   Embedding токенов: 179
2025-10-29 13:09:34,793 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 13:09:34,793 - src.utils.gigachat_client - INFO - ВСЕГО ТОКЕНОВ: 4,855
2025-10-29 13:09:34,793 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 13:09:34,794 - __main__ - INFO - 
======================================================================
2025-10-29 13:09:34,794 - __main__ - INFO - ✓ ГЕНЕРАЦИЯ ЗАВЕРШЕНА УСПЕШНО
2025-10-29 13:09:34,794 - __main__ - INFO - ======================================================================
2025-10-29 13:09:34,794 - __main__ - INFO - 📁 Результаты: quiz_result.json
2025-10-29 13:09:34,794 - __main__ - INFO - 📋 Логи: quiz_generation.log
2025-10-29 13:12:07,010 - __main__ - INFO - ======================================================================
2025-10-29 13:12:07,010 - __main__ - INFO - MINDFORGE QUIZ GENERATOR - LANGGRAPH WORKFLOW
2025-10-29 13:12:07,010 - __main__ - INFO - ======================================================================
2025-10-29 13:12:07,010 - __main__ - INFO - 
1️⃣  Загрузка конфигурации
2025-10-29 13:12:07,025 - __main__ - INFO - 
2️⃣  Загрузка лекции: sample_lecture.txt
2025-10-29 13:12:07,025 - src.utils.helpers - INFO - ✓ Загружена лекция: sample_lecture.txt (1096 символов)
2025-10-29 13:12:07,025 - __main__ - INFO -    📄 Длина: 1096 символов
2025-10-29 13:12:07,025 - __main__ - INFO -    📝 Слов: ~131
2025-10-29 13:12:07,025 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-29 13:12:07,025 - src.agents.base_agent.ParserAgent - INFO - ParserAgent инициализирован
2025-10-29 13:12:07,088 - src.rag.chunker - INFO - TextChunker инициализирован (size=500, overlap=100)
2025-10-29 13:12:07,197 - src.rag.vector_store - INFO - VectorStore инициализирован
2025-10-29 13:12:07,197 - src.agents.parser_agent - INFO - ✓ RAG инициализирован
2025-10-29 13:12:07,197 - src.agents.parser_agent - INFO - ParserAgent готов: RAG=ON, WebSearch=OFF
2025-10-29 13:12:07,213 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-29 13:12:07,213 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-29 13:12:07,213 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов
2025-10-29 13:12:07,213 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-29 13:12:07,213 - src.langgraph.workflow - INFO - ✓ Workflow скомпилирован: parser → quiz_generator → END
2025-10-29 13:12:07,213 - src.langgraph.workflow - INFO - QuizGenerationWorkflow инициализирован (RAG=True, WebSearch=False)
2025-10-29 13:12:07,213 - __main__ - INFO -    RAG: ✓ Включен
2025-10-29 13:12:07,213 - __main__ - INFO -    Веб-поиск: ✗ Отключен
2025-10-29 13:12:07,213 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-29 13:12:07,213 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-29 13:12:07,213 - src.langgraph.workflow - INFO - Запуск workflow (текст: 1096 символов)
2025-10-29 13:12:07,213 - src.agents.parser_agent - INFO - ==================================================
2025-10-29 13:12:07,213 - src.agents.parser_agent - INFO - Parser Agent: начало работы
2025-10-29 13:12:07,213 - src.agents.parser_agent - INFO - ==================================================
2025-10-29 13:12:07,213 - src.agents.parser_agent - INFO - 📝 Текст лекции: 1096 символов
2025-10-29 13:12:07,213 - src.agents.parser_agent - INFO - 🔍 Режим: RAG (текст > 1000 символов)
2025-10-29 13:12:07,213 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 1/4 - Разбиение текста на чанки
2025-10-29 13:12:07,213 - src.rag.chunker - INFO - Текст разбит на 3 чанков
2025-10-29 13:12:07,213 - src.agents.parser_agent - INFO -    Создано 3 чанков
2025-10-29 13:12:07,213 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 2/4 - Создание векторного индекса FAISS
2025-10-29 13:12:07,213 - src.rag.vector_store - INFO - Создание FAISS индекса для 3 чанков...
2025-10-29 13:12:07,355 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 13:12:07,511 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 13:12:07,526 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #1: tokens=170
2025-10-29 13:12:07,542 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-10-29 13:12:07,558 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-10-29 13:12:07,558 - langchain_community.vectorstores.faiss - WARNING - `embedding_function` is expected to be an Embeddings object, support for passing in a function will soon be removed.
2025-10-29 13:12:07,558 - src.rag.vector_store - INFO - ✓ FAISS индекс создан
2025-10-29 13:12:07,558 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 3/4 - Семантический поиск релевантных фрагментов
2025-10-29 13:12:07,667 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 13:12:07,667 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #2: tokens=9
2025-10-29 13:12:07,667 - src.agents.parser_agent - INFO -    Найдено 3 релевантных фрагментов
2025-10-29 13:12:07,667 - src.agents.parser_agent - INFO -    Объединённый контекст: 1095 символов
2025-10-29 13:12:07,667 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 4/4 - Извлечение фактов через LLM
2025-10-29 13:12:07,745 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 13:12:09,121 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:12:09,121 - src.utils.gigachat_client - INFO - 📊 LLM запрос #1: prompt=360, completion=166, total=526
2025-10-29 13:12:09,121 - src.agents.parser_agent - INFO -    Извлечено 9 фактов
2025-10-29 13:12:09,121 - src.agents.parser_agent - INFO - ✓ RAG завершён: извлечено 9 фактов
2025-10-29 13:12:09,121 - src.agents.parser_agent - INFO - ✓ Извлечено 9 фактов
2025-10-29 13:12:09,121 - src.agents.parser_agent - INFO - ✓ Создано 9 концепций для QuizAgent
2025-10-29 13:12:09,121 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 13:12:09,121 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-29 13:12:09,121 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 13:12:09,121 - src.agents.adapted_quiz_agent - INFO - Получено 9 концепций от Parser Agent
2025-10-29 13:12:09,121 - src.agents.quiz_agent - INFO - Начало генерации квиза
2025-10-29 13:12:09,121 - src.agents.quiz_agent - INFO - Обнаружено 9 концепций
2025-10-29 13:12:09,121 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Квантовая механика — теоретическая основа физики м
2025-10-29 13:12:09,215 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 13:12:10,576 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:12:10,576 - src.utils.gigachat_client - INFO - 📊 LLM запрос #2: prompt=306, completion=153, total=459
2025-10-29 13:12:10,576 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Квантовая механика — теоретическая основа физики м'
2025-10-29 13:12:10,576 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 13:12:10,591 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Основные принципы квантовой механики включают кван
2025-10-29 13:12:11,921 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:12:11,921 - src.utils.gigachat_client - INFO - 📊 LLM запрос #3: prompt=304, completion=167, total=471
2025-10-29 13:12:11,921 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Основные принципы квантовой механики включают кван'
2025-10-29 13:12:11,921 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 13:12:11,921 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Волновая функция (ψ(x,t)) полностью описывает сост
2025-10-29 13:12:13,235 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:12:13,235 - src.utils.gigachat_client - INFO - 📊 LLM запрос #4: prompt=289, completion=155, total=444
2025-10-29 13:12:13,235 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Волновая функция (ψ(x,t)) полностью описывает сост'
2025-10-29 13:12:13,235 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 13:12:13,235 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Энергия микромира принимает дискретные (квантованн
2025-10-29 13:12:14,094 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:12:14,094 - src.utils.gigachat_client - INFO - 📊 LLM запрос #5: prompt=305, completion=102, total=407
2025-10-29 13:12:14,094 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Энергия микромира принимает дискретные (квантованн'
2025-10-29 13:12:14,094 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 13:12:14,094 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Уравнение Шрёдингера описывает изменение состояния
2025-10-29 13:12:15,269 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:12:15,269 - src.utils.gigachat_client - INFO - 📊 LLM запрос #6: prompt=285, completion=152, total=437
2025-10-29 13:12:15,269 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Уравнение Шрёдингера описывает изменение состояния'
2025-10-29 13:12:15,269 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 13:12:15,269 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Принцип неопределённости Гейзенберга ограничивает 
2025-10-29 13:12:16,536 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:12:16,536 - src.utils.gigachat_client - INFO - 📊 LLM запрос #7: prompt=288, completion=152, total=440
2025-10-29 13:12:16,536 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Принцип неопределённости Гейзенберга ограничивает '
2025-10-29 13:12:16,536 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 13:12:16,536 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Квантовые системы способны пребывать в суперпозици
2025-10-29 13:12:17,881 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:12:17,881 - src.utils.gigachat_client - INFO - 📊 LLM запрос #8: prompt=285, completion=169, total=454
2025-10-29 13:12:17,881 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Квантовые системы способны пребывать в суперпозици'
2025-10-29 13:12:17,881 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 13:12:17,881 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Приведённая постоянная Планка обозначается как ℏ
2025-10-29 13:12:18,648 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:12:18,648 - src.utils.gigachat_client - INFO - 📊 LLM запрос #9: prompt=282, completion=81, total=363
2025-10-29 13:12:18,648 - src.agents.quiz_agent - WARNING - JSON невалиден, попытка исправления...
2025-10-29 13:12:18,648 - src.agents.quiz_agent - ERROR - Не удалось исправить JSON
2025-10-29 13:12:18,648 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: 1 validation error for Question
__root__
  Expecting ',' delimiter: line 1 column 205 (char 204) [type=value_error.jsondecode, input_value='{"question_text":"Как....","difficulty":"easy"}', input_type=str]
2025-10-29 13:12:18,648 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 13:12:19,789 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:12:19,789 - src.utils.gigachat_client - INFO - 📊 LLM запрос #10: prompt=99, completion=137, total=236
2025-10-29 13:12:19,789 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Приведённая постоянная Планка обозначается как ℏ'
2025-10-29 13:12:19,789 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 13:12:19,789 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Формула принципа неопределённости: Δx × Δp ≥ ℏ / 2
2025-10-29 13:12:21,025 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:12:21,027 - src.utils.gigachat_client - INFO - 📊 LLM запрос #11: prompt=310, completion=146, total=456
2025-10-29 13:12:21,027 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Формула принципа неопределённости: Δx × Δp ≥ ℏ / 2'
2025-10-29 13:12:21,027 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 13:12:21,027 - src.agents.quiz_agent - INFO - Квиз сгенерирован: 7 вопросов
2025-10-29 13:12:21,027 - src.agents.adapted_quiz_agent - INFO - ✓ Сгенерировано 7 вопросов
2025-10-29 13:12:21,027 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по сложности: {'easy': 3, 'medium': 4, 'hard': 0}
2025-10-29 13:12:21,027 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по типам: {'multiple_choice': 7, 'true_false': 0, 'short_answer': 0}
2025-10-29 13:12:21,028 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 13:12:21,028 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-29 13:12:21,028 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 13:12:21,028 - src.langgraph.workflow - INFO - Фактов: 9
2025-10-29 13:12:21,028 - src.langgraph.workflow - INFO - Концепций: 9
2025-10-29 13:12:21,028 - src.langgraph.workflow - INFO - Вопросов: 7
2025-10-29 13:12:21,029 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-29 13:12:21,029 - src.langgraph.workflow - INFO -   - Parser: извлечено 9 фактов
2025-10-29 13:12:21,029 - src.langgraph.workflow - INFO -   - Quiz: сгенерировано 7 вопросов
2025-10-29 13:12:21,029 - __main__ - INFO - 
5️⃣  Форматирование результатов
2025-10-29 13:12:21,030 - src.utils.helpers - INFO - ✓ Результаты сохранены: quiz_result.json
2025-10-29 13:12:21,031 - __main__ - INFO - 
6️⃣  Статистика использования токенов
2025-10-29 13:12:21,031 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 13:12:21,031 - src.utils.gigachat_client - INFO - 📊 ИТОГОВАЯ СТАТИСТИКА ИСПОЛЬЗОВАНИЯ ТОКЕНОВ
2025-10-29 13:12:21,031 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 13:12:21,031 - src.utils.gigachat_client - INFO - LLM запросов: 11
2025-10-29 13:12:21,031 - src.utils.gigachat_client - INFO -   Токенов в промптах: 3,113
2025-10-29 13:12:21,031 - src.utils.gigachat_client - INFO -   Токенов в ответах: 1,580
2025-10-29 13:12:21,031 - src.utils.gigachat_client - INFO -   Всего LLM токенов: 4,693
2025-10-29 13:12:21,031 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 13:12:21,031 - src.utils.gigachat_client - INFO - Embedding запросов: 2
2025-10-29 13:12:21,031 - src.utils.gigachat_client - INFO -   Embedding токенов: 179
2025-10-29 13:12:21,032 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 13:12:21,032 - src.utils.gigachat_client - INFO - ВСЕГО ТОКЕНОВ: 4,872
2025-10-29 13:12:21,032 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 13:12:21,032 - __main__ - INFO - 
======================================================================
2025-10-29 13:12:21,032 - __main__ - INFO - ✓ ГЕНЕРАЦИЯ ЗАВЕРШЕНА УСПЕШНО
2025-10-29 13:12:21,033 - __main__ - INFO - ======================================================================
2025-10-29 13:12:21,033 - __main__ - INFO - 📁 Результаты: quiz_result.json
2025-10-29 13:12:21,033 - __main__ - INFO - 📋 Логи: quiz_generation.log
2025-10-29 13:15:04,936 - __main__ - INFO - ======================================================================
2025-10-29 13:15:04,936 - __main__ - INFO - MINDFORGE QUIZ GENERATOR - LANGGRAPH WORKFLOW
2025-10-29 13:15:04,936 - __main__ - INFO - ======================================================================
2025-10-29 13:15:04,936 - __main__ - INFO - 
1️⃣  Загрузка конфигурации
2025-10-29 13:15:04,936 - __main__ - INFO - 
2️⃣  Загрузка лекции: sample_lecture.txt
2025-10-29 13:15:04,936 - src.utils.helpers - INFO - ✓ Загружена лекция: sample_lecture.txt (1096 символов)
2025-10-29 13:15:04,936 - __main__ - INFO -    📄 Длина: 1096 символов
2025-10-29 13:15:04,936 - __main__ - INFO -    📝 Слов: ~131
2025-10-29 13:15:04,936 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-29 13:15:04,936 - src.agents.base_agent.ParserAgent - INFO - ParserAgent инициализирован
2025-10-29 13:15:04,998 - src.rag.chunker - INFO - TextChunker инициализирован (size=500, overlap=100)
2025-10-29 13:15:05,123 - src.rag.vector_store - INFO - VectorStore инициализирован
2025-10-29 13:15:05,123 - src.agents.parser_agent - INFO - ✓ RAG инициализирован
2025-10-29 13:15:05,265 - src.search.web_search - INFO - ✓ WebSearchService: режим TAVILY (реальный веб-поиск)
2025-10-29 13:15:05,265 - src.agents.parser_agent - INFO - ✓ WebSearch инициализирован
2025-10-29 13:15:05,265 - src.agents.parser_agent - INFO - ParserAgent готов: RAG=ON, WebSearch=ON
2025-10-29 13:15:05,265 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-29 13:15:05,265 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-29 13:15:05,265 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов
2025-10-29 13:15:05,265 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-29 13:15:05,265 - src.langgraph.workflow - INFO - ✓ Workflow скомпилирован: parser → quiz_generator → END
2025-10-29 13:15:05,265 - src.langgraph.workflow - INFO - QuizGenerationWorkflow инициализирован (RAG=True, WebSearch=True)
2025-10-29 13:15:05,265 - __main__ - INFO -    RAG: ✓ Включен
2025-10-29 13:15:05,265 - __main__ - INFO -    Веб-поиск: ✓ Включен
2025-10-29 13:15:05,265 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-29 13:15:05,265 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-29 13:15:05,265 - src.langgraph.workflow - INFO - Запуск workflow (текст: 1096 символов)
2025-10-29 13:15:05,265 - src.agents.parser_agent - INFO - ==================================================
2025-10-29 13:15:05,265 - src.agents.parser_agent - INFO - Parser Agent: начало работы
2025-10-29 13:15:05,265 - src.agents.parser_agent - INFO - ==================================================
2025-10-29 13:15:05,265 - src.agents.parser_agent - INFO - 📝 Текст лекции: 1096 символов
2025-10-29 13:15:05,265 - src.agents.parser_agent - INFO - 🔍 Режим: RAG (текст > 1000 символов)
2025-10-29 13:15:05,265 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 1/4 - Разбиение текста на чанки
2025-10-29 13:15:05,265 - src.rag.chunker - INFO - Текст разбит на 3 чанков
2025-10-29 13:15:05,265 - src.agents.parser_agent - INFO -    Создано 3 чанков
2025-10-29 13:15:05,265 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 2/4 - Создание векторного индекса FAISS
2025-10-29 13:15:05,265 - src.rag.vector_store - INFO - Создание FAISS индекса для 3 чанков...
2025-10-29 13:15:05,406 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 13:15:05,563 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 13:15:05,578 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #1: tokens=170
2025-10-29 13:15:05,578 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-10-29 13:15:05,594 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-10-29 13:15:05,609 - langchain_community.vectorstores.faiss - WARNING - `embedding_function` is expected to be an Embeddings object, support for passing in a function will soon be removed.
2025-10-29 13:15:05,609 - src.rag.vector_store - INFO - ✓ FAISS индекс создан
2025-10-29 13:15:05,609 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 3/4 - Семантический поиск релевантных фрагментов
2025-10-29 13:15:05,717 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 13:15:05,719 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #2: tokens=9
2025-10-29 13:15:05,723 - src.agents.parser_agent - INFO -    Найдено 3 релевантных фрагментов
2025-10-29 13:15:05,723 - src.agents.parser_agent - INFO -    Объединённый контекст: 1095 символов
2025-10-29 13:15:05,723 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 4/4 - Извлечение фактов через LLM
2025-10-29 13:15:05,812 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 13:15:07,110 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:15:07,110 - src.utils.gigachat_client - INFO - 📊 LLM запрос #1: prompt=360, completion=158, total=518
2025-10-29 13:15:07,110 - src.agents.parser_agent - INFO -    Извлечено 9 фактов
2025-10-29 13:15:07,110 - src.agents.parser_agent - INFO - ✓ RAG завершён: извлечено 9 фактов
2025-10-29 13:15:07,110 - src.agents.parser_agent - INFO - ✓ Извлечено 9 фактов
2025-10-29 13:15:07,110 - src.agents.parser_agent - INFO - 🌐 Проверка фактов в интернете...
2025-10-29 13:15:07,110 - src.search.web_search - INFO - 🔍 Проверка 9 фактов (tavily режим)...
2025-10-29 13:15:07,110 - src.search.web_search - INFO -    Факт 1/9: Квантовая механика изучает поведение частиц на уровне атома ...
2025-10-29 13:15:08,627 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 13:15:08,627 - src.search.web_search - INFO -    Факт 2/9: Основные отличия от классической механики включают квантован...
2025-10-29 13:15:10,427 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 13:15:10,442 - src.search.web_search - INFO -    Факт 3/9: Волновая функция (ψ(x,t)) полностью описывает состояние кван...
2025-10-29 13:15:12,063 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 13:15:12,063 - src.search.web_search - INFO -    Факт 4/9: Энергия квантуется, то есть принимает строго определённые ди...
2025-10-29 13:15:13,615 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 13:15:13,615 - src.search.web_search - INFO -    Факт 5/9: Важнейшее уравнение квантовой механики — уравнение Шрёдингер...
2025-10-29 13:15:15,541 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 13:15:15,541 - src.search.web_search - INFO -    Факт 6/9: Принцип неопределённости Гейзенберга ограничивает точность о...
2025-10-29 13:15:21,453 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 13:15:21,453 - src.search.web_search - INFO -    Факт 7/9: Квантовая система способна пребывать в суперпозиции нескольк...
2025-10-29 13:15:23,377 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 13:15:23,377 - src.search.web_search - INFO -    Факт 8/9: Приведённая постоянная Планка обозначается как ℏ....
2025-10-29 13:15:25,002 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 13:15:25,002 - src.search.web_search - INFO -    Факт 9/9: Эволюция состояния квантовой системы определяется уравнением...
2025-10-29 13:15:26,630 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 13:15:26,630 - src.search.web_search - INFO - ✓ Проверка завершена: 9/9 фактов подтверждены (tavily)
2025-10-29 13:15:26,630 - src.agents.parser_agent - INFO - ✓ Проверка завершена: 9/9 фактов подтверждены
2025-10-29 13:15:26,630 - src.agents.parser_agent - INFO - ✓ Создано 9 концепций для QuizAgent
2025-10-29 13:15:26,630 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 13:15:26,630 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-29 13:15:26,630 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 13:15:26,630 - src.agents.adapted_quiz_agent - INFO - Получено 9 концепций от Parser Agent
2025-10-29 13:15:26,630 - src.agents.quiz_agent - INFO - Начало генерации квиза
2025-10-29 13:15:26,630 - src.agents.quiz_agent - INFO - Обнаружено 9 концепций
2025-10-29 13:15:26,630 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Квантовая механика изучает поведение частиц на уро
2025-10-29 13:15:26,708 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 13:15:27,740 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:15:27,755 - src.utils.gigachat_client - INFO - 📊 LLM запрос #2: prompt=301, completion=133, total=434
2025-10-29 13:15:27,755 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Квантовая механика изучает поведение частиц на уро'
2025-10-29 13:15:27,755 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 13:15:27,755 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Основные отличия от классической механики включают
2025-10-29 13:15:28,789 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:15:28,789 - src.utils.gigachat_client - INFO - 📊 LLM запрос #3: prompt=282, completion=137, total=419
2025-10-29 13:15:28,789 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Основные отличия от классической механики включают'
2025-10-29 13:15:28,789 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 13:15:28,789 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Волновая функция (ψ(x,t)) полностью описывает сост
2025-10-29 13:15:29,915 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:15:29,915 - src.utils.gigachat_client - INFO - 📊 LLM запрос #4: prompt=305, completion=151, total=456
2025-10-29 13:15:29,915 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Волновая функция (ψ(x,t)) полностью описывает сост'
2025-10-29 13:15:29,915 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 13:15:29,915 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Энергия квантуется, то есть принимает строго опред
2025-10-29 13:15:30,869 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:15:30,869 - src.utils.gigachat_client - INFO - 📊 LLM запрос #5: prompt=288, completion=124, total=412
2025-10-29 13:15:30,869 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Энергия квантуется, то есть принимает строго опред'
2025-10-29 13:15:30,869 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 13:15:30,869 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Важнейшее уравнение квантовой механики — уравнение
2025-10-29 13:15:31,949 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:15:31,949 - src.utils.gigachat_client - INFO - 📊 LLM запрос #6: prompt=287, completion=138, total=425
2025-10-29 13:15:31,949 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Важнейшее уравнение квантовой механики — уравнение'
2025-10-29 13:15:31,949 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 13:15:31,949 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Принцип неопределённости Гейзенберга ограничивает 
2025-10-29 13:15:33,106 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:15:33,106 - src.utils.gigachat_client - INFO - 📊 LLM запрос #7: prompt=303, completion=123, total=426
2025-10-29 13:15:33,106 - src.agents.quiz_agent - WARNING - JSON невалиден, попытка исправления...
2025-10-29 13:15:33,106 - src.agents.quiz_agent - ERROR - Не удалось исправить JSON
2025-10-29 13:15:33,106 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: 1 validation error for Question
__root__
  Expecting ',' delimiter: line 1 column 172 (char 171) [type=value_error.jsondecode, input_value='{"question_text": "Пр..."difficulty": "medium"}', input_type=str]
2025-10-29 13:15:33,106 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 13:15:34,452 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:15:34,452 - src.utils.gigachat_client - INFO - 📊 LLM запрос #8: prompt=95, completion=185, total=280
2025-10-29 13:15:34,452 - src.agents.quiz_agent - WARNING - Неверный question_type 'mcq', используем 'short_answer'
2025-10-29 13:15:34,452 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Принцип неопределённости Гейзенберга ограничивает '
2025-10-29 13:15:34,452 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 13:15:34,452 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Квантовая система способна пребывать в суперпозици
2025-10-29 13:15:35,313 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:15:35,313 - src.utils.gigachat_client - INFO - 📊 LLM запрос #9: prompt=287, completion=108, total=395
2025-10-29 13:15:35,313 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Квантовая система способна пребывать в суперпозици'
2025-10-29 13:15:35,313 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 13:15:35,313 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Приведённая постоянная Планка обозначается как ℏ
2025-10-29 13:15:36,032 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:15:36,032 - src.utils.gigachat_client - INFO - 📊 LLM запрос #10: prompt=298, completion=88, total=386
2025-10-29 13:15:36,032 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Приведённая постоянная Планка обозначается как ℏ'
2025-10-29 13:15:36,048 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 13:15:36,048 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Эволюция состояния квантовой системы определяется 
2025-10-29 13:15:37,034 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 13:15:37,034 - src.utils.gigachat_client - INFO - 📊 LLM запрос #11: prompt=285, completion=128, total=413
2025-10-29 13:15:37,034 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Эволюция состояния квантовой системы определяется '
2025-10-29 13:15:37,034 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 13:15:37,034 - src.agents.quiz_agent - INFO - Квиз сгенерирован: 7 вопросов
2025-10-29 13:15:37,034 - src.agents.adapted_quiz_agent - INFO - ✓ Сгенерировано 7 вопросов
2025-10-29 13:15:37,034 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по сложности: {'easy': 4, 'medium': 3, 'hard': 0}
2025-10-29 13:15:37,034 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по типам: {'multiple_choice': 6, 'true_false': 0, 'short_answer': 1}
2025-10-29 13:15:37,034 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 13:15:37,034 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-29 13:15:37,034 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 13:15:37,034 - src.langgraph.workflow - INFO - Фактов: 9
2025-10-29 13:15:37,034 - src.langgraph.workflow - INFO - Концепций: 9
2025-10-29 13:15:37,034 - src.langgraph.workflow - INFO - Вопросов: 7
2025-10-29 13:15:37,034 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-29 13:15:37,034 - src.langgraph.workflow - INFO -   - Parser: извлечено 9 фактов
2025-10-29 13:15:37,034 - src.langgraph.workflow - INFO -   - Quiz: сгенерировано 7 вопросов
2025-10-29 13:15:37,034 - __main__ - INFO - 
5️⃣  Форматирование результатов
2025-10-29 13:15:37,034 - src.utils.helpers - INFO - ✓ Результаты сохранены: quiz_result.json
2025-10-29 13:15:37,043 - __main__ - INFO - 
6️⃣  Статистика использования токенов
2025-10-29 13:15:37,043 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 13:15:37,043 - src.utils.gigachat_client - INFO - 📊 ИТОГОВАЯ СТАТИСТИКА ИСПОЛЬЗОВАНИЯ ТОКЕНОВ
2025-10-29 13:15:37,043 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 13:15:37,043 - src.utils.gigachat_client - INFO - LLM запросов: 11
2025-10-29 13:15:37,043 - src.utils.gigachat_client - INFO -   Токенов в промптах: 3,091
2025-10-29 13:15:37,043 - src.utils.gigachat_client - INFO -   Токенов в ответах: 1,473
2025-10-29 13:15:37,043 - src.utils.gigachat_client - INFO -   Всего LLM токенов: 4,564
2025-10-29 13:15:37,043 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 13:15:37,043 - src.utils.gigachat_client - INFO - Embedding запросов: 2
2025-10-29 13:15:37,043 - src.utils.gigachat_client - INFO -   Embedding токенов: 179
2025-10-29 13:15:37,043 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 13:15:37,043 - src.utils.gigachat_client - INFO - ВСЕГО ТОКЕНОВ: 4,743
2025-10-29 13:15:37,043 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 13:15:37,046 - __main__ - INFO - 
======================================================================
2025-10-29 13:15:37,046 - __main__ - INFO - ✓ ГЕНЕРАЦИЯ ЗАВЕРШЕНА УСПЕШНО
2025-10-29 13:15:37,046 - __main__ - INFO - ======================================================================
2025-10-29 13:15:37,046 - __main__ - INFO - 📁 Результаты: quiz_result.json
2025-10-29 13:15:37,046 - __main__ - INFO - 📋 Логи: quiz_generation.log
2025-10-29 16:36:46,056 - __main__ - INFO - ======================================================================
2025-10-29 16:36:46,056 - __main__ - INFO - MINDFORGE QUIZ GENERATOR - LANGGRAPH WORKFLOW
2025-10-29 16:36:46,056 - __main__ - INFO - ======================================================================
2025-10-29 16:36:46,056 - __main__ - INFO - 
1️⃣  Загрузка конфигурации
2025-10-29 16:36:46,058 - __main__ - INFO - 
2️⃣  Загрузка лекции: sample_lecture.txt
2025-10-29 16:36:46,058 - src.utils.helpers - INFO - ✓ Загружена лекция: sample_lecture.txt (1094 символов)
2025-10-29 16:36:46,058 - __main__ - INFO -    📄 Длина: 1094 символов
2025-10-29 16:36:46,058 - __main__ - INFO -    📝 Слов: ~131
2025-10-29 16:36:46,058 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-29 16:36:46,058 - src.agents.base_agent.ParserAgent - INFO - ParserAgent инициализирован
2025-10-29 16:36:46,131 - src.rag.chunker - INFO - TextChunker инициализирован (size=500, overlap=100)
2025-10-29 16:36:46,258 - src.rag.vector_store - INFO - VectorStore инициализирован
2025-10-29 16:36:46,258 - src.agents.parser_agent - INFO - ✓ RAG инициализирован
2025-10-29 16:36:46,579 - src.search.web_search - INFO - ✓ WebSearchService: режим TAVILY (реальный веб-поиск)
2025-10-29 16:36:46,579 - src.agents.parser_agent - INFO - ✓ WebSearch инициализирован
2025-10-29 16:36:46,579 - src.agents.parser_agent - INFO - ParserAgent готов: RAG=ON, WebSearch=ON
2025-10-29 16:36:46,579 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-29 16:36:46,580 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-29 16:36:46,580 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов
2025-10-29 16:36:46,580 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-29 16:36:46,581 - src.langgraph.workflow - INFO - ✓ Workflow скомпилирован: parser → quiz_generator → END
2025-10-29 16:36:46,581 - src.langgraph.workflow - INFO - QuizGenerationWorkflow инициализирован (RAG=True, WebSearch=True)
2025-10-29 16:36:46,581 - __main__ - INFO -    RAG: ✓ Включен
2025-10-29 16:36:46,581 - __main__ - INFO -    Веб-поиск: ✓ Включен
2025-10-29 16:36:46,581 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-29 16:36:46,581 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-29 16:36:46,582 - src.langgraph.workflow - INFO - Запуск workflow (текст: 1094 символов)
2025-10-29 16:36:46,585 - src.agents.parser_agent - INFO - ==================================================
2025-10-29 16:36:46,585 - src.agents.parser_agent - INFO - Parser Agent: начало работы
2025-10-29 16:36:46,585 - src.agents.parser_agent - INFO - ==================================================
2025-10-29 16:36:46,585 - src.agents.parser_agent - INFO - 📝 Текст лекции: 1094 символов
2025-10-29 16:36:46,585 - src.agents.parser_agent - INFO - 🔍 Режим: RAG (текст > 1000 символов)
2025-10-29 16:36:46,586 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 1/4 - Разбиение текста на чанки
2025-10-29 16:36:46,586 - src.rag.chunker - INFO - Текст разбит на 3 чанков
2025-10-29 16:36:46,586 - src.agents.parser_agent - INFO -    Создано 3 чанков
2025-10-29 16:36:46,586 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 2/4 - Создание векторного индекса FAISS
2025-10-29 16:36:46,586 - src.rag.vector_store - INFO - Создание FAISS индекса для 3 чанков...
2025-10-29 16:36:46,824 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 16:36:47,052 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 16:36:47,073 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #1: tokens=170
2025-10-29 16:36:47,076 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-10-29 16:36:47,245 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-10-29 16:36:47,249 - langchain_community.vectorstores.faiss - WARNING - `embedding_function` is expected to be an Embeddings object, support for passing in a function will soon be removed.
2025-10-29 16:36:47,250 - src.rag.vector_store - INFO - ✓ FAISS индекс создан
2025-10-29 16:36:47,250 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 3/4 - Семантический поиск релевантных фрагментов
2025-10-29 16:36:47,364 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 16:36:47,365 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #2: tokens=9
2025-10-29 16:36:47,367 - src.agents.parser_agent - INFO -    Найдено 3 релевантных фрагментов
2025-10-29 16:36:47,367 - src.agents.parser_agent - INFO -    Объединённый контекст: 1093 символов
2025-10-29 16:36:47,367 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 4/4 - Извлечение фактов через LLM
2025-10-29 16:36:47,456 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 16:36:49,033 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 16:36:49,034 - src.utils.gigachat_client - INFO - 📊 LLM запрос #1: prompt=358, completion=196, total=554
2025-10-29 16:36:49,034 - src.agents.parser_agent - INFO -    Извлечено 9 фактов
2025-10-29 16:36:49,034 - src.agents.parser_agent - INFO - ✓ RAG завершён: извлечено 9 фактов
2025-10-29 16:36:49,035 - src.agents.parser_agent - INFO - ✓ Извлечено 9 фактов
2025-10-29 16:36:49,035 - src.agents.parser_agent - INFO - 🌐 Проверка фактов в интернете...
2025-10-29 16:36:49,035 - src.search.web_search - INFO - 🔍 Проверка 9 фактов (tavily режим)...
2025-10-29 16:36:49,035 - src.search.web_search - INFO -    Факт 1/9: Квантовая механика — фундаментальная физическая теория, изуч...
2025-10-29 16:36:51,885 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 16:36:51,886 - src.search.web_search - INFO -    Факт 2/9: Основные принципы квантовой механики включают корпускулярно-...
2025-10-29 16:36:53,672 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 16:36:53,673 - src.search.web_search - INFO -    Факт 3/9: Система описывается волновой функцией (ψ(x,t)), содержащей п...
2025-10-29 16:36:55,211 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 16:36:55,211 - src.search.web_search - INFO -    Факт 4/9: Энергия частиц в микромире принимает строго определённые дис...
2025-10-29 16:36:56,983 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 16:36:56,984 - src.search.web_search - INFO -    Факт 5/9: Важнейшее уравнение квантовой механики — уравнение Шрёдингер...
2025-10-29 16:36:59,759 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 16:36:59,760 - src.search.web_search - INFO -    Факт 6/9: Согласно принципу неопределённости Гейзенберга, невозможно о...
2025-10-29 16:37:02,560 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 16:37:02,560 - src.search.web_search - INFO -    Факт 7/9: Квантовые системы способны пребывать в суперпозиции различны...
2025-10-29 16:37:04,516 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 16:37:04,516 - src.search.web_search - INFO -    Факт 8/9: Приведённая постоянная Планка обозначается как ℏ = h/(2π)....
2025-10-29 16:37:06,424 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 16:37:06,424 - src.search.web_search - INFO -    Факт 9/9: Постулируется невозможность точного одновременного измерения...
2025-10-29 16:37:11,805 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 16:37:11,805 - src.search.web_search - INFO - ✓ Проверка завершена: 9/9 фактов подтверждены (tavily)
2025-10-29 16:37:11,805 - src.agents.parser_agent - INFO - ✓ Проверка завершена: 9/9 фактов подтверждены
2025-10-29 16:37:11,805 - src.agents.parser_agent - INFO - ✓ Создано 9 концепций для QuizAgent
2025-10-29 16:37:11,805 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 16:37:11,805 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-29 16:37:11,805 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 16:37:11,805 - src.agents.adapted_quiz_agent - INFO - Получено 9 концепций от Parser Agent
2025-10-29 16:37:11,805 - src.agents.quiz_agent - INFO - Начало генерации квиза
2025-10-29 16:37:11,805 - src.agents.quiz_agent - INFO - Обнаружено 9 концепций
2025-10-29 16:37:11,805 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Квантовая механика — фундаментальная физическая те
2025-10-29 16:37:11,883 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 16:37:12,915 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 16:37:12,915 - src.utils.gigachat_client - INFO - 📊 LLM запрос #2: prompt=308, completion=124, total=432
2025-10-29 16:37:12,915 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Квантовая механика — фундаментальная физическая те'
2025-10-29 16:37:12,915 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 16:37:12,915 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Основные принципы квантовой механики включают корп
2025-10-29 16:37:13,945 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 16:37:13,945 - src.utils.gigachat_client - INFO - 📊 LLM запрос #3: prompt=303, completion=134, total=437
2025-10-29 16:37:13,945 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Основные принципы квантовой механики включают корп'
2025-10-29 16:37:13,945 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 16:37:13,945 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Система описывается волновой функцией (ψ(x,t)), со
2025-10-29 16:37:15,762 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 16:37:15,762 - src.utils.gigachat_client - INFO - 📊 LLM запрос #4: prompt=308, completion=135, total=443
2025-10-29 16:37:15,762 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Система описывается волновой функцией (ψ(x,t)), со'
2025-10-29 16:37:15,762 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 16:37:15,762 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Энергия частиц в микромире принимает строго опреде
2025-10-29 16:37:16,747 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 16:37:16,747 - src.utils.gigachat_client - INFO - 📊 LLM запрос #5: prompt=287, completion=115, total=402
2025-10-29 16:37:16,747 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Энергия частиц в микромире принимает строго опреде'
2025-10-29 16:37:16,747 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 16:37:16,747 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Важнейшее уравнение квантовой механики — уравнение
2025-10-29 16:37:17,921 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 16:37:17,921 - src.utils.gigachat_client - INFO - 📊 LLM запрос #6: prompt=312, completion=148, total=460
2025-10-29 16:37:17,921 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Важнейшее уравнение квантовой механики — уравнение'
2025-10-29 16:37:17,921 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 16:37:17,921 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Согласно принципу неопределённости Гейзенберга, не
2025-10-29 16:37:19,172 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 16:37:19,172 - src.utils.gigachat_client - INFO - 📊 LLM запрос #7: prompt=302, completion=160, total=462
2025-10-29 16:37:19,172 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Согласно принципу неопределённости Гейзенберга, не'
2025-10-29 16:37:19,172 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 16:37:19,172 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Квантовые системы способны пребывать в суперпозици
2025-10-29 16:37:20,454 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 16:37:20,454 - src.utils.gigachat_client - INFO - 📊 LLM запрос #8: prompt=287, completion=156, total=443
2025-10-29 16:37:20,454 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Квантовые системы способны пребывать в суперпозици'
2025-10-29 16:37:20,454 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 16:37:20,454 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Приведённая постоянная Планка обозначается как ℏ =
2025-10-29 16:37:21,628 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 16:37:21,628 - src.utils.gigachat_client - INFO - 📊 LLM запрос #9: prompt=287, completion=147, total=434
2025-10-29 16:37:21,628 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Приведённая постоянная Планка обозначается как ℏ ='
2025-10-29 16:37:21,628 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 16:37:21,628 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Постулируется невозможность точного одновременного
2025-10-29 16:37:22,817 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 16:37:22,817 - src.utils.gigachat_client - INFO - 📊 LLM запрос #10: prompt=310, completion=157, total=467
2025-10-29 16:37:22,817 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Постулируется невозможность точного одновременного'
2025-10-29 16:37:22,817 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 16:37:22,817 - src.agents.quiz_agent - INFO - Квиз сгенерирован: 7 вопросов
2025-10-29 16:37:22,817 - src.agents.adapted_quiz_agent - INFO - ✓ Сгенерировано 7 вопросов
2025-10-29 16:37:22,817 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по сложности: {'easy': 2, 'medium': 5, 'hard': 0}
2025-10-29 16:37:22,817 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по типам: {'multiple_choice': 7, 'true_false': 0, 'short_answer': 0}
2025-10-29 16:37:22,817 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 16:37:22,817 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-29 16:37:22,817 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 16:37:22,817 - src.langgraph.workflow - INFO - Фактов: 9
2025-10-29 16:37:22,817 - src.langgraph.workflow - INFO - Концепций: 9
2025-10-29 16:37:22,817 - src.langgraph.workflow - INFO - Вопросов: 7
2025-10-29 16:37:22,817 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-29 16:37:22,817 - src.langgraph.workflow - INFO -   - Parser: извлечено 9 фактов
2025-10-29 16:37:22,817 - src.langgraph.workflow - INFO -   - Quiz: сгенерировано 7 вопросов
2025-10-29 16:37:22,817 - __main__ - INFO - 
5️⃣  Форматирование результатов
2025-10-29 16:37:22,817 - src.utils.helpers - INFO - ✓ Результаты сохранены: quiz_result.json
2025-10-29 16:37:22,829 - __main__ - INFO - 
6️⃣  Статистика использования токенов
2025-10-29 16:37:22,829 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 16:37:22,829 - src.utils.gigachat_client - INFO - 📊 ИТОГОВАЯ СТАТИСТИКА ИСПОЛЬЗОВАНИЯ ТОКЕНОВ
2025-10-29 16:37:22,829 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 16:37:22,829 - src.utils.gigachat_client - INFO - LLM запросов: 10
2025-10-29 16:37:22,829 - src.utils.gigachat_client - INFO -   Токенов в промптах: 3,062
2025-10-29 16:37:22,829 - src.utils.gigachat_client - INFO -   Токенов в ответах: 1,472
2025-10-29 16:37:22,829 - src.utils.gigachat_client - INFO -   Всего LLM токенов: 4,534
2025-10-29 16:37:22,829 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 16:37:22,831 - src.utils.gigachat_client - INFO - Embedding запросов: 2
2025-10-29 16:37:22,831 - src.utils.gigachat_client - INFO -   Embedding токенов: 179
2025-10-29 16:37:22,831 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 16:37:22,831 - src.utils.gigachat_client - INFO - ВСЕГО ТОКЕНОВ: 4,713
2025-10-29 16:37:22,831 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 16:37:22,831 - __main__ - INFO - 
======================================================================
2025-10-29 16:37:22,831 - __main__ - INFO - ✓ ГЕНЕРАЦИЯ ЗАВЕРШЕНА УСПЕШНО
2025-10-29 16:37:22,831 - __main__ - INFO - ======================================================================
2025-10-29 16:37:22,831 - __main__ - INFO - 📁 Результаты: quiz_result.json
2025-10-29 16:37:22,831 - __main__ - INFO - 📋 Логи: quiz_generation.log
2025-10-29 16:38:38,399 - __main__ - INFO - ======================================================================
2025-10-29 16:38:38,399 - __main__ - INFO - MINDFORGE QUIZ GENERATOR - LANGGRAPH WORKFLOW
2025-10-29 16:38:38,399 - __main__ - INFO - ======================================================================
2025-10-29 16:38:38,399 - __main__ - INFO - 
1️⃣  Загрузка конфигурации
2025-10-29 16:38:38,399 - __main__ - INFO - 
2️⃣  Загрузка лекции: sample_lecture.txt
2025-10-29 16:38:38,399 - src.utils.helpers - INFO - ✓ Загружена лекция: sample_lecture.txt (1101 символов)
2025-10-29 16:38:38,399 - __main__ - INFO -    📄 Длина: 1101 символов
2025-10-29 16:38:38,399 - __main__ - INFO -    📝 Слов: ~132
2025-10-29 16:38:38,399 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-29 16:38:38,399 - src.agents.base_agent.ParserAgent - INFO - ParserAgent инициализирован
2025-10-29 16:38:38,477 - src.rag.chunker - INFO - TextChunker инициализирован (size=500, overlap=100)
2025-10-29 16:38:38,600 - src.rag.vector_store - INFO - VectorStore инициализирован
2025-10-29 16:38:38,601 - src.agents.parser_agent - INFO - ✓ RAG инициализирован
2025-10-29 16:38:38,729 - src.search.web_search - INFO - ✓ WebSearchService: режим TAVILY (реальный веб-поиск)
2025-10-29 16:38:38,729 - src.agents.parser_agent - INFO - ✓ WebSearch инициализирован
2025-10-29 16:38:38,729 - src.agents.parser_agent - INFO - ParserAgent готов: RAG=ON, WebSearch=ON
2025-10-29 16:38:38,729 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-29 16:38:38,729 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-29 16:38:38,729 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов
2025-10-29 16:38:38,729 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-29 16:38:38,729 - src.langgraph.workflow - INFO - ✓ Workflow скомпилирован: parser → quiz_generator → END
2025-10-29 16:38:38,729 - src.langgraph.workflow - INFO - QuizGenerationWorkflow инициализирован (RAG=True, WebSearch=True)
2025-10-29 16:38:38,729 - __main__ - INFO -    RAG: ✓ Включен
2025-10-29 16:38:38,729 - __main__ - INFO -    Веб-поиск: ✓ Включен
2025-10-29 16:38:38,729 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-29 16:38:38,729 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-29 16:38:38,729 - src.langgraph.workflow - INFO - Запуск workflow (текст: 1101 символов)
2025-10-29 16:38:38,744 - src.agents.parser_agent - INFO - ==================================================
2025-10-29 16:38:38,744 - src.agents.parser_agent - INFO - Parser Agent: начало работы
2025-10-29 16:38:38,744 - src.agents.parser_agent - INFO - ==================================================
2025-10-29 16:38:38,744 - src.agents.parser_agent - INFO - 📝 Текст лекции: 1101 символов
2025-10-29 16:38:38,744 - src.agents.parser_agent - INFO - 🔍 Режим: RAG (текст > 1000 символов)
2025-10-29 16:38:38,744 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 1/4 - Разбиение текста на чанки
2025-10-29 16:38:38,744 - src.rag.chunker - INFO - Текст разбит на 3 чанков
2025-10-29 16:38:38,744 - src.agents.parser_agent - INFO -    Создано 3 чанков
2025-10-29 16:38:38,744 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 2/4 - Создание векторного индекса FAISS
2025-10-29 16:38:38,744 - src.rag.vector_store - INFO - Создание FAISS индекса для 3 чанков...
2025-10-29 16:38:38,869 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 16:38:39,025 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 16:38:39,041 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #1: tokens=171
2025-10-29 16:38:39,059 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-10-29 16:38:39,072 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-10-29 16:38:39,076 - langchain_community.vectorstores.faiss - WARNING - `embedding_function` is expected to be an Embeddings object, support for passing in a function will soon be removed.
2025-10-29 16:38:39,077 - src.rag.vector_store - INFO - ✓ FAISS индекс создан
2025-10-29 16:38:39,077 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 3/4 - Семантический поиск релевантных фрагментов
2025-10-29 16:38:39,181 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 16:38:39,181 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #2: tokens=9
2025-10-29 16:38:39,181 - src.agents.parser_agent - INFO -    Найдено 3 релевантных фрагментов
2025-10-29 16:38:39,181 - src.agents.parser_agent - INFO -    Объединённый контекст: 1100 символов
2025-10-29 16:38:39,181 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 4/4 - Извлечение фактов через LLM
2025-10-29 16:38:39,260 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 16:38:40,636 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 16:38:40,636 - src.utils.gigachat_client - INFO - 📊 LLM запрос #1: prompt=360, completion=177, total=537
2025-10-29 16:38:40,636 - src.agents.parser_agent - INFO -    Извлечено 8 фактов
2025-10-29 16:38:40,636 - src.agents.parser_agent - INFO - ✓ RAG завершён: извлечено 8 фактов
2025-10-29 16:38:40,636 - src.agents.parser_agent - INFO - ✓ Извлечено 8 фактов
2025-10-29 16:38:40,636 - src.agents.parser_agent - INFO - 🌐 Проверка фактов в интернете...
2025-10-29 16:38:40,636 - src.search.web_search - INFO - 🔍 Проверка 8 фактов (tavily режим)...
2025-10-29 16:38:40,636 - src.search.web_search - INFO -    Факт 1/8: Квантовая механика — раздел физики, изучающий поведение част...
2025-10-29 16:38:43,466 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 16:38:43,466 - src.search.web_search - INFO -    Факт 2/8: Основные отличия от классической механики: введение понятий ...
2025-10-29 16:38:46,471 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 16:38:46,471 - src.search.web_search - INFO -    Факт 3/8: Состояние квантовой системы определяется волновой функцией ψ...
2025-10-29 16:38:48,050 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 16:38:48,050 - src.search.web_search - INFO -    Факт 4/8: Квантовое состояние частицы имеет дискретную энергию, то ест...
2025-10-29 16:38:57,468 - src.search.web_search - WARNING -       ✗ Не найдено подтверждений
2025-10-29 16:38:57,468 - src.search.web_search - INFO -    Факт 5/8: Важнейшее уравнение квантовой механики — уравнение Шрёдингер...
2025-10-29 16:38:59,735 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 16:38:59,735 - src.search.web_search - INFO -    Факт 6/8: Неопределённость Гейзенберга утверждает невозможность точног...
2025-10-29 16:39:02,160 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 16:39:02,160 - src.search.web_search - INFO -    Факт 7/8: В состоянии суперпозиции частица находится сразу в нескольки...
2025-10-29 16:39:03,788 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 16:39:03,788 - src.search.web_search - INFO -    Факт 8/8: Приведённая постоянная Планка обозначается как ℏ = h/(2π) и ...
2025-10-29 16:39:06,807 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 16:39:06,807 - src.search.web_search - INFO - ✓ Проверка завершена: 7/8 фактов подтверждены (tavily)
2025-10-29 16:39:06,807 - src.agents.parser_agent - INFO - ✓ Проверка завершена: 7/8 фактов подтверждены
2025-10-29 16:39:06,807 - src.agents.parser_agent - INFO - ✓ Создано 7 концепций для QuizAgent
2025-10-29 16:39:06,807 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 16:39:06,807 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-29 16:39:06,807 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 16:39:06,822 - src.agents.adapted_quiz_agent - INFO - Получено 7 концепций от Parser Agent
2025-10-29 16:39:06,822 - src.agents.quiz_agent - INFO - Начало генерации квиза
2025-10-29 16:39:06,822 - src.agents.quiz_agent - INFO - Обнаружено 7 концепций
2025-10-29 16:39:06,822 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Квантовая механика — раздел физики, изучающий пове
2025-10-29 16:39:06,885 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 16:39:07,715 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 16:39:07,715 - src.utils.gigachat_client - INFO - 📊 LLM запрос #2: prompt=310, completion=102, total=412
2025-10-29 16:39:07,715 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Квантовая механика — раздел физики, изучающий пове'
2025-10-29 16:39:07,715 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 16:39:07,715 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Основные отличия от классической механики: введени
2025-10-29 16:39:09,591 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 16:39:09,591 - src.utils.gigachat_client - INFO - 📊 LLM запрос #3: prompt=308, completion=248, total=556
2025-10-29 16:39:09,591 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Основные отличия от классической механики: введени'
2025-10-29 16:39:09,591 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 16:39:09,591 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Состояние квантовой системы определяется волновой 
2025-10-29 16:39:10,748 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 16:39:10,748 - src.utils.gigachat_client - INFO - 📊 LLM запрос #4: prompt=281, completion=147, total=428
2025-10-29 16:39:10,748 - src.agents.quiz_agent - WARNING - JSON невалиден, попытка исправления...
2025-10-29 16:39:10,748 - src.agents.quiz_agent - ERROR - Не удалось исправить JSON
2025-10-29 16:39:10,748 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: 1 validation error for Question
__root__
  Expecting ':' delimiter: line 1 column 9 (char 8) [type=value_error.jsondecode, input_value='{"     "question_text":"...difficulty":"medium"  }', input_type=str]
2025-10-29 16:39:10,748 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 16:39:11,954 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 16:39:11,955 - src.utils.gigachat_client - INFO - 📊 LLM запрос #5: prompt=94, completion=161, total=255
2025-10-29 16:39:11,955 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Состояние квантовой системы определяется волновой '
2025-10-29 16:39:11,956 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 16:39:11,956 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Важнейшее уравнение квантовой механики — уравнение
2025-10-29 16:39:13,111 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 16:39:13,111 - src.utils.gigachat_client - INFO - 📊 LLM запрос #6: prompt=294, completion=137, total=431
2025-10-29 16:39:13,111 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Важнейшее уравнение квантовой механики — уравнение'
2025-10-29 16:39:13,111 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 16:39:13,111 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Неопределённость Гейзенберга утверждает невозможно
2025-10-29 16:39:14,000 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 16:39:14,001 - src.utils.gigachat_client - INFO - 📊 LLM запрос #7: prompt=284, completion=117, total=401
2025-10-29 16:39:14,001 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Неопределённость Гейзенберга утверждает невозможно'
2025-10-29 16:39:14,001 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 16:39:14,001 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: В состоянии суперпозиции частица находится сразу в
2025-10-29 16:39:14,817 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 16:39:14,817 - src.utils.gigachat_client - INFO - 📊 LLM запрос #8: prompt=301, completion=104, total=405
2025-10-29 16:39:14,817 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'В состоянии суперпозиции частица находится сразу в'
2025-10-29 16:39:14,817 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 16:39:14,817 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Приведённая постоянная Планка обозначается как ℏ =
2025-10-29 16:39:15,504 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 16:39:15,504 - src.utils.gigachat_client - INFO - 📊 LLM запрос #9: prompt=311, completion=84, total=395
2025-10-29 16:39:15,504 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Приведённая постоянная Планка обозначается как ℏ ='
2025-10-29 16:39:15,504 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 16:39:15,520 - src.agents.quiz_agent - INFO - Квиз сгенерирован: 7 вопросов
2025-10-29 16:39:15,520 - src.agents.adapted_quiz_agent - INFO - ✓ Сгенерировано 7 вопросов
2025-10-29 16:39:15,520 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по сложности: {'easy': 4, 'medium': 3, 'hard': 0}
2025-10-29 16:39:15,520 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по типам: {'multiple_choice': 6, 'true_false': 0, 'short_answer': 1}
2025-10-29 16:39:15,520 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 16:39:15,520 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-29 16:39:15,520 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 16:39:15,520 - src.langgraph.workflow - INFO - Фактов: 7
2025-10-29 16:39:15,520 - src.langgraph.workflow - INFO - Концепций: 7
2025-10-29 16:39:15,520 - src.langgraph.workflow - INFO - Вопросов: 7
2025-10-29 16:39:15,520 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-29 16:39:15,520 - src.langgraph.workflow - INFO -   - Parser: извлечено 7 фактов
2025-10-29 16:39:15,520 - src.langgraph.workflow - INFO -   - Quiz: сгенерировано 7 вопросов
2025-10-29 16:39:15,520 - __main__ - INFO - 
5️⃣  Форматирование результатов
2025-10-29 16:39:15,520 - src.utils.helpers - INFO - ✓ Результаты сохранены: quiz_result.json
2025-10-29 16:39:15,520 - __main__ - INFO - 
6️⃣  Статистика использования токенов
2025-10-29 16:39:15,520 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 16:39:15,520 - src.utils.gigachat_client - INFO - 📊 ИТОГОВАЯ СТАТИСТИКА ИСПОЛЬЗОВАНИЯ ТОКЕНОВ
2025-10-29 16:39:15,520 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 16:39:15,520 - src.utils.gigachat_client - INFO - LLM запросов: 9
2025-10-29 16:39:15,520 - src.utils.gigachat_client - INFO -   Токенов в промптах: 2,543
2025-10-29 16:39:15,520 - src.utils.gigachat_client - INFO -   Токенов в ответах: 1,277
2025-10-29 16:39:15,520 - src.utils.gigachat_client - INFO -   Всего LLM токенов: 3,820
2025-10-29 16:39:15,520 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 16:39:15,520 - src.utils.gigachat_client - INFO - Embedding запросов: 2
2025-10-29 16:39:15,520 - src.utils.gigachat_client - INFO -   Embedding токенов: 180
2025-10-29 16:39:15,520 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 16:39:15,520 - src.utils.gigachat_client - INFO - ВСЕГО ТОКЕНОВ: 4,000
2025-10-29 16:39:15,520 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 16:39:15,520 - __main__ - INFO - 
======================================================================
2025-10-29 16:39:15,520 - __main__ - INFO - ✓ ГЕНЕРАЦИЯ ЗАВЕРШЕНА УСПЕШНО
2025-10-29 16:39:15,520 - __main__ - INFO - ======================================================================
2025-10-29 16:39:15,520 - __main__ - INFO - 📁 Результаты: quiz_result.json
2025-10-29 16:39:15,520 - __main__ - INFO - 📋 Логи: quiz_generation.log
2025-10-29 18:47:57,721 - __main__ - INFO - ======================================================================
2025-10-29 18:47:57,722 - __main__ - INFO - MINDFORGE QUIZ GENERATOR - LANGGRAPH WORKFLOW
2025-10-29 18:47:57,722 - __main__ - INFO - ======================================================================
2025-10-29 18:47:57,722 - __main__ - INFO - 
1️⃣  Загрузка конфигурации
2025-10-29 18:47:57,724 - __main__ - INFO - 
2️⃣  Загрузка лекции: sample_lecture.txt
2025-10-29 18:47:57,724 - src.utils.helpers - INFO - ✓ Загружена лекция: sample_lecture.txt (1096 символов)
2025-10-29 18:47:57,724 - __main__ - INFO -    📄 Длина: 1096 символов
2025-10-29 18:47:57,725 - __main__ - INFO -    📝 Слов: ~131
2025-10-29 18:47:57,725 - __main__ - INFO - 
3️⃣  Инициализация LangGraph Workflow
2025-10-29 18:47:57,725 - src.agents.base_agent.ParserAgent - INFO - ParserAgent инициализирован
2025-10-29 18:47:57,823 - src.rag.chunker - INFO - TextChunker инициализирован (size=500, overlap=100)
2025-10-29 18:47:57,962 - src.rag.vector_store - INFO - VectorStore инициализирован
2025-10-29 18:47:57,962 - src.agents.parser_agent - INFO - ✓ RAG инициализирован
2025-10-29 18:47:58,158 - src.search.web_search - INFO - ✓ WebSearchService: режим TAVILY (реальный веб-поиск)
2025-10-29 18:47:58,159 - src.agents.parser_agent - INFO - ✓ WebSearch инициализирован
2025-10-29 18:47:58,159 - src.agents.parser_agent - INFO - ParserAgent готов: RAG=ON, WebSearch=ON
2025-10-29 18:47:58,159 - src.agents.adapted_quiz_agent - INFO - Инициализация Adapted Quiz Agent...
2025-10-29 18:47:58,159 - src.agents.base_agent.QuizAgent - INFO - QuizAgent инициализирован
2025-10-29 18:47:58,159 - src.agents.quiz_agent - INFO - QuizAgent инициализирован: 7 вопросов
2025-10-29 18:47:58,160 - src.agents.adapted_quiz_agent - INFO - Adapted Quiz Agent инициализирован
2025-10-29 18:47:58,161 - src.langgraph.workflow - INFO - ✓ Workflow скомпилирован: parser → quiz_generator → END
2025-10-29 18:47:58,161 - src.langgraph.workflow - INFO - QuizGenerationWorkflow инициализирован (RAG=True, WebSearch=True)
2025-10-29 18:47:58,161 - __main__ - INFO -    RAG: ✓ Включен
2025-10-29 18:47:58,161 - __main__ - INFO -    Веб-поиск: ✓ Включен
2025-10-29 18:47:58,161 - __main__ - INFO - 
4️⃣  Запуск генерации квиза...
2025-10-29 18:47:58,161 - __main__ - INFO - ----------------------------------------------------------------------
2025-10-29 18:47:58,161 - src.langgraph.workflow - INFO - Запуск workflow (текст: 1096 символов)
2025-10-29 18:47:58,168 - src.agents.parser_agent - INFO - ==================================================
2025-10-29 18:47:58,169 - src.agents.parser_agent - INFO - Parser Agent: начало работы
2025-10-29 18:47:58,169 - src.agents.parser_agent - INFO - ==================================================
2025-10-29 18:47:58,169 - src.agents.parser_agent - INFO - 📝 Текст лекции: 1096 символов
2025-10-29 18:47:58,169 - src.agents.parser_agent - INFO - 🔍 Режим: RAG (текст > 1000 символов)
2025-10-29 18:47:58,169 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 1/4 - Разбиение текста на чанки
2025-10-29 18:47:58,169 - src.rag.chunker - INFO - Текст разбит на 3 чанков
2025-10-29 18:47:58,170 - src.agents.parser_agent - INFO -    Создано 3 чанков
2025-10-29 18:47:58,170 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 2/4 - Создание векторного индекса FAISS
2025-10-29 18:47:58,170 - src.rag.vector_store - INFO - Создание FAISS индекса для 3 чанков...
2025-10-29 18:47:58,441 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 18:47:58,732 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 18:47:58,769 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #1: tokens=170
2025-10-29 18:47:58,773 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-10-29 18:47:58,865 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-10-29 18:47:58,872 - langchain_community.vectorstores.faiss - WARNING - `embedding_function` is expected to be an Embeddings object, support for passing in a function will soon be removed.
2025-10-29 18:47:58,873 - src.rag.vector_store - INFO - ✓ FAISS индекс создан
2025-10-29 18:47:58,873 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 3/4 - Семантический поиск релевантных фрагментов
2025-10-29 18:47:59,016 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/embeddings "HTTP/1.1 200 OK"
2025-10-29 18:47:59,017 - src.utils.gigachat_client - INFO - 🔢 Embedding запрос #2: tokens=9
2025-10-29 18:47:59,026 - src.agents.parser_agent - INFO -    Найдено 3 релевантных фрагментов
2025-10-29 18:47:59,026 - src.agents.parser_agent - INFO -    Объединённый контекст: 1095 символов
2025-10-29 18:47:59,026 - src.agents.parser_agent - INFO - 🔍 RAG: Шаг 4/4 - Извлечение фактов через LLM
2025-10-29 18:47:59,149 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 18:48:00,558 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 18:48:00,559 - src.utils.gigachat_client - INFO - 📊 LLM запрос #1: prompt=355, completion=174, total=529
2025-10-29 18:48:00,559 - src.agents.parser_agent - INFO -    Извлечено 9 фактов
2025-10-29 18:48:00,560 - src.agents.parser_agent - INFO - ✓ RAG завершён: извлечено 9 фактов
2025-10-29 18:48:00,560 - src.agents.parser_agent - INFO - ✓ Извлечено 9 фактов
2025-10-29 18:48:00,561 - src.agents.parser_agent - INFO - 🌐 Проверка фактов в интернете...
2025-10-29 18:48:00,561 - src.search.web_search - INFO - 🔍 Проверка 9 фактов (tavily режим)...
2025-10-29 18:48:00,561 - src.search.web_search - INFO -    Факт 1/9: Квантовая механика — фундаментальная физическая теория, опис...
2025-10-29 18:48:03,763 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 18:48:03,764 - src.search.web_search - INFO -    Факт 2/9: Основные отличия от классической механики: квантование энерг...
2025-10-29 18:48:05,856 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 18:48:05,856 - src.search.web_search - INFO -    Факт 3/9: Волновая функция (ψ(x,t)) полностью определяет состояние ква...
2025-10-29 18:48:07,797 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 18:48:07,797 - src.search.web_search - INFO -    Факт 4/9: Энергия частиц в микромире принимает дискретные (квантованны...
2025-10-29 18:48:09,542 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 18:48:09,542 - src.search.web_search - INFO -    Факт 5/9: Уравнение Шрёдингера описывает временную эволюцию волновой ф...
2025-10-29 18:48:11,605 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 18:48:11,605 - src.search.web_search - INFO -    Факт 6/9: Принцип неопределённости Гейзенберга ограничивает одновремен...
2025-10-29 18:48:14,683 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 18:48:14,683 - src.search.web_search - INFO -    Факт 7/9: Квантовые состояния объекта находятся в суперпозиции несколь...
2025-10-29 18:48:16,634 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 18:48:16,635 - src.search.web_search - INFO -    Факт 8/9: Приведённая постоянная Планка обозначается символом ℏ....
2025-10-29 18:48:17,984 - src.search.web_search - INFO -       ✓ Подтверждён (2 источников)
2025-10-29 18:48:17,984 - src.search.web_search - INFO -    Факт 9/9: Измерение приводит к коллапсу суперпозиции состояний, оставл...
2025-10-29 18:48:20,560 - src.search.web_search - INFO -       ✓ Подтверждён (1 источников)
2025-10-29 18:48:20,560 - src.search.web_search - INFO - ✓ Проверка завершена: 9/9 фактов подтверждены (tavily)
2025-10-29 18:48:20,561 - src.agents.parser_agent - INFO - ✓ Проверка завершена: 9/9 фактов подтверждены
2025-10-29 18:48:20,561 - src.agents.parser_agent - INFO - ✓ Создано 9 концепций для QuizAgent
2025-10-29 18:48:20,562 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 18:48:20,562 - src.agents.adapted_quiz_agent - INFO - Quiz Agent: начало генерации квиза
2025-10-29 18:48:20,562 - src.agents.adapted_quiz_agent - INFO - ==================================================
2025-10-29 18:48:20,563 - src.agents.adapted_quiz_agent - INFO - Получено 9 концепций от Parser Agent
2025-10-29 18:48:20,563 - src.agents.quiz_agent - INFO - Начало генерации квиза
2025-10-29 18:48:20,563 - src.agents.quiz_agent - INFO - Обнаружено 9 концепций
2025-10-29 18:48:20,563 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Квантовая механика — фундаментальная физическая те
2025-10-29 18:48:20,663 - httpx - INFO - HTTP Request: POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth "HTTP/1.1 200 OK"
2025-10-29 18:48:22,157 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 18:48:22,158 - src.utils.gigachat_client - INFO - 📊 LLM запрос #2: prompt=308, completion=173, total=481
2025-10-29 18:48:22,160 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Квантовая механика — фундаментальная физическая те'
2025-10-29 18:48:22,160 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 18:48:22,160 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Основные отличия от классической механики: квантов
2025-10-29 18:48:23,490 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 18:48:23,492 - src.utils.gigachat_client - INFO - 📊 LLM запрос #3: prompt=304, completion=177, total=481
2025-10-29 18:48:23,492 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Основные отличия от классической механики: квантов'
2025-10-29 18:48:23,492 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 18:48:23,492 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Волновая функция (ψ(x,t)) полностью определяет сос
2025-10-29 18:48:24,544 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 18:48:24,544 - src.utils.gigachat_client - INFO - 📊 LLM запрос #4: prompt=289, completion=139, total=428
2025-10-29 18:48:24,545 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Волновая функция (ψ(x,t)) полностью определяет сос'
2025-10-29 18:48:24,545 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 18:48:24,545 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Энергия частиц в микромире принимает дискретные (к
2025-10-29 18:48:25,573 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 18:48:25,574 - src.utils.gigachat_client - INFO - 📊 LLM запрос #5: prompt=290, completion=137, total=427
2025-10-29 18:48:25,575 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Энергия частиц в микромире принимает дискретные (к'
2025-10-29 18:48:25,575 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 18:48:25,575 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Уравнение Шрёдингера описывает временную эволюцию 
2025-10-29 18:48:26,555 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 18:48:26,556 - src.utils.gigachat_client - INFO - 📊 LLM запрос #6: prompt=289, completion=126, total=415
2025-10-29 18:48:26,556 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Уравнение Шрёдингера описывает временную эволюцию '
2025-10-29 18:48:26,556 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 18:48:26,556 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Принцип неопределённости Гейзенберга ограничивает 
2025-10-29 18:48:27,636 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 18:48:27,636 - src.utils.gigachat_client - INFO - 📊 LLM запрос #7: prompt=303, completion=140, total=443
2025-10-29 18:48:27,636 - src.agents.quiz_agent - WARNING - JSON невалиден, попытка исправления...
2025-10-29 18:48:27,637 - src.agents.quiz_agent - ERROR - Не удалось исправить JSON
2025-10-29 18:48:27,642 - src.agents.quiz_agent - ERROR - ✗ Попытка 1 не удалась: 1 validation error for Question
__root__
  Expecting ',' delimiter: line 1 column 174 (char 173) [type=value_error.jsondecode, input_value='{  "question_text": "П..."difficulty": "medium"}', input_type=str]
2025-10-29 18:48:27,642 - src.agents.quiz_agent - INFO - Повторная попытка с упрощенным промптом...
2025-10-29 18:48:28,380 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 18:48:28,380 - src.utils.gigachat_client - INFO - 📊 LLM запрос #8: prompt=95, completion=92, total=187
2025-10-29 18:48:28,380 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Принцип неопределённости Гейзенберга ограничивает '
2025-10-29 18:48:28,381 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 18:48:28,381 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Квантовые состояния объекта находятся в суперпозиц
2025-10-29 18:48:29,439 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 18:48:29,440 - src.utils.gigachat_client - INFO - 📊 LLM запрос #9: prompt=283, completion=140, total=423
2025-10-29 18:48:29,441 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Квантовые состояния объекта находятся в суперпозиц'
2025-10-29 18:48:29,441 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 18:48:29,441 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Приведённая постоянная Планка обозначается символо
2025-10-29 18:48:30,161 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 18:48:30,162 - src.utils.gigachat_client - INFO - 📊 LLM запрос #10: prompt=281, completion=90, total=371
2025-10-29 18:48:30,163 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Приведённая постоянная Планка обозначается символо'
2025-10-29 18:48:30,163 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 18:48:30,163 - src.agents.quiz_agent - INFO - Генерация 1 вопросов для: Измерение приводит к коллапсу суперпозиции состоян
2025-10-29 18:48:31,769 - httpx - INFO - HTTP Request: POST https://gigachat.devices.sberbank.ru/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-29 18:48:31,769 - src.utils.gigachat_client - INFO - 📊 LLM запрос #11: prompt=293, completion=183, total=476
2025-10-29 18:48:31,769 - src.agents.quiz_agent - INFO - ✓ Вопрос сгенерирован для 'Измерение приводит к коллапсу суперпозиции состоян'
2025-10-29 18:48:31,769 - src.agents.quiz_agent - INFO - Успешно сгенерировано 1 вопросов
2025-10-29 18:48:31,770 - src.agents.quiz_agent - INFO - Квиз сгенерирован: 7 вопросов
2025-10-29 18:48:31,770 - src.agents.adapted_quiz_agent - INFO - ✓ Сгенерировано 7 вопросов
2025-10-29 18:48:31,770 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по сложности: {'easy': 2, 'medium': 5, 'hard': 0}
2025-10-29 18:48:31,770 - src.agents.adapted_quiz_agent - INFO - ✓ Распределение по типам: {'multiple_choice': 6, 'true_false': 0, 'short_answer': 1}
2025-10-29 18:48:31,771 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 18:48:31,771 - src.langgraph.workflow - INFO - WORKFLOW ЗАВЕРШЁН УСПЕШНО
2025-10-29 18:48:31,771 - src.langgraph.workflow - INFO - ======================================================================
2025-10-29 18:48:31,771 - src.langgraph.workflow - INFO - Фактов: 9
2025-10-29 18:48:31,771 - src.langgraph.workflow - INFO - Концепций: 9
2025-10-29 18:48:31,771 - src.langgraph.workflow - INFO - Вопросов: 7
2025-10-29 18:48:31,772 - src.langgraph.workflow - INFO - 
История выполнения:
2025-10-29 18:48:31,772 - src.langgraph.workflow - INFO -   - Parser: извлечено 9 фактов
2025-10-29 18:48:31,772 - src.langgraph.workflow - INFO -   - Quiz: сгенерировано 7 вопросов
2025-10-29 18:48:31,772 - __main__ - INFO - 
5️⃣  Форматирование результатов
2025-10-29 18:48:31,773 - src.utils.helpers - INFO - ✓ Результаты сохранены: quiz_result.json
2025-10-29 18:48:31,775 - __main__ - INFO - 
6️⃣  Статистика использования токенов
2025-10-29 18:48:31,775 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 18:48:31,775 - src.utils.gigachat_client - INFO - 📊 ИТОГОВАЯ СТАТИСТИКА ИСПОЛЬЗОВАНИЯ ТОКЕНОВ
2025-10-29 18:48:31,775 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 18:48:31,775 - src.utils.gigachat_client - INFO - LLM запросов: 11
2025-10-29 18:48:31,775 - src.utils.gigachat_client - INFO -   Токенов в промптах: 3,090
2025-10-29 18:48:31,775 - src.utils.gigachat_client - INFO -   Токенов в ответах: 1,571
2025-10-29 18:48:31,775 - src.utils.gigachat_client - INFO -   Всего LLM токенов: 4,661
2025-10-29 18:48:31,775 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 18:48:31,775 - src.utils.gigachat_client - INFO - Embedding запросов: 2
2025-10-29 18:48:31,776 - src.utils.gigachat_client - INFO -   Embedding токенов: 179
2025-10-29 18:48:31,776 - src.utils.gigachat_client - INFO - ----------------------------------------------------------------------
2025-10-29 18:48:31,776 - src.utils.gigachat_client - INFO - ВСЕГО ТОКЕНОВ: 4,840
2025-10-29 18:48:31,776 - src.utils.gigachat_client - INFO - ======================================================================
2025-10-29 18:48:31,777 - __main__ - INFO - 
======================================================================
2025-10-29 18:48:31,777 - __main__ - INFO - ✓ ГЕНЕРАЦИЯ ЗАВЕРШЕНА УСПЕШНО
2025-10-29 18:48:31,777 - __main__ - INFO - ======================================================================
2025-10-29 18:48:31,777 - __main__ - INFO - 📁 Результаты: quiz_result.json
2025-10-29 18:48:31,777 - __main__ - INFO - 📋 Логи: quiz_generation.log
